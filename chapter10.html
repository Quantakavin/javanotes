<head>
  <link href="java.css" rel="stylesheet" type="text/css">
  <!-- Latest compiled and minified CSS -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

  <!-- Optional theme -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">

  <!-- Latest compiled and minified JavaScript -->
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
</head>
<header class="navbar navbar-fixed-top navbar-inverse navbar-default">
  <div class="container-fluid" style="background-color: #20B2AA; padding-left:15%;">
    <nav>
      <div class="navbar-brand" style="color: white">
        Enrole
      </div>
    </nav>
  </div>
</header>
<body id="pid-programming-part2-material-week-10" class="not-front not-logged-in page-node node-type-weekly-tasks no-sidebars full-node panels layout-main sidebars-both-first font-family-lucida font-size-13 grid-type-fluid grid-width-16 fluid-100 container signup2">
  <div id="page" class="page">
    <div id="page-inner" class="page-inner">

      <!-- header-top row: width = grid_width -->

      <!-- header-group row: width = grid_width -->
      <div id="header-group-wrapper" class="header-group-wrapper full-width">
        <div id="header-group" class="header-group row grid16-16">
          <div id="header-group-inner" class="header-group-inner inner clearfix">
                                    <div id="primary-menu" class="primary-menu block">
<div id="primary-menu-inner" class="primary-menu-inner inner clearfix">
    <div class="navigation-wrapper"> <div class="navigation-links left">
      </div>
<div class="navigation-links right">                                      </div>                 </div> </div><!-- /primary-menu-inner -->
</div><!-- /primary-menu -->
          </div><!-- /header-group-inner -->
        </div><!-- /header-group -->
      </div><!-- /header-group-wrapper -->

      <!-- preface-top row: width = grid_width -->

<!--            <div id="preface-top-wrapper" class="preface-top-wrapper full-width">
        <div id="preface-top" class="preface-top row grid16-16">
          <div id="preface-top-inner" class="preface-top-inner inner clearfix">
-->
          </div><!-- /preface-top-inner -->
        </div><!-- /preface-top -->
      <!-- /preface-top-wrapper -->

    <!-- main row: width = grid_width -->
    <div id="main-wrapper" class="main-wrapper full-width">
      <div id="main" class="main row grid16-16">
        <div id="main-inner" class="main-inner inner clearfix">

          <!-- main group: width = grid_width - sidebar_first_width -->
          <div id="main-group" class="main-group row nested grid16-16">
            <div id="main-group-inner" class="main-group-inner inner clearfix">

              <div id="main-content" class="main-content row nested">
                <div id="main-content-inner" class="main-content-inner inner clearfix">
                  <!-- content group: width = grid_width - (sidebar_first_width + sidebar_last_width) -->
                    <div id="content-group" class="content-group row nested " style="width:100%">
                      <div id="content-group-inner" class="content-group-inner inner clearfix">


                        <div id="content-region" class="content-region row nested">
                          <div id="content-region-inner" class="content-region-inner inner clearfix">
                            <a name="main-content-area" id="main-content-area"></a>
                                                        <div id="content-inner" class="content-inner block">
                              <div id="content-inner-inner" class="content-inner-inner inner clearfix">
                                                                                                <div id="content-content" class="content-content">
                                  <div class="panel-flexible panels-flexible-13 clear-block">
<div class="panel-flexible-inside panels-flexible-13-inside">
<div class="panels-flexible-row panels-flexible-row-13-7 panels-flexible-row-first clear-block ">
  <div class="inside panels-flexible-row-inside panels-flexible-row-13-7-inside panels-flexible-row-inside-first clear-block">
<div class="panels-flexible-region panels-flexible-region-13-js_ panels-flexible-region-first panels-flexible-region-last ">
  <div class="inside panels-flexible-region-inside panels-flexible-region-13-js_-inside panels-flexible-region-inside-first panels-flexible-region-inside-last">
<div class="panel-pane pane-custom pane-2 ">
  <div class="inner">
    <div class="corner-top"><div class="corner-top-right corner"></div><div class="corner-top-left corner"></div></div>
  	<div class="inner-wrapper">
      <div class="inner-inner">

            <div class="warning-banner">
                  </div>

                    <div class="pane-content content">
                      <h1 class="title">Object-Oriented Programming with Java, part II</h1>        </div>


              </div><!-- /inner-inner -->
	  </div><!-- /inner-wrapper -->
    <div class="corner-bottom"><div class="corner-bottom-right corner"></div><div class="corner-bottom-left corner"></div></div>
  </div><!-- /inner -->
</div><!-- /block --><div class="panel-region-separator"></div><div class="panel-pane pane-custom pane-3 ">
  <div class="inner">
    <div class="corner-top"><div class="corner-top-right corner"></div><div class="corner-top-left corner"></div></div>
  	<div class="inner-wrapper">
      <div class="inner-inner">



        <div class="pane-content content">
          <link href="/2013-oo-programming/menu.css" media="screen" rel="stylesheet" type="text/css">
<link href="/2013-oo-programming/common-new.css" media="screen, print" rel="stylesheet" type="text/css">
<link href="/2013-oo-programming/sh_style.css" media="screen, print" rel="stylesheet" type="text/css">        </div>


              </div><!-- /inner-inner -->
	  </div><!-- /inner-wrapper -->
    <div class="corner-bottom"><div class="corner-bottom-right corner"></div><div class="corner-bottom-left corner"></div></div>
  </div><!-- /inner -->
</div><!-- /block -->  </div>
</div>
  </div>
</div>
<div class="panels-flexible-row panels-flexible-row-13-4 clear-block js">
  <div class="inside panels-flexible-row-inside panels-flexible-row-13-4-inside clear-block">
<div class="panels-flexible-region panels-flexible-region-13-js_en_ panels-flexible-region-first ">
  <div class="inside panels-flexible-region-inside panels-flexible-region-13-js_en_-inside panels-flexible-region-inside-first">
  </div>
</div>
<div class="panels-flexible-region panels-flexible-region-13-js ">
  <div class="inside panels-flexible-region-inside panels-flexible-region-13-js-inside">
<div class="panel-pane pane-node ">
  <div class="inner">
    <div class="corner-top"><div class="corner-top-right corner"></div><div class="corner-top-left corner"></div></div>
  	<div class="inner-wrapper">
      <div class="inner-inner">



        <div class="pane-content content">

<div id="node-222" class="node odd full-node node-type-page">
  <div class="inner">

        <h2 class="title"><a href="/content/js-en" title=""></a></h2>



    <div class="content clearfix">
      <script type="text/javascript" src="https://www.cs.helsinki.fi/group/java/k13/ohpe/js/bootstrap.min.js"></script>
<script type="text/javascript" src="https://www.cs.helsinki.fi/group/java/k13/ohpe/javascripts/jquery-1.7.1.min.js"></script>
<script type="text/javascript" src="https://www.cs.helsinki.fi/group/java/materiaali/javascripts/exercises-eng-new.js"></script>
<script type="text/javascript" src="https://www.cs.helsinki.fi/group/java/materiaali/javascripts/common-mooc-eng.js"></script>
<script type="text/javascript" src="https://www.cs.helsinki.fi/group/java/k13/ohpe/javascripts/shjs/sh_main.min.js"></script>
<script type="text/javascript" src="https://www.cs.helsinki.fi/group/java/k13/ohpe/javascripts/shjs/sh_java.min.js"></script>



<script type="text/javascript" src="https://www.cs.helsinki.fi/group/java/k13/ohpe/javascripts/jquery.easing.js"></script>

<div id="toc" class="menu" data-first-chapter-index="1" data-first-exercise-index="1">
          <!-- <span id="materiaali_toc" ></span> -->
          <!--div id="tehtavat_toc" ></div-->
          <!-- <span id="tehtavat_toc2" ></span> -->
        </div>    </div>


      </div><!-- /inner -->

  </div><!-- /node-222 -->
        </div>


              </div><!-- /inner-inner -->
	  </div><!-- /inner-wrapper -->
    <div class="corner-bottom"><div class="corner-bottom-right corner"></div><div class="corner-bottom-left corner"></div></div>
  </div><!-- /inner -->
</div><!-- /block -->  </div>
</div>
<div class="panels-flexible-region panels-flexible-region-13-copyright panels-flexible-region-last float-right">
  <div class="inside panels-flexible-region-inside panels-flexible-region-13-copyright-inside panels-flexible-region-inside-last">
<div class="panel-pane pane-custom pane-1 box ">
  <div class="inner">
    <div class="corner-top"><div class="corner-top-right corner"></div><div class="corner-top-left corner"></div></div>
  	<div class="inner-wrapper">
      <div class="inner-inner">



        <div class="pane-content content">
          <p><a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/2.0/"><img alt="Creative Commons License" style="border-width:0; float:right;" src="http://i.creativecommons.org/l/by-nc-sa/2.0/88x31.png"></a><small>This material is licensed under the Creative Commons BY-NC-SA license, which means that you can use it and distribute it freely so long as you do not erase the names of the original authors. If you do changes in the material and want to distribute this altered version of the material, you have to license it with a similar free license. The use of the material for commercial use is prohibited without a separate agreement.</small></p>        </div>


              </div><!-- /inner-inner -->
	  </div><!-- /inner-wrapper -->
    <div class="corner-bottom"><div class="corner-bottom-right corner"></div><div class="corner-bottom-left corner"></div></div>
  </div><!-- /inner -->
</div><!-- /block --><div class="panel-region-separator"></div><div class="panel-pane pane-content-field pane-field-author course-menu ">
  <div class="inner">
    <div class="corner-top"><div class="corner-top-right corner"></div><div class="corner-top-left corner"></div></div>
  	<div class="inner-wrapper">
      <div class="inner-inner">



        <div class="pane-content content">
          <div class="field field-type-text field-field-author">
    <div class="field-items">
            <div class="field-item odd">
                    Authors: Arto Hellas, Matti Luukkainen        </div>
        </div>
</div>
        </div>


              </div><!-- /inner-inner -->
	  </div><!-- /inner-wrapper -->
    <div class="corner-bottom"><div class="corner-bottom-right corner"></div><div class="corner-bottom-left corner"></div></div>
  </div><!-- /inner -->
</div><!-- /block --><div class="panel-region-separator"></div><div class="panel-pane pane-content-field pane-field-translators course-menu ">
  <div class="inner">
    <div class="corner-top"><div class="corner-top-right corner"></div><div class="corner-top-left corner"></div></div>
  	<div class="inner-wrapper">
      <div class="inner-inner">



        <div class="pane-content content">
          <div class="field field-type-text field-field-translators">
    <div class="field-items">
            <div class="field-item odd">
                    Translators: Simone Romeo, Kenny Heinonen        </div>
        </div>
        <div class="field-item odd"><br>The course is maintained by the Agile Education Research Group</div>
</div>
        </div>


              </div><!-- /inner-inner -->
	  </div><!-- /inner-wrapper -->
    <div class="corner-bottom"><div class="corner-bottom-right corner"></div><div class="corner-bottom-left corner"></div></div>
  </div><!-- /inner -->
</div><!-- /block -->  </div>
</div>
  </div>
</div>
<div class="panels-flexible-row panels-flexible-row-13-8 panels-flexible-row-last clear-block js en">
  <div class="inside panels-flexible-row-inside panels-flexible-row-13-8-inside panels-flexible-row-inside-last clear-block">
<div class="panels-flexible-region panels-flexible-region-13-js_en panels-flexible-region-first panels-flexible-region-last ">
  <div class="inside panels-flexible-region-inside panels-flexible-region-13-js_en-inside panels-flexible-region-inside-first panels-flexible-region-inside-last">
<div class="panel-pane pane-node-content box-mooc ">
  <div class="inner">
    <div class="corner-top"><div class="corner-top-right corner"></div><div class="corner-top-left corner"></div></div>
  	<div class="inner-wrapper">
      <div class="inner-inner">



        <div class="pane-content content">

<div id="node-323" class="node even full-node node-type-weekly_tasks">
  <div class="inner">




    <div class="content clearfix">
      <div class="viikkoraja-mooc" id="Week 10" deadline="unlocks when 85% of week 9 done " data-first-chapter-index="48" data-first-exercise-index="134" data-first-week-index="10" data-first-chapter-index-mooc="49" data-first-exercise-index-mooc="27" data-first-week-index-mooc="10" tekija="Arto Vihavainen, Matti Luukkainen">
<div class="tehtavat">
    <p class="heading" id="e27">Exercise 27: The Finnish Ringing Centre</p>

<p>In the sixth week of Introduction to Programming, we created an observation database for bird watching. Now we continue in the same vein, and this time, we create a program for the ringing centre to track of the places where the rung birds were observed.</p>

<big>
</big><p><strong>ATTENTION:</strong> You may run into a strange error message in this exercise, such as <code>NoSuchMethodError: Bird.equals(BBird;)Z</code>; if this happens, <strong>clean and build</strong>, i.e. press the brush and hammer icon in NetBeans.</p>


<h4>Exercise 27.1: Bird equals and toString</h4>

<p>The Finnish Ringing Centre stores the information about the birds who were watched in a specific year in <code>Bird</code> objects:</p>

<pre class="sh_java sh_sourceCode"><span class="sh_keyword">public</span> <span class="sh_keyword">class</span><span class="sh_normal"> </span><span class="sh_classname">Bird</span> <span class="sh_cbracket">{</span>

    <span class="sh_keyword">private</span> <span class="sh_usertype">String</span><span class="sh_normal"> </span>name<span class="sh_symbol">;</span>
    <span class="sh_keyword">private</span> <span class="sh_usertype">String</span><span class="sh_normal"> </span>latinName<span class="sh_symbol">;</span>
    <span class="sh_keyword">private</span> <span class="sh_type">int</span> ringingYear<span class="sh_symbol">;</span>

    <span class="sh_keyword">public</span> <span class="sh_function">Bird</span><span class="sh_symbol">(</span><span class="sh_usertype">String</span><span class="sh_normal"> </span>name<span class="sh_symbol">,</span> <span class="sh_usertype">String</span><span class="sh_normal"> </span>latinName<span class="sh_symbol">,</span> <span class="sh_type">int</span> ringingYear<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span>
        <span class="sh_keyword">this</span><span class="sh_symbol">.</span>name <span class="sh_symbol">=</span> name<span class="sh_symbol">;</span>
        <span class="sh_keyword">this</span><span class="sh_symbol">.</span>latinName <span class="sh_symbol">=</span> latinName<span class="sh_symbol">;</span>
        <span class="sh_keyword">this</span><span class="sh_symbol">.</span>ringingYear <span class="sh_symbol">=</span> ringingYear<span class="sh_symbol">;</span>
    <span class="sh_cbracket">}</span>

    @Override
    <span class="sh_keyword">public</span> <span class="sh_usertype">String</span><span class="sh_normal"> </span><span class="sh_function">toString</span><span class="sh_symbol">()</span> <span class="sh_cbracket">{</span>
        <span class="sh_keyword">return</span> <span class="sh_keyword">this</span><span class="sh_symbol">.</span>latinName <span class="sh_symbol">+</span> <span class="sh_string">"("</span> <span class="sh_symbol">+</span> <span class="sh_keyword">this</span><span class="sh_symbol">.</span>ringingYear <span class="sh_symbol">+</span> <span class="sh_string">")"</span><span class="sh_symbol">;</span>
    <span class="sh_cbracket">}</span>
<span class="sh_cbracket">}</span>

</pre>

<p>The idea is implementing the funcionality for the ringing centre to track of the places where rung birds were observed and how many times they were. However, observation places and times are not stored in Bird objects, but in a separate HashMap, whose keys are Bird objects. As we remember from Week 2, in such cases we have to implement the methods <code>equals(Object other)</code> and <code>hashCode()</code> in the class <code>Bird</code>.</p>

<p>Some birds have more than one English name (for instance, the Rose Starling is also known as Rose-Coloured Starling or Rose-Coloured Pastor); however, the Latin name is always unique. Create the methods <code>equals</code> and <code>hashCode-</code> in the class <code>Bird</code>; two Bird objects have to be understood as the same bird if their Latin name and observation year are the same.</p>

<p>Example:</p>

<pre>    Bird bird1 = new Bird("Rose Starling", "Sturnus roseus", 2012);
    Bird bird2 = new Bird("Rose-Coloured Starling", "Sturnus roseus", 2012);
    Bird bird3 = new Bird("Hooded Crow", "Corvus corone cornix", 2012);
    Bird bird4 = new Bird("Rose-Coloured Pastor", "Sturnus roseus", 2000);

    System.out.println( bird1.equals(bird2));   // same Latin name and same observation year: they are the same bird
    System.out.println( bird1.equals(bird3));   // different Latin name: they are not the same bird
    System.out.println( bird1.equals(bird4));   // different observation year: not the same bird
    System.out.println( bird1.hashCode()==bird2.hashCode() );
</pre>

<p>Prints:</p>

<pre>true
false
false
true
</pre>

<h4>Exercise 27.2: Ringing Centre</h4>

<p>The Ringing Centre has two methods: <code>public void observe(Bird bird, String place)</code>, which records the observation and its place among the bird information; and <code>public void observations(Bird bird)</code>, which prints all the observations of the parameter bird following the example below. The observation printing order is not important, as far as the tests are concerned.</p>

<p>The Ringing Centre stores the observation places in a <code>Map&lt;Bird, List&lt;String&gt;&gt;</code> object variable. If you need, you can use the exercise from Section 16 as example.</p>

<p>An example of how the Ringing Centre works:</p>

<pre class="sh_java sh_sourceCode">    <span class="sh_usertype">RingingCentre</span><span class="sh_normal"> </span>kumpulaCentre <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">RingingCentre</span><span class="sh_symbol">();</span>

    kumpulaCentre<span class="sh_symbol">.</span><span class="sh_function">observe</span><span class="sh_symbol">(</span> <span class="sh_keyword">new</span> <span class="sh_function">Bird</span><span class="sh_symbol">(</span><span class="sh_string">"Rose Starling"</span><span class="sh_symbol">,</span> <span class="sh_string">"Sturnus roseus"</span><span class="sh_symbol">,</span> <span class="sh_number">2012</span><span class="sh_symbol">),</span> <span class="sh_string">"Arabia"</span> <span class="sh_symbol">);</span>
    kumpulaCentre<span class="sh_symbol">.</span><span class="sh_function">observe</span><span class="sh_symbol">(</span> <span class="sh_keyword">new</span> <span class="sh_function">Bird</span><span class="sh_symbol">(</span><span class="sh_string">"Rose-Coloured Starling"</span><span class="sh_symbol">,</span> <span class="sh_string">"Sturnus roseus"</span><span class="sh_symbol">,</span> <span class="sh_number">2012</span><span class="sh_symbol">),</span> <span class="sh_string">"Vallila"</span> <span class="sh_symbol">);</span>
    kumpulaCentre<span class="sh_symbol">.</span><span class="sh_function">observe</span><span class="sh_symbol">(</span> <span class="sh_keyword">new</span> <span class="sh_function">Bird</span><span class="sh_symbol">(</span><span class="sh_string">"European Herring Gull"</span><span class="sh_symbol">,</span> <span class="sh_string">"Larus argentatus"</span><span class="sh_symbol">,</span> <span class="sh_number">2008</span><span class="sh_symbol">),</span> <span class="sh_string">"Kumpulanmäki"</span> <span class="sh_symbol">);</span>
    kumpulaCentre<span class="sh_symbol">.</span><span class="sh_function">observe</span><span class="sh_symbol">(</span> <span class="sh_keyword">new</span> <span class="sh_function">Bird</span><span class="sh_symbol">(</span><span class="sh_string">"Rose Starling"</span><span class="sh_symbol">,</span> <span class="sh_string">"Sturnus roseus"</span><span class="sh_symbol">,</span> <span class="sh_number">2008</span><span class="sh_symbol">),</span> <span class="sh_string">"Mannerheimintie"</span> <span class="sh_symbol">);</span>

    kumpulaCentre<span class="sh_symbol">.</span><span class="sh_function">observations</span><span class="sh_symbol">(</span> <span class="sh_keyword">new</span> <span class="sh_function">Bird</span><span class="sh_symbol">(</span><span class="sh_string">"Rose-Coloured Starling"</span><span class="sh_symbol">,</span> <span class="sh_string">"Sturnus roseus"</span><span class="sh_symbol">,</span> <span class="sh_number">2012</span> <span class="sh_symbol">)</span> <span class="sh_symbol">);</span>
    System<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">println</span><span class="sh_symbol">(</span><span class="sh_string">"--"</span><span class="sh_symbol">);</span>
    kumpulaCentre<span class="sh_symbol">.</span><span class="sh_function">observations</span><span class="sh_symbol">(</span> <span class="sh_keyword">new</span> <span class="sh_function">Bird</span><span class="sh_symbol">(</span><span class="sh_string">"European Herring Gull"</span><span class="sh_symbol">,</span> <span class="sh_string">"Larus argentatus"</span><span class="sh_symbol">,</span> <span class="sh_number">2008</span> <span class="sh_symbol">)</span> <span class="sh_symbol">);</span>
    System<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">println</span><span class="sh_symbol">(</span><span class="sh_string">"--"</span><span class="sh_symbol">);</span>
    kumpulaCentre<span class="sh_symbol">.</span><span class="sh_function">observations</span><span class="sh_symbol">(</span> <span class="sh_keyword">new</span> <span class="sh_function">Bird</span><span class="sh_symbol">(</span><span class="sh_string">"European Herring Gull"</span><span class="sh_symbol">,</span> <span class="sh_string">"Larus argentatus"</span><span class="sh_symbol">,</span> <span class="sh_number">1980</span> <span class="sh_symbol">)</span> <span class="sh_symbol">);</span>
</pre>

<p>Prints:</p>

<pre>Sturnus roseus (2012) observations: 2
Arabia
Vallila
--
Larus argentatus (2008) observations: 1
Kumpulanmäki
--
Larus argentatus (1980) observations: 0
</pre>


</div>


<h2 id="49"> Object Polymorphism</h2>

    <p>Precedently, we have run into situations where variables had various different types, in addition to their own. For instance, in the section <a href="#45">45</a>, we noticed that <em>all</em> objects are <code>Object</code>-type. If an object is a particular type, we can also represent it as <code>Object</code>-type. For instance, <code><a href="http://docs.oracle.com/javase/6/docs/api/java/lang/String.html" target="_blank">String</a></code> is also <code>Object</code>-type, and all <code>String</code> variables can be defined using <code>Object</code>.</p>

<pre class="sh_java sh_sourceCode">    <span class="sh_usertype">String</span><span class="sh_normal"> </span>string <span class="sh_symbol">=</span> <span class="sh_string">"string"</span><span class="sh_symbol">;</span>
    <span class="sh_usertype">Object</span><span class="sh_normal"> </span>string <span class="sh_symbol">=</span> <span class="sh_string">"another string"</span><span class="sh_symbol">;</span>
</pre>

    <p>It is possible to assign a String to an <code>Object</code>-type reference.</p>

<pre class="sh_java sh_sourceCode">    <span class="sh_usertype">String</span><span class="sh_normal"> </span>string <span class="sh_symbol">=</span> <span class="sh_string">"characterString"</span><span class="sh_symbol">;</span>
    <span class="sh_usertype">Object</span><span class="sh_normal"> </span>string <span class="sh_symbol">=</span> string<span class="sh_symbol">;</span>
</pre>

    <p>The opposite way does not work. Because <code>Object</code>-type variables are not Strings, an Object variable cannot be assigned to a String variable.</p>

<pre class="sh_java sh_sourceCode">    <span class="sh_usertype">Object</span><span class="sh_normal"> </span>string <span class="sh_symbol">=</span> <span class="sh_string">"another string"</span><span class="sh_symbol">;</span>
    <span class="sh_usertype">String</span><span class="sh_normal"> </span>string <span class="sh_symbol">=</span> string<span class="sh_symbol">;</span> <span class="sh_comment">// DOESN'T WORK!</span>
</pre>

    <p>What is the real problem?</p>

    <p>Variables have got their own type, and in addition to it they also have got the type of their parent classes and interfaces. The class <code>String</code> derives from the <code>Object</code> class, and therefore <code>String</code> objects are also <code>Object</code>-type. The class <code>Object</code> does not derive from the class <code>String</code>, and therefore <code>Object</code> variables are not automatically <code>String</code>-type. Let's dig deeper into the <code><a href="http://docs.oracle.com/javase/6/docs/api/java/lang/String.html">String</a></code> class API documentation, expecially the upper part of the HTML page.</p>

    <p><img src="https://www.cs.helsinki.fi/group/java/k13/ohja/img-ohja/perinta/string-api.png"></p>

    <p>The String class API documentation starts with the common heading; this is followed by the class package (<code>java.lang</code>). After the package you find the class name (<code>Class String</code>), and this is followed by the <em>inheritance hierarchy</em>.</p>

<pre><a href="http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html">java.lang.Object</a>
  <img src="https://www.cs.helsinki.fi/group/java/k13/ohja/img-ohja/perinta/perinta.gif"><strong>java.lang.String</strong>
</pre>

    <p>The inheritance hierarchy lists the classes from which a class derives. The inherited classes are listed in hierarchical order, where the class we are analizing is the last one. As far as our String class inheritance hierarchy is concerned, we notice that the <code>String</code> class derives from the class <code>Object</code>. <em>In Java, each class can derive from one class, tops</em>; however, they can inherit features of more than one, undirectly.</p>

    <p>You can think inheritance hierarchy as if it was a list of types, which the object has to implement.</p>

    <p>The fact that all objects are <code>Object</code>-type helps programming. If we only need the features defined in the <code>Object</code> class in our method, we can use <code>Object</code> as method parameter. Because all objects are also Object-type, a method can be given <em>whatever</em> object as parameter. Let's create the method <code>printManyTimes</code>, which receives an <code>Object</code> variable as parameter, and the number of times this must be printed.</p>

<pre class="sh_java sh_sourceCode"><span class="sh_keyword">public</span> <span class="sh_keyword">class</span><span class="sh_normal"> </span><span class="sh_classname">Printer</span> <span class="sh_cbracket">{</span>
    <span class="sh_symbol">...</span>
    <span class="sh_keyword">public</span> <span class="sh_type">void</span> <span class="sh_function">printManyTimes</span><span class="sh_symbol">(</span><span class="sh_usertype">Object</span><span class="sh_normal"> </span>object<span class="sh_symbol">,</span> <span class="sh_type">int</span> times<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span>
        <span class="sh_keyword">for</span> <span class="sh_symbol">(</span><span class="sh_type">int</span> i <span class="sh_symbol">=</span> <span class="sh_number">0</span><span class="sh_symbol">;</span> i <span class="sh_symbol">&lt;</span> times<span class="sh_symbol">;</span> i<span class="sh_symbol">++)</span> <span class="sh_cbracket">{</span>
            System<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">println</span><span class="sh_symbol">(</span>object<span class="sh_symbol">.</span><span class="sh_function">toString</span><span class="sh_symbol">());</span>
        <span class="sh_cbracket">}</span>
    <span class="sh_cbracket">}</span>
    <span class="sh_symbol">...</span>
<span class="sh_cbracket">}</span>
</pre>

    <p>You can give whaterver object parameter to the method <code>printManyTimes</code>. Within the method <code>printManyTimes</code>, the object has only the method which are defined in the <code>Object</code> class at its disposal, because the method is <em>presented</em> as <code>Object</code>-type inside the mehod.</p>

<pre class="sh_java sh_sourceCode">    <span class="sh_usertype">Printer</span><span class="sh_normal"> </span>printer <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">Printer</span><span class="sh_symbol">();</span>

    <span class="sh_usertype">String</span><span class="sh_normal"> </span>string <span class="sh_symbol">=</span> <span class="sh_string">" o "</span><span class="sh_symbol">;</span>
    <span class="sh_usertype">List&lt;String&gt;</span><span class="sh_normal"> </span>words <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> ArrayList<span class="sh_symbol">&lt;</span>String<span class="sh_symbol">&gt;();</span>
    words<span class="sh_symbol">.</span><span class="sh_function">add</span><span class="sh_symbol">(</span><span class="sh_string">"polymorphism"</span><span class="sh_symbol">);</span>
    words<span class="sh_symbol">.</span><span class="sh_function">add</span><span class="sh_symbol">(</span><span class="sh_string">"inheritance"</span><span class="sh_symbol">);</span>
    words<span class="sh_symbol">.</span><span class="sh_function">add</span><span class="sh_symbol">(</span><span class="sh_string">"encapsulation"</span><span class="sh_symbol">);</span>
    words<span class="sh_symbol">.</span><span class="sh_function">add</span><span class="sh_symbol">(</span><span class="sh_string">"abstraction"</span><span class="sh_symbol">);</span>

    printer<span class="sh_symbol">.</span><span class="sh_function">printManyTimes</span><span class="sh_symbol">(</span>string<span class="sh_symbol">,</span> <span class="sh_number">2</span><span class="sh_symbol">);</span>
    printer<span class="sh_symbol">.</span><span class="sh_function">printManyTimes</span><span class="sh_symbol">(</span>words<span class="sh_symbol">,</span> <span class="sh_number">3</span><span class="sh_symbol">);</span>
</pre>

<pre> o
 o
[polymorphism, inheritance, encapsulation, abstraction]
[polymorphism, inheritance, encapsulation, abstraction]
[polymorphism, inheritance, encapsulation, abstraction]
</pre>


    <p>Let's continue with our <code>String</code> class API inspection. In the description, the inheritance hierarchy is followed by a list of the interfaces which the class implements.</p>

<pre><strong>All Implemented Interfaces:</strong>
  <a href="http://docs.oracle.com/javase/6/docs/api/java/io/Serializable.html" title="interface in java.io">Serializable</a>, <a href="http://docs.oracle.com/javase/6/docs/api/java/lang/CharSequence.html" title="interface in java.lang">CharSequence</a>, <a href="http://docs.oracle.com/javase/6/docs/api/java/lang/Comparable.html" title="interface in java.lang">Comparable</a>&lt;<a href="http://docs.oracle.com/javase/6/docs/api/java/lang/String.html" title="class in java.lang">String</a>&gt;
</pre>

    <p>The <code>String</code> class implements the interfaces <code>Serializable</code>, <code>CharSequence</code>, and <code>Comparable&lt;String&gt;</code>. An interface is a type, too. According to the description of the String API, we should be able to set the following interfaces as the type of a String object.</p>

<pre class="sh_java sh_sourceCode">    <span class="sh_usertype">Serializable</span><span class="sh_normal"> </span>serializableString <span class="sh_symbol">=</span> <span class="sh_string">"string"</span><span class="sh_symbol">;</span>
    <span class="sh_usertype">CharSequence</span><span class="sh_normal"> </span>charSequenceString <span class="sh_symbol">=</span> <span class="sh_string">"string"</span><span class="sh_symbol">;</span>
    <span class="sh_usertype">Comparable&lt;String&gt;</span><span class="sh_normal"> </span>comparableString <span class="sh_symbol">=</span> <span class="sh_string">"string"</span><span class="sh_symbol">;</span>
</pre>

    <p>Because we can define the parameter type of a method, we can define methods which would accept an object which implements <em>a specific interface</em>. When we define an interface as method parameter, the parameter can be whatever object which implements such interface, the method does not care about the object actual type.</p>

    <p>Let's implement our <code>Printer</code> class, and create a method to print the characters of the objects which implement the interface <code>CharSequence</code>. The <code>CharSequence</code> interface also provides methods such as <code>int length()</code>, which returns the String's length, and <code>char charAt(int index)</code>, which returns the character at a specific index.</p>

<pre class="sh_java sh_sourceCode"><span class="sh_keyword">public</span> <span class="sh_keyword">class</span><span class="sh_normal"> </span><span class="sh_classname">Printer</span> <span class="sh_cbracket">{</span>
    <span class="sh_symbol">...</span>
    <span class="sh_keyword">public</span> <span class="sh_type">void</span> <span class="sh_function">printManyTimes</span><span class="sh_symbol">(</span><span class="sh_usertype">Object</span><span class="sh_normal"> </span>object<span class="sh_symbol">,</span> <span class="sh_type">int</span> times<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span>
        <span class="sh_keyword">for</span> <span class="sh_symbol">(</span><span class="sh_type">int</span> i <span class="sh_symbol">=</span> <span class="sh_number">0</span><span class="sh_symbol">;</span> i <span class="sh_symbol">&lt;</span> times<span class="sh_symbol">;</span> i<span class="sh_symbol">++)</span> <span class="sh_cbracket">{</span>
            System<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">println</span><span class="sh_symbol">(</span>object<span class="sh_symbol">.</span><span class="sh_function">toString</span><span class="sh_symbol">());</span>
        <span class="sh_cbracket">}</span>
    <span class="sh_cbracket">}</span>

    <span class="sh_keyword">public</span> <span class="sh_type">void</span> <span class="sh_function">printCharacters</span><span class="sh_symbol">(</span><span class="sh_usertype">CharSequence</span><span class="sh_normal"> </span>charSequence<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span>
        <span class="sh_keyword">for</span> <span class="sh_symbol">(</span><span class="sh_type">int</span> i <span class="sh_symbol">=</span> <span class="sh_number">0</span><span class="sh_symbol">;</span> i <span class="sh_symbol">&lt;</span> charSequence<span class="sh_symbol">.</span><span class="sh_function">length</span><span class="sh_symbol">();</span> i<span class="sh_symbol">++)</span> <span class="sh_cbracket">{</span>
            System<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">println</span><span class="sh_symbol">(</span>charSequence<span class="sh_symbol">.</span><span class="sh_function">charAt</span><span class="sh_symbol">(</span>i<span class="sh_symbol">);</span>
        <span class="sh_cbracket">}</span>
    <span class="sh_cbracket">}</span>
    <span class="sh_symbol">...</span>
<span class="sh_cbracket">}</span>
</pre>

    <p>Whatever object which implements the <code>CharSequence</code> interface can be assigned to the method <code>printCharacters</code>. For instance, you can give a <code>String</code> or a <code>StringBuilder</code> which is usually more efficient when it comes to string building. The method <code>printCharacters</code> prints each character of the object in its own line.</p>

<pre class="sh_java sh_sourceCode">    <span class="sh_usertype">Printer</span><span class="sh_normal"> </span>printer <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">Printer</span><span class="sh_symbol">();</span>

    <span class="sh_usertype">String</span><span class="sh_normal"> </span>string <span class="sh_symbol">=</span> <span class="sh_string">"works"</span><span class="sh_symbol">;</span>

    printer<span class="sh_symbol">.</span><span class="sh_function">printCharacters</span><span class="sh_symbol">(</span>string<span class="sh_symbol">);</span>
</pre>

<pre>w
o
r
k
s
</pre>

<div class="tehtavat">
    <p class="heading" id="e28">Exercise 28: Groups</p>
<p>In this exercise, we make organisms and groups of organisms which move around each other. The position of the organisms is reported by using a <em>bidimensional coordinate system</em>. Each position is defined by two numbers, the <code>x</code> and <code>y</code> coordinates. The <code>x</code> coordinate tells us how far from the "point zero" the position is horizontally, whereas the <code>y</code> coordinate tells u how far the position is vertically. If you have got doubts of what a coordinate system is, you can read more information in <a href="http://en.wikipedia.org/wiki/Coordinate_system">Wikipedia</a>, for instance.</p>

<p>Together with the exercise, you find the interface <code>Movable</code>, which represents things that can be moved from one place to another. The interface contains the method <code>void move(int dx, int dy)</code>. The parameter <code>dx</code> tells us how much the object moves on the x axis and <code>dy</code> tells us about the movement on the y axis.</p>

<p>Implement the classes <code>Organism</code> and <code>Group</code>, which are both movable. Implement all the functionality inside the package <code>movable</code>.</p>

<h4>Exercise 28.1: Implementing Organism</h4>

<p>Create the class <code>Organism</code> in the package <code>movable</code>; let Organism implement the interface <code>Movable</code>. Organisms have to know their own position (x and y coordinates). The API of <code>Organism</code> has to be the following:</p>

  <ul><li>the constructor <strong>public Organism(int x, int y)</strong><br>; it receives the x and y initial coordinates of the object</li>
    <li><strong>public String toString()</strong><br>; it creates and returns a string which represents the object. The form should be the following <code>"x: 3; y: 6"</code>. Note that the coordinates are separated by a semicolon (<code>;</code>)</li>
    <li><strong>public void move(int dx, int dy)</strong><br>; it moves the object as much as it is specified by the arguments. The variable <code>dx</code> contains the x coordinate of the movement, whereas <code>dy</code> contains the y coordinate of the movement. For instance, if the value of the variable <code>dx</code> is 5, the object variable <code>x</code> has to be increased by five</li>
  </ul><p>Try our the functionality of <code>Organism</code> using the following code.</p>

<pre class="sh_java sh_sourceCode">     <span class="sh_usertype">Organism</span><span class="sh_normal"> </span>organism <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">Organism</span><span class="sh_symbol">(</span><span class="sh_number">20</span><span class="sh_symbol">,</span> <span class="sh_number">30</span><span class="sh_symbol">);</span>
     System<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">println</span><span class="sh_symbol">(</span>organism<span class="sh_symbol">);</span>
     organism<span class="sh_symbol">.</span><span class="sh_function">move</span><span class="sh_symbol">(-</span><span class="sh_number">10</span><span class="sh_symbol">,</span> <span class="sh_number">5</span><span class="sh_symbol">);</span>
     System<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">println</span><span class="sh_symbol">(</span>organism<span class="sh_symbol">);</span>
     organism<span class="sh_symbol">.</span><span class="sh_function">move</span><span class="sh_symbol">(</span><span class="sh_number">50</span><span class="sh_symbol">,</span> <span class="sh_number">20</span><span class="sh_symbol">);</span>
     System<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">println</span><span class="sh_symbol">(</span>organism<span class="sh_symbol">);</span>
</pre>

<pre>x: 20; y: 30
x: 10; y: 35
x: 60; y: 55
</pre>

<h4>Exercise 28.2: Implementing Group</h4>

<p>Create the class <code>Group</code> in the package <code>movable</code>; Group implements the interface <code>Movable</code>. The Group is made of various different objects which implement the interface <code>Movable</code>, and they have to be stored into a list construction, for instance.</p>

<p>The class <code>Group</code> should have the following API.</p>

  <ul><li><strong>public String toString()</strong><br>; it returns a string which describes the position of the group organisms, each organism is printed in its own line.</li>
    <li><strong>public void addToGroup(Movable movable)</strong><br>; it adds a new objects which implements the interface <code>Movable</code> to the group.</li>
    <li><strong>public void move(int dx, int dy)</strong><br>; it moves a group as much as it is defined by the arguments. Note that you will have to move each group organism.</li>
  </ul><p>Try out your program functionality with the following code.</p>

<pre class="sh_java sh_sourceCode">    <span class="sh_usertype">Group</span><span class="sh_normal"> </span>group <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">Group</span><span class="sh_symbol">();</span>
    group<span class="sh_symbol">.</span><span class="sh_function">addToGroup</span><span class="sh_symbol">(</span><span class="sh_keyword">new</span> <span class="sh_function">Organism</span><span class="sh_symbol">(</span><span class="sh_number">73</span><span class="sh_symbol">,</span> <span class="sh_number">56</span><span class="sh_symbol">));</span>
    group<span class="sh_symbol">.</span><span class="sh_function">addToGroup</span><span class="sh_symbol">(</span><span class="sh_keyword">new</span> <span class="sh_function">Organism</span><span class="sh_symbol">(</span><span class="sh_number">57</span><span class="sh_symbol">,</span> <span class="sh_number">66</span><span class="sh_symbol">));</span>
    group<span class="sh_symbol">.</span><span class="sh_function">addToGroup</span><span class="sh_symbol">(</span><span class="sh_keyword">new</span> <span class="sh_function">Organism</span><span class="sh_symbol">(</span><span class="sh_number">46</span><span class="sh_symbol">,</span> <span class="sh_number">52</span><span class="sh_symbol">));</span>
    group<span class="sh_symbol">.</span><span class="sh_function">addToGroup</span><span class="sh_symbol">(</span><span class="sh_keyword">new</span> <span class="sh_function">Organism</span><span class="sh_symbol">(</span><span class="sh_number">19</span><span class="sh_symbol">,</span> <span class="sh_number">107</span><span class="sh_symbol">));</span>
    System<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">println</span><span class="sh_symbol">(</span>group<span class="sh_symbol">);</span>
</pre>

<pre>x: 73; y: 56
x: 57; y: 66
x: 46; y: 52
x: 19; y: 107
</pre>
</div>

<h2 id="50"> Inheritance of Class Features</h2>

    <p>Classes are for the programmer a way to clarify problematic concepts. With each class we create, we add new functionality to the programming language. The functionality is needed to solve the problems we meet, and the solutions are born from the interaction among the objects we create. In object programming, an object is an independent unity which can change through its methods. Objects are used together with each other; each object has its own area of responsibility. For instance, our user interface classes have been making use of <code>Scanner</code> objects, so far.</p>

    <p>Each Java's class descends from the class <code>Object</code>, which means that each class we create has all methods which are defined in <code>Object</code>. If we want to change the functionality of the methods defined in <code>Object</code>, we have to <code>Override</code> them and define a new functionality in the created class.</p>

<p>In addition to be possible to inherit the <code>Object</code> class, it is also possible to inherit other classes. If we check Java's <code><a href="http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html" target="_blank">ArrayList</a></code> class API we notice that <code>ArrayList</code> inherits the class <code>AbstractList</code>. The class <code>AbstractList</code> inherits the class <code>AbstractCollection</code>, which descended from the class <code>Object</code>.</p>

<pre><a href="http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html" target="_blank">java.lang.Object</a>
  <img src="https://www.cs.helsinki.fi/group/java/k13/ohja/img-ohja/perinta/perinta.gif"><a href="http://docs.oracle.com/javase/6/docs/api/java/util/AbstractCollection.html" target="_blank">java.util.AbstractCollection</a>&lt;E&gt;
      <img src="https://www.cs.helsinki.fi/group/java/k13/ohja/img-ohja/perinta/perinta.gif"><a href="http://docs.oracle.com/javase/6/docs/api/java/AbstractList.html" target="_blank">java.util.AbstractList</a>&lt;E&gt;
          <img src="https://www.cs.helsinki.fi/group/java/k13/ohja/img-ohja/perinta/perinta.gif"><strong>java.util.ArrayList&lt;E&gt;</strong>
</pre>

        <p>Each class can inherit one class, directly, Indirectly, a class can still inherit all the feauters its parent class. The class <code>ArrayList</code> inherits directly the class <code>AbstractList</code>, and indirectly the classes <code>AbstractCollection</code> and <code>Object</code>. In fact, the class <code>ArrayList</code> has the methods <em>and</em> interfaces of <code>AbstractList</code>, <code>AbstractCollection</code> and <code>Object</code> at its disposal.</p>

        <p>The class features are inherited using the keyword <code>extends</code>. The class which inherits is called <em>subclass</em>; the class which is inherited is called <em>superclass</em>. Let's get aquainted with a carmaker system, which handles car components. The basic component of component handling is the class <code>Component</code> which defines the identification number, the producer, and the description.</p>

<pre class="sh_java sh_sourceCode"><span class="sh_keyword">public</span> <span class="sh_keyword">class</span><span class="sh_normal"> </span><span class="sh_classname">Component</span> <span class="sh_cbracket">{</span>

    <span class="sh_keyword">private</span> <span class="sh_usertype">String</span><span class="sh_normal"> </span>id<span class="sh_symbol">;</span>
    <span class="sh_keyword">private</span> <span class="sh_usertype">String</span><span class="sh_normal"> </span>producer<span class="sh_symbol">;</span>
    <span class="sh_keyword">private</span> <span class="sh_usertype">String</span><span class="sh_normal"> </span>description<span class="sh_symbol">;</span>

    <span class="sh_keyword">public</span> <span class="sh_function">Component</span><span class="sh_symbol">(</span><span class="sh_usertype">String</span><span class="sh_normal"> </span>id<span class="sh_symbol">,</span> <span class="sh_usertype">String</span><span class="sh_normal"> </span>producer<span class="sh_symbol">,</span> <span class="sh_usertype">String</span><span class="sh_normal"> </span>description<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span>
        <span class="sh_keyword">this</span><span class="sh_symbol">.</span>id <span class="sh_symbol">=</span> id<span class="sh_symbol">;</span>
        <span class="sh_keyword">this</span><span class="sh_symbol">.</span>producer <span class="sh_symbol">=</span> producer<span class="sh_symbol">;</span>
        <span class="sh_keyword">this</span><span class="sh_symbol">.</span>description <span class="sh_symbol">=</span> description<span class="sh_symbol">;</span>
    <span class="sh_cbracket">}</span>

    <span class="sh_keyword">public</span> <span class="sh_usertype">String</span><span class="sh_normal"> </span><span class="sh_function">getId</span><span class="sh_symbol">()</span> <span class="sh_cbracket">{</span>
        <span class="sh_keyword">return</span> id<span class="sh_symbol">;</span>
    <span class="sh_cbracket">}</span>

    <span class="sh_keyword">public</span> <span class="sh_usertype">String</span><span class="sh_normal"> </span><span class="sh_function">getDescription</span><span class="sh_symbol">()</span> <span class="sh_cbracket">{</span>
        <span class="sh_keyword">return</span> description<span class="sh_symbol">;</span>
    <span class="sh_cbracket">}</span>

    <span class="sh_keyword">public</span> <span class="sh_usertype">String</span><span class="sh_normal"> </span><span class="sh_function">getProducer</span><span class="sh_symbol">()</span> <span class="sh_cbracket">{</span>
        <span class="sh_keyword">return</span> producer<span class="sh_symbol">;</span>
    <span class="sh_cbracket">}</span>
<span class="sh_cbracket">}</span>
</pre>

        <p>One car component is its motor. As for all the other components, the motor has also got a producer, an identification number, and a description. In addition, a motor has also got a type: for instance, combustion engine, electric motor, or hybrid. Let's create the class <code>Motor</code> which inherits <code>Component</code>: a motor is a particular case of component.</p>

<pre class="sh_java sh_sourceCode"><span class="sh_keyword">public</span> <span class="sh_keyword">class</span><span class="sh_normal"> </span><span class="sh_classname">Motor</span> <span class="sh_keyword">extends</span> Component <span class="sh_cbracket">{</span>

    <span class="sh_keyword">private</span> <span class="sh_usertype">String</span><span class="sh_normal"> </span>motorType<span class="sh_symbol">;</span>

    <span class="sh_keyword">public</span> <span class="sh_function">Motor</span><span class="sh_symbol">(</span><span class="sh_usertype">String</span><span class="sh_normal"> </span>motorType<span class="sh_symbol">,</span> <span class="sh_usertype">String</span><span class="sh_normal"> </span>id<span class="sh_symbol">,</span> <span class="sh_usertype">String</span><span class="sh_normal"> </span>producer<span class="sh_symbol">,</span> <span class="sh_usertype">String</span><span class="sh_normal"> </span>description<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span>
        <span class="sh_keyword">super</span><span class="sh_symbol">(</span>id<span class="sh_symbol">,</span> producer<span class="sh_symbol">,</span> description<span class="sh_symbol">);</span>
        <span class="sh_keyword">this</span><span class="sh_symbol">.</span>motorType <span class="sh_symbol">=</span> motorType<span class="sh_symbol">;</span>
    <span class="sh_cbracket">}</span>

    <span class="sh_keyword">public</span> <span class="sh_usertype">String</span><span class="sh_normal"> </span><span class="sh_function">getMotorType</span><span class="sh_symbol">()</span> <span class="sh_cbracket">{</span>
        <span class="sh_keyword">return</span> motorType<span class="sh_symbol">;</span>
    <span class="sh_cbracket">}</span>
<span class="sh_cbracket">}</span>
</pre>

        <p>The class definition <code>public class Motor extends Component</code> tells us that the class <code>Motor</code> inherits the functionality of <code>Component</code>. In the class <code>Motor</code>, we define the object variable <code>motorType</code>.</p>

        <p>The Motor class constructor is interesting. In the first line of the constructor we notice the keyword <code>super</code>, which is used to call the superclass constructor. The call <code>super(id,producer,description)</code> class the constructor <code>public Component(String id, String producer, String description)</code> which is defined in the class <code>Component</code>; in this way the superclass object variables are assigned a value. After doing this, we assign a value to the object variable <code>motorType</code>.</p>

        <p>When the class <code>Motor</code> inherits the class <code>Component</code>, in receives all the methods provides by <code>Component</code>. It is possible to create an instance of the class <code>Motor</code> as it is for any other class.</p>

<pre class="sh_java sh_sourceCode">        <span class="sh_usertype">Motor</span><span class="sh_normal"> </span>motor <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">Motor</span><span class="sh_symbol">(</span><span class="sh_string">"combustion engine"</span><span class="sh_symbol">,</span> <span class="sh_string">"hz"</span><span class="sh_symbol">,</span> <span class="sh_string">"volkswagen"</span><span class="sh_symbol">,</span> <span class="sh_string">"VW GOLF 1L 86-91"</span><span class="sh_symbol">);</span>
        System<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">println</span><span class="sh_symbol">(</span>motor<span class="sh_symbol">.</span><span class="sh_function">getMotorType</span><span class="sh_symbol">());</span>
        System<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">println</span><span class="sh_symbol">(</span>motor<span class="sh_symbol">.</span><span class="sh_function">getProducer</span><span class="sh_symbol">());</span>
</pre>

<pre>combustion engine
volkswagen
</pre>

        <p>As you notice, the class <code>Motor</code> has the methods defined in <code>Component</code> at its disposal.</p>

        <h3> Private, Protected and Public</h3>

<p>If a method or a variable have got the <code>private</code> field accessibility, it can not be seen by its subclasses, and its subclasses do not have any straight way to access it. In the previous example Motor can't access directly the attributes defined in its superclass Component (id, producer, description). The subclass see naturally everything which has been defined <code>public</code> in its super class. If we want to define superclass variables or methods whose accessibility should be restricted to only its subclasses, we can use the <code>protected</code> field accessability.</p>

        <h3> Superclass</h3>

        <p>The superclass constructor is defined by the <code>super</code> keyword. In fact, the call <code>super</code> is similar to the <code>this</code> constructor call. The call is given the values of the type required by the super class constructor parameter.</p>

        <p>When we call the constructor, the variables defined in the super class are initialized. In fact, with constructor call happens the same thing as in normal constructor calls. Unless the superclass has a constructor without parameter, in the subclass constructor call there must always be a call for its superclass constructor.</p>

        <p>Attention! The <code>super</code> call must always be in the first line!</p>

<h3> Calling the Superclass Methods</h3>

        <p>The method defined in the superclass can always be called using the <code>super</code> prefix, in the same way we call the methods defined in this class through the <code>this</code> prefix. For instance, we can make use of a method which overrives the superclass <code>toString</code> method in the following way:</p>

<pre class="sh_java sh_sourceCode">    @Override
    <span class="sh_keyword">public</span> <span class="sh_usertype">String</span><span class="sh_normal"> </span><span class="sh_function">toString</span><span class="sh_symbol">()</span> <span class="sh_cbracket">{</span>
        <span class="sh_keyword">return</span> <span class="sh_keyword">super</span><span class="sh_symbol">.</span><span class="sh_function">toString</span><span class="sh_symbol">()</span> <span class="sh_symbol">+</span> <span class="sh_string">"</span><span class="sh_specialchar">\n</span><span class="sh_string">  And my personal message again!"</span><span class="sh_symbol">;</span>
    <span class="sh_cbracket">}</span>
</pre>

<div class="tehtavat">
    <p class="heading" id="e29">Exercise 29: Person and their Heirs</p>

  <h4 class="req">Exercise 29.1: Person</h4>

  <p>Create the package <code>people</code> and the class <code>Person</code> in it; Person works in relation to the following main program:</p>

<pre class="sh_java sh_sourceCode">    <span class="sh_keyword">public</span> <span class="sh_keyword">static</span> <span class="sh_type">void</span> <span class="sh_function">main</span><span class="sh_symbol">(</span>String<span class="sh_symbol">[]</span> args<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span>
        <span class="sh_usertype">Person</span><span class="sh_normal"> </span>pekka <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">Person</span><span class="sh_symbol">(</span><span class="sh_string">"Pekka Mikkola"</span><span class="sh_symbol">,</span> <span class="sh_string">"Korsontie Street 1 03100 Vantaa"</span><span class="sh_symbol">);</span>
        <span class="sh_usertype">Person</span><span class="sh_normal"> </span>esko <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">Person</span><span class="sh_symbol">(</span><span class="sh_string">"Esko Ukkonen"</span><span class="sh_symbol">,</span> <span class="sh_string">"Mannerheimintie Street 15 00100 Helsinki"</span><span class="sh_symbol">);</span>
        System<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">println</span><span class="sh_symbol">(</span>pekka<span class="sh_symbol">);</span>
        System<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">println</span><span class="sh_symbol">(</span>esko<span class="sh_symbol">);</span>
    <span class="sh_cbracket">}</span>
</pre>

  <p>Printing</p>

<pre>Pekka Mikkola
  Korsontie Street 1 03100 Vantaa
Esko Ukkonen
  Mannerheimintie Street 15 00100 Helsinki
</pre>

<h4 class="req">Exercise 29.2: Student</h4>

  <p>Create the class <code>Student</code> which <i>inherits</i> the class <code>Person</code>.

  </p><p>Students have 0 credits, at the beginning. As long as a student studies, their credits grow. Create the class, in relation to the following main program:</p>

<pre class="sh_java sh_sourceCode">    <span class="sh_keyword">public</span> <span class="sh_keyword">static</span> <span class="sh_type">void</span> <span class="sh_function">main</span><span class="sh_symbol">(</span>String<span class="sh_symbol">[]</span> args<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span>
        <span class="sh_usertype">Student</span><span class="sh_normal"> </span>olli <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">Student</span><span class="sh_symbol">(</span><span class="sh_string">"Olli"</span><span class="sh_symbol">,</span> <span class="sh_string">"Ida Albergintie Street 1 00400 Helsinki"</span><span class="sh_symbol">);</span>
        System<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">println</span><span class="sh_symbol">(</span>olli<span class="sh_symbol">);</span>
        System<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">println</span><span class="sh_symbol">(</span><span class="sh_string">"credits "</span> <span class="sh_symbol">+</span> olli<span class="sh_symbol">.</span><span class="sh_function">credits</span><span class="sh_symbol">());</span>
        olli<span class="sh_symbol">.</span><span class="sh_function">study</span><span class="sh_symbol">();</span>
        System<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">println</span><span class="sh_symbol">(</span><span class="sh_string">"credits "</span><span class="sh_symbol">+</span> olli<span class="sh_symbol">.</span><span class="sh_function">credits</span><span class="sh_symbol">());</span>
    <span class="sh_cbracket">}</span>
</pre>

  <p>Prints:</p>

<pre>Olli
  Ida Albergintie Street 1 00400 Helsinki
credits 0
credits 1
</pre>

<h4 class="req">Exercise 29.3: toString for Studets</h4>

  <p>The <code>Student</code> in the previous exercise inherits their toString method from the class <code>Person</code>. Inherited methods can also be overwritten, that is to say replaced with another version. Create now an own version of the toString method for <code>Student</code>; the method has to work as shown below:</p>

<pre class="sh_java sh_sourceCode">    <span class="sh_keyword">public</span> <span class="sh_keyword">static</span> <span class="sh_type">void</span> <span class="sh_function">main</span><span class="sh_symbol">(</span>String<span class="sh_symbol">[]</span> args<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span>
        <span class="sh_usertype">Student</span><span class="sh_normal"> </span>olli <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">Student</span><span class="sh_symbol">(</span><span class="sh_string">"Olli"</span><span class="sh_symbol">,</span> <span class="sh_string">"Ida Albergintie Street 1 00400 Helsinki"</span><span class="sh_symbol">);</span>
        System<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">println</span><span class="sh_symbol">(</span> olli <span class="sh_symbol">);</span>
        olli<span class="sh_symbol">.</span><span class="sh_function">study</span><span class="sh_symbol">();</span>
        System<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">println</span><span class="sh_symbol">(</span> olli <span class="sh_symbol">);</span>
    <span class="sh_cbracket">}</span>
</pre>

  <p>Prints:</p>

<pre>Olli
  Ida Albergintie Street 1 00400 Helsinki
  credits 0
Olli
  Ida Albergintie Street 1 00400 Helsinki
  credits 1
</pre>

  <h4 class="req">Exercise 29.4: Teacher</h4>

  <p>Create the class <code>Teacher</code> in the same package. Teacher inherits <code>Person</code>, but they also have a salary, which together with the teacher information in String form.</p>

  <p>Check whether the following main program generates the prinout below</p>

<pre class="sh_java sh_sourceCode">    <span class="sh_keyword">public</span> <span class="sh_keyword">static</span> <span class="sh_type">void</span> <span class="sh_function">main</span><span class="sh_symbol">(</span>String<span class="sh_symbol">[]</span> args<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span>
        <span class="sh_usertype">Teacher</span><span class="sh_normal"> </span>pekka <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">Teacher</span><span class="sh_symbol">(</span><span class="sh_string">"Pekka Mikkola"</span><span class="sh_symbol">,</span> <span class="sh_string">"Korsontie Street 1 03100 Vantaa"</span><span class="sh_symbol">,</span> <span class="sh_number">1200</span><span class="sh_symbol">);</span>
        <span class="sh_usertype">Teacher</span><span class="sh_normal"> </span>esko <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">Teacher</span><span class="sh_symbol">(</span><span class="sh_string">"Esko Ukkonen"</span><span class="sh_symbol">,</span> <span class="sh_string">"Mannerheimintie 15 Street 00100 Helsinki"</span><span class="sh_symbol">,</span> <span class="sh_number">5400</span><span class="sh_symbol">);</span>
        System<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">println</span><span class="sh_symbol">(</span> pekka <span class="sh_symbol">);</span>
        System<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">println</span><span class="sh_symbol">(</span> esko <span class="sh_symbol">);</span>

        <span class="sh_usertype">Student</span><span class="sh_normal"> </span>olli <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">Student</span><span class="sh_symbol">(</span><span class="sh_string">"Olli"</span><span class="sh_symbol">,</span> <span class="sh_string">"Ida Albergintie 1 Street 00400 Helsinki"</span><span class="sh_symbol">);</span>
        <span class="sh_keyword">for</span> <span class="sh_symbol">(</span> <span class="sh_type">int</span> i<span class="sh_symbol">=</span><span class="sh_number">0</span><span class="sh_symbol">;</span> i <span class="sh_symbol">&lt;</span> <span class="sh_number">25</span><span class="sh_symbol">;</span> i<span class="sh_symbol">++</span> <span class="sh_symbol">)</span> <span class="sh_cbracket">{</span>
            olli<span class="sh_symbol">.</span><span class="sh_function">study</span><span class="sh_symbol">();</span>
        <span class="sh_cbracket">}</span>
        System<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">println</span><span class="sh_symbol">(</span> olli <span class="sh_symbol">);</span>
    <span class="sh_cbracket">}</span>
</pre>

  <p>Printing</p>

<pre>Pekka Mikkola
  Korsontie Street 1 03100 Vantaa
  salary 1200 euros/month
Esko Ukkonen
  Mannerheimintie Street 15 00100 Helsinki
  salary 5400 euros/month
Olli
  Ida Albergintie Street 1 00400 Helsinki
  credits 25
</pre>

<h4 class="req">Exercise 29.5: Everyone in a List</h4>

  <p>Implement the method <code>public static void printDepartment(List&lt;Person&gt; people)</code> in the <code>Main</code> class, default package. The method prints all the people in the parameter list. When the <code>main</code> method is called, printDepartment should work in the following way.</p>

<pre class="sh_java sh_sourceCode">    <span class="sh_keyword">public</span> <span class="sh_keyword">static</span> <span class="sh_type">void</span> <span class="sh_function">printDepartment</span><span class="sh_symbol">(</span><span class="sh_usertype">List&lt;Person&gt;</span><span class="sh_normal"> </span>people<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span>
       <span class="sh_comment">// we print all the people in the department</span>
    <span class="sh_cbracket">}</span>

    <span class="sh_keyword">public</span> <span class="sh_keyword">static</span> <span class="sh_type">void</span> <span class="sh_function">main</span><span class="sh_symbol">(</span>String<span class="sh_symbol">[]</span> args<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span>
        <span class="sh_usertype">List&lt;Person&gt;</span><span class="sh_normal"> </span>people <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> ArrayList<span class="sh_symbol">&lt;</span>Person<span class="sh_symbol">&gt;();</span>
        people<span class="sh_symbol">.</span><span class="sh_function">add</span><span class="sh_symbol">(</span> <span class="sh_keyword">new</span> <span class="sh_function">Teacher</span><span class="sh_symbol">(</span><span class="sh_string">"Pekka Mikkola"</span><span class="sh_symbol">,</span> <span class="sh_string">"Korsontie Street 1 03100 Vantaa"</span><span class="sh_symbol">,</span> <span class="sh_number">1200</span><span class="sh_symbol">)</span> <span class="sh_symbol">);</span>
        people<span class="sh_symbol">.</span><span class="sh_function">add</span><span class="sh_symbol">(</span> <span class="sh_keyword">new</span> <span class="sh_function">Student</span><span class="sh_symbol">(</span><span class="sh_string">"Olli"</span><span class="sh_symbol">,</span> <span class="sh_string">"Ida Albergintie Street 1 00400 Helsinki"</span><span class="sh_symbol">)</span> <span class="sh_symbol">);</span>

        <span class="sh_function">printDepartment</span><span class="sh_symbol">(</span>people<span class="sh_symbol">);</span>
    <span class="sh_cbracket">}</span>
</pre>

<pre>Pekka Mikkola
  Korsontie Street 1 03100 Vantaa
  salary 1200 euros/month
Olli
  Ida Albergintie Street 1 00400 Helsinki
  credits 0
</pre>

</div>

   <h3> The Object Type defines the Called Method: Polymorphism</h3>
<!-- WTF -->
    <p>The method which can be called is defined through the variable type. For instance, if a <code>Student</code> object reference is saved into a <code>Person</code> variable, the object can use only the methods defined in the <code>Person</code> class:</p>

<pre class="sh_java sh_sourceCode">   <span class="sh_usertype">Person</span><span class="sh_normal"> </span>olli <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">Student</span><span class="sh_symbol">(</span><span class="sh_string">"Olli"</span><span class="sh_symbol">,</span> <span class="sh_string">"Ida Albergintie Street 1 00400 Helsinki"</span><span class="sh_symbol">);</span>
   olli<span class="sh_symbol">.</span><span class="sh_function">credits</span><span class="sh_symbol">();</span>        <span class="sh_comment">// NOT WORKING!</span>
   olli<span class="sh_symbol">.</span><span class="sh_function">study</span><span class="sh_symbol">();</span>              <span class="sh_comment">// NOT WORKING!</span>
   String<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">println</span><span class="sh_symbol">(</span> olli <span class="sh_symbol">);</span>   <span class="sh_comment">// olli.toString() IT WORKS!</span>
</pre>

<p>If the object has many different types, it has available the methods defined by <em>all</em> types. For instance, a <code>Student</code> object has available the methods defined both in the class <code>Person</code> and in <code>Object</code>.</p>

<p>In the previous exercise, we were in the class <code>Student</code> and we replaced the <code>toString</code> method inherited from <code>Person</code> with a new version of it. Suppose we are using an object throw a type which is not its real, what version of the object method would we call, then? For instance, below there are two students whose references are saved into a Person and an Object variables. We call the <code>toString</code> method of both. What version of the method is executed: the one defined in Object, in Person, or in Student?</p>

<pre class="sh_java sh_sourceCode">   <span class="sh_usertype">Person</span><span class="sh_normal"> </span>olli <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">Student</span><span class="sh_symbol">(</span><span class="sh_string">"Olli"</span><span class="sh_symbol">,</span> <span class="sh_string">"Ida Albergintie Street 1 00400 Helsinki"</span><span class="sh_symbol">);</span>
   String<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">println</span><span class="sh_symbol">(</span> olli <span class="sh_symbol">);</span>

   <span class="sh_usertype">Object</span><span class="sh_normal"> </span>liisa <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">Student</span><span class="sh_symbol">(</span><span class="sh_string">"Liisa"</span><span class="sh_symbol">,</span> <span class="sh_string">"Väinö Auerin Street 20 00500 Helsinki"</span><span class="sh_symbol">);</span>
   String<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">println</span><span class="sh_symbol">(</span> liisa <span class="sh_symbol">);</span>
</pre>

<p>Printing:</p>

<pre>Olli
  Ida Albergintie Street 1 00400 Helsinki
  credits 0
Liisa
  Väinö Auerin Street 20 00500 Helsinki
  credits 0
</pre>

<p>As you see, the execution method is chosen based on its real type, that is the type of the variable which saved the reference!</p>

    <p>More generally: <b>The execution method is always chosen based on the object real type, regardless of the variable type which is used. Objects are diverse, which means they can be used through different variable types. The execution method does always depend of the object actual type.</b> This diversity is called polymorphysm.</p>

<h3> Another Example: Points</h3>

<p>A point laying in a bidimensional coordinate system can be represented with the help of the following class:</p>

<pre class="sh_java sh_sourceCode"><span class="sh_keyword">public</span> <span class="sh_keyword">class</span><span class="sh_normal"> </span><span class="sh_classname">Point</span> <span class="sh_cbracket">{</span>

    <span class="sh_keyword">private</span> <span class="sh_type">int</span> x<span class="sh_symbol">;</span>
    <span class="sh_keyword">private</span> <span class="sh_type">int</span> y<span class="sh_symbol">;</span>

    <span class="sh_keyword">public</span> <span class="sh_function">Point</span><span class="sh_symbol">(</span><span class="sh_type">int</span> x<span class="sh_symbol">,</span> <span class="sh_type">int</span> y<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span>
        <span class="sh_keyword">this</span><span class="sh_symbol">.</span>x <span class="sh_symbol">=</span> x<span class="sh_symbol">;</span>
        <span class="sh_keyword">this</span><span class="sh_symbol">.</span>y <span class="sh_symbol">=</span> y<span class="sh_symbol">;</span>
    <span class="sh_cbracket">}</span>

    <span class="sh_keyword">public</span> <span class="sh_type">int</span> <span class="sh_function">manhattanDistanceFromOrigin</span><span class="sh_symbol">()</span><span class="sh_cbracket">{</span>
        <span class="sh_keyword">return</span> Math<span class="sh_symbol">.</span><span class="sh_function">abs</span><span class="sh_symbol">(</span>x<span class="sh_symbol">)+</span>Math<span class="sh_symbol">.</span><span class="sh_function">abs</span><span class="sh_symbol">(</span>y<span class="sh_symbol">);</span>
    <span class="sh_cbracket">}</span>

    <span class="sh_keyword">protected</span> <span class="sh_usertype">String</span><span class="sh_normal"> </span><span class="sh_function">location</span><span class="sh_symbol">()</span><span class="sh_cbracket">{</span>
        <span class="sh_keyword">return</span> x <span class="sh_symbol">+</span> <span class="sh_string">", "</span> <span class="sh_symbol">+</span> y<span class="sh_symbol">;</span>
    <span class="sh_cbracket">}</span>

    @Override
    <span class="sh_keyword">public</span> <span class="sh_usertype">String</span><span class="sh_normal"> </span><span class="sh_function">toString</span><span class="sh_symbol">()</span> <span class="sh_cbracket">{</span>
        <span class="sh_keyword">return</span> <span class="sh_string">"("</span><span class="sh_symbol">+</span><span class="sh_keyword">this</span><span class="sh_symbol">.</span><span class="sh_function">location</span><span class="sh_symbol">()+</span><span class="sh_string">") distance "</span><span class="sh_symbol">+</span><span class="sh_keyword">this</span><span class="sh_symbol">.</span><span class="sh_function">manhattanDistanceFromOrigin</span><span class="sh_symbol">();</span>
    <span class="sh_cbracket">}</span>
<span class="sh_cbracket">}</span>
</pre>

<p>The <code>location</code> method is not supposed to be used outside its class, and its accessability field is protected, which means only subclasses can access it. For instance, if we use a <a href="http://wiki.gamegardens.com/Path_Finding_Tutorial">path fiding algorithm</a>, the <a href="http://en.wiktionary.org/wiki/Manhattan_distance">Manhattan distance</a> is the distance of two points moving on a strictly horizontal and/or vertical path, along the coordinate system lines.</p>

<p>A coloured point is similar to a point, except that it contains a string which tells us its colour. The class can be created by inheriting Point:</p>

<pre class="sh_java sh_sourceCode"><span class="sh_keyword">public</span> <span class="sh_keyword">class</span><span class="sh_normal"> </span><span class="sh_classname">ColouredPoint</span> <span class="sh_keyword">extends</span> Point <span class="sh_cbracket">{</span>

    <span class="sh_keyword">private</span> <span class="sh_usertype">String</span><span class="sh_normal"> </span>colour<span class="sh_symbol">;</span>

    <span class="sh_keyword">public</span> <span class="sh_function">ColouredPoint</span><span class="sh_symbol">(</span><span class="sh_type">int</span> x<span class="sh_symbol">,</span> <span class="sh_type">int</span> y<span class="sh_symbol">,</span> <span class="sh_usertype">String</span><span class="sh_normal"> </span>colour<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span>
        <span class="sh_keyword">super</span><span class="sh_symbol">(</span>x<span class="sh_symbol">,</span> y<span class="sh_symbol">);</span>
        <span class="sh_keyword">this</span><span class="sh_symbol">.</span>colour <span class="sh_symbol">=</span> colour<span class="sh_symbol">;</span>
    <span class="sh_cbracket">}</span>

    @Override
    <span class="sh_keyword">public</span> <span class="sh_usertype">String</span><span class="sh_normal"> </span><span class="sh_function">toString</span><span class="sh_symbol">()</span> <span class="sh_cbracket">{</span>
        <span class="sh_keyword">return</span> <span class="sh_keyword">super</span><span class="sh_symbol">.</span><span class="sh_function">toString</span><span class="sh_symbol">()+</span><span class="sh_string">" colour: "</span><span class="sh_symbol">+</span>colour<span class="sh_symbol">;</span>
    <span class="sh_cbracket">}</span>
<span class="sh_cbracket">}</span>
</pre>

<p>The class defines an object variable which saves the colour. The coordinates are saved in the superclass. The string representation must be similar to the one of the point, but it also has to show the colour. The overwritten <code>toString</code> method, calls the superclass toString method, and it adds the point colour to it.</p>

<p>In the following example, we create a list which contains various different points, either normal or coloured. Thanks to polymorphysm, we call the actual toString method of all objects, even though the list knows them as if they were all <code>Point</code>-type:</p>

<pre class="sh_java sh_sourceCode"><span class="sh_keyword">public</span> <span class="sh_keyword">class</span><span class="sh_normal"> </span><span class="sh_classname">Main</span> <span class="sh_cbracket">{</span>
    <span class="sh_keyword">public</span> <span class="sh_keyword">static</span> <span class="sh_type">void</span> <span class="sh_function">main</span><span class="sh_symbol">(</span>String<span class="sh_symbol">[]</span> args<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span>
        <span class="sh_usertype">List&lt;Point&gt;</span><span class="sh_normal"> </span>points <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> ArrayList<span class="sh_symbol">&lt;</span>Point<span class="sh_symbol">&gt;();</span>
        points<span class="sh_symbol">.</span><span class="sh_function">add</span><span class="sh_symbol">(</span><span class="sh_keyword">new</span> <span class="sh_function">Point</span><span class="sh_symbol">(</span><span class="sh_number">4</span><span class="sh_symbol">,</span> <span class="sh_number">8</span><span class="sh_symbol">));</span>
        points<span class="sh_symbol">.</span><span class="sh_function">add</span><span class="sh_symbol">(</span><span class="sh_keyword">new</span> <span class="sh_function">ColouredPoint</span><span class="sh_symbol">(</span><span class="sh_number">1</span><span class="sh_symbol">,</span> <span class="sh_number">1</span><span class="sh_symbol">,</span> <span class="sh_string">"green"</span><span class="sh_symbol">));</span>
        points<span class="sh_symbol">.</span><span class="sh_function">add</span><span class="sh_symbol">(</span><span class="sh_keyword">new</span> <span class="sh_function">ColouredPoint</span><span class="sh_symbol">(</span><span class="sh_number">2</span><span class="sh_symbol">,</span> <span class="sh_number">5</span><span class="sh_symbol">,</span> <span class="sh_string">"blue"</span><span class="sh_symbol">));</span>
        points<span class="sh_symbol">.</span><span class="sh_function">add</span><span class="sh_symbol">(</span><span class="sh_keyword">new</span> <span class="sh_function">Point</span><span class="sh_symbol">(</span><span class="sh_number">0</span><span class="sh_symbol">,</span> <span class="sh_number">0</span><span class="sh_symbol">));</span>

        <span class="sh_keyword">for</span> <span class="sh_symbol">(</span><span class="sh_usertype">Point</span><span class="sh_normal"> </span>point <span class="sh_symbol">:</span> points<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span>
            System<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">println</span><span class="sh_symbol">(</span>point<span class="sh_symbol">);</span>
        <span class="sh_cbracket">}</span>
    <span class="sh_cbracket">}</span>
<span class="sh_cbracket">}</span>
</pre>

<p>Printing:</p>

<pre>(4, 8) distance 12
(1, 1) distance 2 colour: green
(2, 5) distance 7 colour: blue
(0, 0) distance 0
</pre>

<p>We also want a 3D point in our program. Because that is not a coloured point, it shall inherit Point:</p>

<pre class="sh_java sh_sourceCode"><span class="sh_keyword">public</span> <span class="sh_keyword">class</span><span class="sh_normal"> </span><span class="sh_classname">3DPoint</span> <span class="sh_keyword">extends</span> Point <span class="sh_cbracket">{</span>

    <span class="sh_keyword">private</span> <span class="sh_type">int</span> z<span class="sh_symbol">;</span>

    <span class="sh_keyword">public</span> 3<span class="sh_function">DPoint</span><span class="sh_symbol">(</span><span class="sh_type">int</span> x<span class="sh_symbol">,</span> <span class="sh_type">int</span> y<span class="sh_symbol">,</span> <span class="sh_type">int</span> z<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span>
        <span class="sh_keyword">super</span><span class="sh_symbol">(</span>x<span class="sh_symbol">,</span> y<span class="sh_symbol">);</span>
        <span class="sh_keyword">this</span><span class="sh_symbol">.</span>z <span class="sh_symbol">=</span> z<span class="sh_symbol">;</span>
    <span class="sh_cbracket">}</span>

    @Override
    <span class="sh_keyword">protected</span> <span class="sh_usertype">String</span><span class="sh_normal"> </span><span class="sh_function">location</span><span class="sh_symbol">()</span> <span class="sh_cbracket">{</span>
        <span class="sh_keyword">return</span> <span class="sh_keyword">super</span><span class="sh_symbol">.</span><span class="sh_function">location</span><span class="sh_symbol">()</span> <span class="sh_symbol">+</span> <span class="sh_string">", "</span> <span class="sh_symbol">+</span> z<span class="sh_symbol">;</span>    <span class="sh_comment">// printing as "x, y, z"</span>
    <span class="sh_cbracket">}</span>

    @Override
    <span class="sh_keyword">public</span> <span class="sh_type">int</span> <span class="sh_function">manhattanDistanceFromOrigin</span><span class="sh_symbol">()</span> <span class="sh_cbracket">{</span>
        <span class="sh_comment">// first, we ask the superclass for the distance of x+y</span>
        <span class="sh_comment">// and then we add the value of z to it</span>
        <span class="sh_keyword">return</span> <span class="sh_keyword">super</span><span class="sh_symbol">.</span><span class="sh_function">manhattanDistanceFromOrigin</span><span class="sh_symbol">()</span> <span class="sh_symbol">+</span> Math<span class="sh_symbol">.</span><span class="sh_function">abs</span><span class="sh_symbol">(</span>z<span class="sh_symbol">);</span>
    <span class="sh_cbracket">}</span>

    @Override
    <span class="sh_keyword">public</span> <span class="sh_usertype">String</span><span class="sh_normal"> </span><span class="sh_function">toString</span><span class="sh_symbol">()</span> <span class="sh_cbracket">{</span>
        <span class="sh_keyword">return</span> <span class="sh_string">"("</span> <span class="sh_symbol">+</span> <span class="sh_keyword">this</span><span class="sh_symbol">.</span><span class="sh_function">location</span><span class="sh_symbol">()</span> <span class="sh_symbol">+</span> <span class="sh_string">") distance "</span> <span class="sh_symbol">+</span> <span class="sh_keyword">this</span><span class="sh_symbol">.</span><span class="sh_function">manhattanDistanceFromOrigin</span><span class="sh_symbol">();</span>
    <span class="sh_cbracket">}</span>
<span class="sh_cbracket">}</span>
</pre>

<p>A 3D point defines an object variable corresponding to the third coordinate, and it overrides the methods <code>location</code>, <code>manhattanDistanceFromOrigin</code> and <code>toString</code> so that they would take into account the tridimensionality. We can now extend the previous example and add 3D points to our list:</p>

<pre class="sh_java sh_sourceCode"><span class="sh_keyword">public</span> <span class="sh_keyword">class</span><span class="sh_normal"> </span><span class="sh_classname">Main</span> <span class="sh_cbracket">{</span>

    <span class="sh_keyword">public</span> <span class="sh_keyword">static</span> <span class="sh_type">void</span> <span class="sh_function">main</span><span class="sh_symbol">(</span>String<span class="sh_symbol">[]</span> args<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span>
        <span class="sh_usertype">List&lt;Point&gt;</span><span class="sh_normal"> </span>points <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> ArrayList<span class="sh_symbol">&lt;</span>Point<span class="sh_symbol">&gt;();</span>
        points<span class="sh_symbol">.</span><span class="sh_function">add</span><span class="sh_symbol">(</span><span class="sh_keyword">new</span> <span class="sh_function">Point</span><span class="sh_symbol">(</span><span class="sh_number">4</span><span class="sh_symbol">,</span> <span class="sh_number">8</span><span class="sh_symbol">));</span>
        points<span class="sh_symbol">.</span><span class="sh_function">add</span><span class="sh_symbol">(</span><span class="sh_keyword">new</span> <span class="sh_function">ColouredPoint</span><span class="sh_symbol">(</span><span class="sh_number">1</span><span class="sh_symbol">,</span> <span class="sh_number">1</span><span class="sh_symbol">,</span> <span class="sh_string">"green"</span><span class="sh_symbol">));</span>
        points<span class="sh_symbol">.</span><span class="sh_function">add</span><span class="sh_symbol">(</span><span class="sh_keyword">new</span> <span class="sh_function">Point</span><span class="sh_symbol">(</span><span class="sh_number">2</span><span class="sh_symbol">,</span> <span class="sh_number">5</span><span class="sh_symbol">,</span> <span class="sh_string">"blue"</span><span class="sh_symbol">));</span>
        points<span class="sh_symbol">.</span><span class="sh_function">add</span><span class="sh_symbol">(</span><span class="sh_keyword">new</span> 3<span class="sh_function">DPoint</span><span class="sh_symbol">(</span><span class="sh_number">5</span><span class="sh_symbol">,</span> <span class="sh_number">2</span><span class="sh_symbol">,</span> <span class="sh_number">8</span><span class="sh_symbol">));</span>
        points<span class="sh_symbol">.</span><span class="sh_function">add</span><span class="sh_symbol">(</span><span class="sh_keyword">new</span> <span class="sh_function">Point</span><span class="sh_symbol">(</span><span class="sh_number">0</span><span class="sh_symbol">,</span> <span class="sh_number">0</span><span class="sh_symbol">));</span>

        <span class="sh_keyword">for</span> <span class="sh_symbol">(</span><span class="sh_usertype">Point</span><span class="sh_normal"> </span>point <span class="sh_symbol">:</span> points<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span>
            System<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">println</span><span class="sh_symbol">(</span>point<span class="sh_symbol">);</span>
        <span class="sh_cbracket">}</span>
    <span class="sh_cbracket">}</span>
<span class="sh_cbracket">}</span>
</pre>

<p>The output meets our expectations</p>

<pre>(4, 8) distance 12
(1, 1) distance 2 colour: green
(2, 5) distance 7 colour: blue
(5, 2, 8) distance 15
(0, 0) distance 0
</pre>

<p>We notice that the tridimensional point <code>toString</code> method is exactly the same as the point's toString. Could we leave the toString method untouched? Of course! A tridimensional point can be reduced to the following:</p>

<pre class="sh_java sh_sourceCode"><span class="sh_keyword">public</span> <span class="sh_keyword">class</span><span class="sh_normal"> </span><span class="sh_classname">3DPoint</span> <span class="sh_keyword">extends</span> Point <span class="sh_cbracket">{</span>

    <span class="sh_keyword">private</span> <span class="sh_type">int</span> z<span class="sh_symbol">;</span>

    <span class="sh_keyword">public</span> 3<span class="sh_function">DPoint</span><span class="sh_symbol">(</span><span class="sh_type">int</span> x<span class="sh_symbol">,</span> <span class="sh_type">int</span> y<span class="sh_symbol">,</span> <span class="sh_type">int</span> z<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span>
        <span class="sh_keyword">super</span><span class="sh_symbol">(</span>x<span class="sh_symbol">,</span> y<span class="sh_symbol">);</span>
        <span class="sh_keyword">this</span><span class="sh_symbol">.</span>z <span class="sh_symbol">=</span> z<span class="sh_symbol">;</span>
    <span class="sh_cbracket">}</span>

    @Override
    <span class="sh_keyword">protected</span> <span class="sh_usertype">String</span><span class="sh_normal"> </span><span class="sh_function">distance</span><span class="sh_symbol">()</span> <span class="sh_cbracket">{</span>
        <span class="sh_keyword">return</span> <span class="sh_keyword">super</span><span class="sh_symbol">.</span><span class="sh_function">distance</span><span class="sh_symbol">()+</span><span class="sh_string">", "</span><span class="sh_symbol">+</span>z<span class="sh_symbol">;</span>
    <span class="sh_cbracket">}</span>

    @Override
    <span class="sh_keyword">public</span> <span class="sh_type">int</span> <span class="sh_function">manhattanDistanceFromOrigin</span><span class="sh_symbol">()</span> <span class="sh_cbracket">{</span>
        <span class="sh_keyword">return</span> <span class="sh_keyword">super</span><span class="sh_symbol">.</span><span class="sh_function">manhattanDistanceFromOrigin</span><span class="sh_symbol">()+</span>Math<span class="sh_symbol">.</span><span class="sh_function">abs</span><span class="sh_symbol">(</span>z<span class="sh_symbol">);</span>
    <span class="sh_cbracket">}</span>
<span class="sh_cbracket">}</span>
</pre>

<p>What does exactly happen when we call a tridimensional point's toString method? The execution proceeds in the following way:</p>
<ol><li>we look for a toString method in the class 3DPoint; this is not found and we move to its parent class</li>
<li>we look for a toString method in the superclass Point; the method is found and we execute its code</li>
</ol><ul><li>the code to execute is <code>return "("+this.location()+") location "+this.manhattanDistanceFromOrigin();</code></li>
<li>first, we execute the method location</li>
<li>we look for a location method in the class 3DPoint; the method is found and we executes its code
</li>
<li>the location method calculates its result by calling the superclass method location</li>
<li>next, we look for the definition of the method manhattanDistanceFromOrigin in the class Point3D; the method is found and we execute its code</li>
<li>once again, the method calculates its result by calling its homonym in the superclass</li>
</ul><p>The operating sequence produced by the method call has many steps. The idea is clear, anyway: when we want to execute a method, we first look for its definition in the object real type, and if it is not found, we move to the super class. If the method is not found in the parent class either, we move to the parent parent class, and so on...</p>

          <h3> When Do We Have to Use Inheritance?</h3>

          <p>Inheritance is a tool to build and qualify object hierarchy; a subclass is always a special instance of the superclass. If the class we want to create is a special instance of an already existent class, we can create it by inheriting the class which already exists. For instance in our auto components example, motor <em>is</em> a component, but the motor has additional functionality which not all the classe
          s have.</p>

          <p>Through inheritance, a subclass receives the superclass functionality. If a subclass does not need or use the inherited functionality, inheritance is not motivated. The inherited classes inherit the upperclass methods and interfaces, and therefore we can use a subclass for any purpose the superclass was used. It is good to stick to low inheritance hierarchy, because the more complex the inheritance hierarchy is, the more complex maintainance and further development will be. In general, if the hierarchy is higher than two or three, the program structure is usually to improve.</p>

          <p>It is good to think about inheritance use. For instance, if <code>Car</code> inherited classes like <code>Component</code> or <code>Motor</code>, that would be wrong. A car <em>contains</em> a motor and components, but a car is not a motor or a component. More generally, we can think that if an object owns or is composed of the other objects, inheritance is wrong.</p>

          <p>Devoloping hierachy, you have to make sure the Single Responsibility Principle applies. There must be only one reason to change a  class. If you notice that the hierarchy increases a class responsibilities, that class must be divided into various different classes.</p>

          <h4> An Example of Inheritance Misuse</h4>

          <p>Let's think about the <code>Customer</code> class, in relation to post service. The class contains the customer personal information, and <code>Order</code>, which inherits the customer personal information and contains the information of the object to order. The class <code>Order</code> has also got the method <code>mailingAddress</code>, which tells the mailing address of the order.</p>

<pre class="sh_java sh_sourceCode"><span class="sh_keyword">public</span> <span class="sh_keyword">class</span><span class="sh_normal"> </span><span class="sh_classname">Customer</span> <span class="sh_cbracket">{</span>

    <span class="sh_keyword">private</span> <span class="sh_usertype">String</span><span class="sh_normal"> </span>name<span class="sh_symbol">;</span>
    <span class="sh_keyword">private</span> <span class="sh_usertype">String</span><span class="sh_normal"> </span>address<span class="sh_symbol">;</span>

    <span class="sh_keyword">public</span> <span class="sh_function">Customer</span><span class="sh_symbol">(</span><span class="sh_usertype">String</span><span class="sh_normal"> </span>name<span class="sh_symbol">,</span> <span class="sh_usertype">String</span><span class="sh_normal"> </span>address<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span>
        <span class="sh_keyword">this</span><span class="sh_symbol">.</span>name <span class="sh_symbol">=</span> name<span class="sh_symbol">;</span>
        <span class="sh_keyword">this</span><span class="sh_symbol">.</span>address <span class="sh_symbol">=</span> address<span class="sh_symbol">;</span>
    <span class="sh_cbracket">}</span>

    <span class="sh_keyword">public</span> <span class="sh_usertype">String</span><span class="sh_normal"> </span><span class="sh_function">getName</span><span class="sh_symbol">()</span> <span class="sh_cbracket">{</span>
        <span class="sh_keyword">return</span> name<span class="sh_symbol">;</span>
    <span class="sh_cbracket">}</span>

    <span class="sh_keyword">public</span> <span class="sh_usertype">String</span><span class="sh_normal"> </span><span class="sh_function">getAddress</span><span class="sh_symbol">()</span> <span class="sh_cbracket">{</span>
        <span class="sh_keyword">return</span> address<span class="sh_symbol">;</span>
    <span class="sh_cbracket">}</span>

    <span class="sh_keyword">public</span> <span class="sh_type">void</span> <span class="sh_function">setAddress</span><span class="sh_symbol">(</span><span class="sh_usertype">String</span><span class="sh_normal"> </span>address<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span>
        <span class="sh_keyword">this</span><span class="sh_symbol">.</span>address <span class="sh_symbol">=</span> address<span class="sh_symbol">;</span>
    <span class="sh_cbracket">}</span>
<span class="sh_cbracket">}</span>
</pre>

<pre class="sh_java sh_sourceCode"><span class="sh_keyword">public</span> <span class="sh_keyword">class</span><span class="sh_normal"> </span><span class="sh_classname">Order</span> <span class="sh_keyword">extends</span> Customer <span class="sh_cbracket">{</span>

    <span class="sh_keyword">private</span> <span class="sh_usertype">String</span><span class="sh_normal"> </span>product<span class="sh_symbol">;</span>
    <span class="sh_keyword">private</span> <span class="sh_usertype">String</span><span class="sh_normal"> </span>amount<span class="sh_symbol">;</span>

    <span class="sh_keyword">public</span> <span class="sh_function">Order</span><span class="sh_symbol">(</span><span class="sh_usertype">String</span><span class="sh_normal"> </span>product<span class="sh_symbol">,</span> <span class="sh_usertype">String</span><span class="sh_normal"> </span>amount<span class="sh_symbol">,</span> <span class="sh_usertype">String</span><span class="sh_normal"> </span>name<span class="sh_symbol">,</span> <span class="sh_usertype">String</span><span class="sh_normal"> </span>address<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span>
        <span class="sh_keyword">super</span><span class="sh_symbol">(</span>name<span class="sh_symbol">,</span> address<span class="sh_symbol">);</span>
        <span class="sh_keyword">this</span><span class="sh_symbol">.</span>product <span class="sh_symbol">=</span> product<span class="sh_symbol">;</span>
        <span class="sh_keyword">this</span><span class="sh_symbol">.</span>amount <span class="sh_symbol">=</span> amount<span class="sh_symbol">;</span>
    <span class="sh_cbracket">}</span>

    <span class="sh_keyword">public</span> <span class="sh_usertype">String</span><span class="sh_normal"> </span><span class="sh_function">getProduct</span><span class="sh_symbol">()</span> <span class="sh_cbracket">{</span>
        <span class="sh_keyword">return</span> product<span class="sh_symbol">;</span>
    <span class="sh_cbracket">}</span>

    <span class="sh_keyword">public</span> <span class="sh_usertype">String</span><span class="sh_normal"> </span><span class="sh_function">getAmount</span><span class="sh_symbol">()</span> <span class="sh_cbracket">{</span>
        <span class="sh_keyword">return</span> amount<span class="sh_symbol">;</span>
    <span class="sh_cbracket">}</span>

    <span class="sh_keyword">public</span> <span class="sh_usertype">String</span><span class="sh_normal"> </span><span class="sh_function">mailingAddress</span><span class="sh_symbol">()</span> <span class="sh_cbracket">{</span>
        <span class="sh_keyword">return</span> <span class="sh_keyword">this</span><span class="sh_symbol">.</span><span class="sh_function">getName</span><span class="sh_symbol">()</span> <span class="sh_symbol">+</span> <span class="sh_string">"</span><span class="sh_specialchar">\n</span><span class="sh_string">"</span> <span class="sh_symbol">+</span> <span class="sh_keyword">this</span><span class="sh_symbol">.</span><span class="sh_function">getAddress</span><span class="sh_symbol">();</span>
    <span class="sh_cbracket">}</span>
<span class="sh_cbracket">}</span>
</pre>

  <p>The inheritance above is used erroneously. When a class inherits another, the subclass has to be a special instance of the superclass; order is not a special instance of customer. The misuse becomes apparent by breaking the single responsibility principle: the class <code>Order</code> is responsible for both the customer and the order information maintenance.</p>

  <p>The problem with the previous solution becomes apparent when we think of what would happen if a customer changes their own address.</p>

  <p>With a change of address, we would have to change <em>each</em> Order object of the customer, which is a hint about a bad situation. A better solution would be encapsulating <code>Customer</code> as an object variable of <code>Order</code>. If we think more specifically about the order semantics this becomes clear. <em>An order has a customer</em>. Let's change the class <code>Order</code> so that it contains a reference to <code>Customer</code>.</p>

<pre class="sh_java sh_sourceCode"><span class="sh_keyword">public</span> <span class="sh_keyword">class</span><span class="sh_normal"> </span><span class="sh_classname">Order</span> <span class="sh_cbracket">{</span>

    <span class="sh_keyword">private</span> <span class="sh_usertype">Customer</span><span class="sh_normal"> </span>customer<span class="sh_symbol">;</span>
    <span class="sh_keyword">private</span> <span class="sh_usertype">String</span><span class="sh_normal"> </span>product<span class="sh_symbol">;</span>
    <span class="sh_keyword">private</span> <span class="sh_usertype">String</span><span class="sh_normal"> </span>amount<span class="sh_symbol">;</span>

    <span class="sh_keyword">public</span> <span class="sh_function">Tilaus</span><span class="sh_symbol">(</span><span class="sh_usertype">Customer</span><span class="sh_normal"> </span>customer<span class="sh_symbol">,</span> <span class="sh_usertype">String</span><span class="sh_normal"> </span>product<span class="sh_symbol">,</span> <span class="sh_usertype">String</span><span class="sh_normal"> </span>amount<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span>
        <span class="sh_keyword">this</span><span class="sh_symbol">.</span>customer <span class="sh_symbol">=</span> customer<span class="sh_symbol">;</span>
        <span class="sh_keyword">this</span><span class="sh_symbol">.</span>product <span class="sh_symbol">=</span> product<span class="sh_symbol">;</span>
        <span class="sh_keyword">this</span><span class="sh_symbol">.</span>amount <span class="sh_symbol">=</span> amount<span class="sh_symbol">;</span>
    <span class="sh_cbracket">}</span>

    <span class="sh_keyword">public</span> <span class="sh_usertype">String</span><span class="sh_normal"> </span><span class="sh_function">getProduct</span><span class="sh_symbol">()</span> <span class="sh_cbracket">{</span>
        <span class="sh_keyword">return</span> product<span class="sh_symbol">;</span>
    <span class="sh_cbracket">}</span>

    <span class="sh_keyword">public</span> <span class="sh_usertype">String</span><span class="sh_normal"> </span><span class="sh_function">getAmount</span><span class="sh_symbol">()</span> <span class="sh_cbracket">{</span>
        <span class="sh_keyword">return</span> amount<span class="sh_symbol">;</span>
    <span class="sh_cbracket">}</span>

    <span class="sh_keyword">public</span> <span class="sh_usertype">String</span><span class="sh_normal"> </span><span class="sh_function">mailingAddress</span><span class="sh_symbol">()</span> <span class="sh_cbracket">{</span>
        <span class="sh_keyword">return</span> <span class="sh_keyword">this</span><span class="sh_symbol">.</span>customer<span class="sh_symbol">.</span><span class="sh_function">getName</span><span class="sh_symbol">()</span> <span class="sh_symbol">+</span> <span class="sh_string">"</span><span class="sh_specialchar">\n</span><span class="sh_string">"</span> <span class="sh_symbol">+</span> <span class="sh_keyword">this</span><span class="sh_symbol">.</span>customer<span class="sh_symbol">.</span><span class="sh_function">getAddress</span><span class="sh_symbol">();</span>
    <span class="sh_cbracket">}</span>
<span class="sh_cbracket">}</span>
</pre>

    <p>The <code>Order</code> class above is better now. The method <code>mailingAddress</code> uses a <em>Customer</em> reference to retrieve the mailing address, instead of inheriting the class <code>Customer</code>. This makes easier both the maintanance and the concrete functionality of our program.</p>

    <p>Now, when we modify a customer, we only need to change their information; we don't have to do anything about the orders.</p>

<div class="tehtavat">
<p class="heading" id="e30">Exercise 30: Container</p>

<p>Together with the exercise, you find the class <code>Container</code>, with the following constructor and methods:</p>

<ul><li><b>public Container(double capacity)</b><br>
     It creates an empty container, whose capacity is given as argument;
     an improper capacity (&lt;=0) creates a useless container,
     whose capacity is 0.</li>

<li><b>public double getVolume()</b><br>
     It returns the volume of product in the container.</li>


<li><b>public double getOriginalCapacity()</b><br>
     It returns the original capacity of the container, that is to say what the constructor was originally given.</li>

<li><b>public double getCurrentCapacity()</b><br>
     It returns the actual capacity of the container.</li>

<li><b>public void addToTheContainer(double amount)</b><br>
     It adds the specified amount of things to the container. If the amount is negative, nothing changes;
     if a part of that amount fits but not the whole of it, the container is filled up
     and the left over is thrown away.</li>

<li><b>public double takeFromTheContainer(double amount)</b><br>
    We take the specified amount form the container, the method returns what we <b>receive</b>.
    If the specified amount is negative, nothing happens and zero is returned.
    If we ask for more than what there is in the container, the method returns all the contents.</li>

<li><b>public String toString()</b><br>
    It returns the state of an object in String form like <tt>volume = 64.5, free space 123.5</tt></li>
</ul><p>In this exercise, we create various different containers out of our <code>Container</code> class. Attention! Create all the classes in the package <code>containers</code>.</p>

        <h4 class="req">Exercise 30.1: Product Container, Phase 1</h4>

        <p>The class <code>Container</code> has control on the operations regarding the amount of a product. Now, we also want that products have their name and handling equipment. <i><b>Program ProductContainer, a subclass of Container!</b></i> Let's first implement a single object variable for the name of the contained product, a constructor and a getter for the name:</p>


<ul><li><b>public ProductContainer(String productName, double capacity)</b><br>
     It creates an empty product container. The product name and the container capacity are given as parameters.</li>


<li><b>public String getName()</b><br>
     It returns the product name.</li>
</ul><p><i>Remember in what way the constructor can make use of its upper class constructor in its first line!</i></p>

        <p>Example:</p>

<pre class="sh_java sh_sourceCode">        <span class="sh_usertype">ProductContainer</span><span class="sh_normal"> </span>juice <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">ProductContainer</span><span class="sh_symbol">(</span><span class="sh_string">"Juice"</span><span class="sh_symbol">,</span> <span class="sh_number">1000.0</span><span class="sh_symbol">);</span>
        juice<span class="sh_symbol">.</span><span class="sh_function">addToTheContainer</span><span class="sh_symbol">(</span><span class="sh_number">1000.0</span><span class="sh_symbol">);</span>
        juice<span class="sh_symbol">.</span><span class="sh_function">takeFromTheContainer</span><span class="sh_symbol">(</span><span class="sh_number">11.3</span><span class="sh_symbol">);</span>
        System<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">println</span><span class="sh_symbol">(</span>juice<span class="sh_symbol">.</span><span class="sh_function">getName</span><span class="sh_symbol">());</span> <span class="sh_comment">// Juice</span>
        System<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">println</span><span class="sh_symbol">(</span>juice<span class="sh_symbol">);</span>           <span class="sh_comment">// volume = 988.7, free space 11.3</span>
</pre>

<pre>Juice
volume = 988.7, free space 11.3
</pre>


<h4 class="req">Exercise 30.2: Product Container, Phase 2</h4>


<p>As you see from the example above, the <code>toString()</code> method inherited by ProductContainer does not know anything about the product name (of course!). <i>Something must be done for it!</i> Let's also add a setter for the product name, at the same time:</p>

<ul><li><b>public void setName(String newName)</b> sets a new name to the product.</li>

<li><b>public String toString()</b> returns the object state in String form, like <tt>Juice: volume = 64.5, free space 123.5</tt></li>
</ul><p>The new <code>toString()</code> method could be programmed using the getter inherited from the superclass, retrieving the values of inherited but hidden values field values. However, we have programmed the superclass in a way that it is already able to produce the container situation in String form: why should we bother to program this again? Make use of the inherited <code>toString</code>.</p>

        <p><i>Remember that an overwritten method can still be called in its subclass, where we overwrite it!</i></p>

        <p>Use demonstration:</p>

<pre class="sh_java sh_sourceCode">        <span class="sh_usertype">ProductContainer</span><span class="sh_normal"> </span>juice <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">ProductContainer</span><span class="sh_symbol">(</span><span class="sh_string">"Juice"</span><span class="sh_symbol">,</span> <span class="sh_number">1000.0</span><span class="sh_symbol">);</span>
        juice<span class="sh_symbol">.</span><span class="sh_function">addToTheContainer</span><span class="sh_symbol">(</span><span class="sh_number">1000.0</span><span class="sh_symbol">);</span>
        juice<span class="sh_symbol">.</span><span class="sh_function">takeFromTheContainer</span><span class="sh_symbol">(</span><span class="sh_number">11.3</span><span class="sh_symbol">);</span>
        System<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">println</span><span class="sh_symbol">(</span>juice<span class="sh_symbol">.</span><span class="sh_function">getName</span><span class="sh_symbol">());</span> <span class="sh_comment">// Juice</span>
        juice<span class="sh_symbol">.</span><span class="sh_function">addToTheContainer</span><span class="sh_symbol">(</span><span class="sh_number">1.0</span><span class="sh_symbol">);</span>
        System<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">println</span><span class="sh_symbol">(</span>juice<span class="sh_symbol">);</span>           <span class="sh_comment">// Juice: volume = 989.7, space 10.299999999999955</span>
</pre>

<pre>Juice
Juice: volume = 989.7, free space 10.299999999999955
</pre>


<h4>Exercise 30.3: Container History</h4>

        <p>Sometimes, it can be interesting to know in what way the container situation has changed: is the container often rather empty or full, is the fluctuation considerable or not, and so on. Let's provide our <code>ProductContainer</code> class with the ability to record the container history.</p>

        <p>Let's start by designing a useful tool.</p>

        <p>We could directly implement an <code>ArrayList&lt;Double&gt;</code> object to track our container history in the class <i>ProductConteiner</i>; however, now we create a <i>specific tool</i> for this purpose. The tool has to encapsulate an <code>ArrayList&lt;Double&gt;</code> object.</p>

        <p><code>ContainerHistory</code> public constructor and methods:</p>

<ul><li><b>public ContainerHistory()</b> creates an empty <code>ContainerHistory</code> object.</li>

<li><b>public void add(double situation)</b> adds the parameter situation to the end of the container history. </li>

<li><b>public void reset()</b> it deletes the container history records.</li>

<li><b>public String toString()</b> returns the container history in the form of a String. <i>The String form given by the ArrayList class is fine and doesn't have to be modified.</i> </li>

</ul><h4 class="req">Exercise 30.4: ContainerHistory.java, Phase 2</h4>

<p>Implement analysis methods for your <code>ContainerHistory</code> class:</p>

<ul><li><b>public double maxValue()</b> reutrns the greatest value in the container history. If the history is empty, the method returns 0.</li>


<li><b>public double minValue()</b> reutrns the smallest value in the container history. If the history is empty, the method returns 0.</li>

<li><b>public double average()</b> reutrns the average of the values in the container history. If the history is empty, the method returns 0.</li>

</ul><h4>Exercise 30.5: ContainerHistory.java, Phase 3</h4>

<p>Implement analysis methods for your <code>ContainerHistory</code> class:</p>

<ul><li><b>public double greatestFluctuation()</b> returns the absolute value of the single greatest fluctuation in the container history (attention: a fluctuation of -5 is greater than 4). If the history is empty or it contains one value, the method returns zero. Absolute value is the distance of a number from zero. For instance the absolute value of -5.5 is 5.5, and the absolute value of 3.2 is 3.2.</li>

<li><b>public double variance()</b> returns the sample variance of the container history values. If the history is empty or it contains only one value, the method returns zero.</li>
</ul><p>You find guidelines to calculate the variance in <a href="http://en.wikipedia.org/wiki/Variance#Population_variance_and_sample_variance">Wikipedia</a>, in the population and sample variance section. For instance, the average of the numbers 3, 2, 7, and 2 is 3.5, and their sample variance is therefore ((3 - 3.5)² + (2 - 3.5)² + (7 - 3.5)² + (2 - 3.5)²)/(4 - 1) ˜ 5,666667.)</p>




<h4 class="req">Exercise 30.6: Product Container Recorder, Phase 1</h4>

<p>Implement the class <code>ProductContainerRecorder</code> which inherits <code>ProductContainer</code>. In addition to the old methods, the new version provides services for the container history. The hisotry is handled with a  <code>ContainerHistory</code> object.
</p>

<p>The public constructor and methods:</p>

<ul><li><b>public ProductContainerRecorder(String productName, double capacity, double initialVolume)</b>
     creates a product container. The product name, capacity, and original volume are given as parameter.
     <i>Record the original volume both as the stored product original volume and as the first value of the container history.</i>

</li><li><b>public String history()</b> returns the container history in the following form:
       <tt>[0.0, 119.2, 21.2]</tt>.  <i>Use the String printout form as it is.</i>

</li></ul><p>
<b>Attention:</b> now we remember only the original volume.
</p>

<p>
Example:
</p>

<pre class="sh_java sh_sourceCode"><span class="sh_comment">// the well known way:</span>
<span class="sh_usertype">ProductContainerRecorder</span><span class="sh_normal"> </span>juice <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">ProductContainerRecorder</span><span class="sh_symbol">(</span><span class="sh_string">"Juice"</span><span class="sh_symbol">,</span> <span class="sh_number">1000.0</span><span class="sh_symbol">,</span> <span class="sh_number">1000.0</span><span class="sh_symbol">);</span>
juice<span class="sh_symbol">.</span><span class="sh_function">takeFromTheContainer</span><span class="sh_symbol">(</span><span class="sh_number">11.3</span><span class="sh_symbol">);</span>
System<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">println</span><span class="sh_symbol">(</span>juice<span class="sh_symbol">.</span><span class="sh_function">getName</span><span class="sh_symbol">());</span> <span class="sh_comment">// Juice</span>
juice<span class="sh_symbol">.</span><span class="sh_function">addToTheContainer</span><span class="sh_symbol">(</span><span class="sh_number">1.0</span><span class="sh_symbol">);</span>
System<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">println</span><span class="sh_symbol">(</span>juice<span class="sh_symbol">);</span>           <span class="sh_comment">// Juice: volume = 989.7, free space 10.3</span>
<span class="sh_symbol">...</span>
<b><span class="sh_comment">// history() does not work properly, yet:</span></b>
System<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">println</span><span class="sh_symbol">(</span>juice<span class="sh_symbol">.</span><span class="sh_function">history</span><span class="sh_symbol">());</span> <span class="sh_comment">// [1000.0]</span>
   <span class="sh_comment">// in fact, we only retrieve the original value which was given to the constructor...</span>
<span class="sh_symbol">...</span>
</pre>


<p>
Printing:
</p>
<pre>Juice
Juice: volume = 989.7, free space 10.299999999999955
[1000.0]
</pre>

<h4 class="req">Exercise 30.7: Product Container Recorder, Phase 2</h4>

<p>
<i>It's time to pick up history!</i> The first version of our history knew only the original value. Implement the following methods:
</p>
<ul><li><b>public void addToTheContainer(double amount)</b>;

    this works like the method in <i>Container</i>, but the new situation is recorded in the history.
<b>Attention: </b> you have to record the product volume in the container after the addition, not the amount which was added!
</li>



<li><b>public double takeFromTheContainer(double amount)</b>; it works like the method in <code>Container</code>, but the new situation is recorded in the history. <b>Attention: </b> you have to record the product volume in the container after the operation, not the amount which was removed!</li>

</ul><p>
Use example:
</p>

<pre class="sh_java sh_sourceCode"><span class="sh_comment">// the well known way:</span>
<span class="sh_usertype">ProductContainerRecorder</span><span class="sh_normal"> </span>juice <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">ProductContainerRecorder</span><span class="sh_symbol">(</span><span class="sh_string">"Juice"</span><span class="sh_symbol">,</span> <span class="sh_number">1000.0</span><span class="sh_symbol">,</span> <span class="sh_number">1000.0</span><span class="sh_symbol">);</span>
juice<span class="sh_symbol">.</span><span class="sh_function">takeFromTheContainer</span><span class="sh_symbol">(</span><span class="sh_number">11.3</span><span class="sh_symbol">);</span>
System<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">println</span><span class="sh_symbol">(</span>juice<span class="sh_symbol">.</span><span class="sh_function">getName</span><span class="sh_symbol">());</span> <span class="sh_comment">// Juice</span>
juice<span class="sh_symbol">.</span><span class="sh_function">addToTheContainer</span><span class="sh_symbol">(</span><span class="sh_number">1.0</span><span class="sh_symbol">);</span>
System<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">println</span><span class="sh_symbol">(</span>juice<span class="sh_symbol">);</span>           <span class="sh_comment">// Juice: volume = 989.7, free space 10.3</span>
<span class="sh_symbol">...</span>
<span class="sh_comment">// but now we have our history record</span>
System<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">println</span><span class="sh_symbol">(</span>juice<span class="sh_symbol">.</span><span class="sh_function">history</span><span class="sh_symbol">());</span> <span class="sh_comment">// [1000.0, 988.7, 989.7]</span>
<span class="sh_symbol">...</span>
</pre>
<p>
Printing:
</p>
<pre>Juice
Juice: volume = 989.7, free space 10.299999999999955
[1000.0, 988.7, 989.7]
</pre>
<p>

</p><p>
<i>Remember how an overwritten method can be used inside the method that overwrites it!</i>
</p>


<h4 class="req">Exercise 30.8: Product Container Recorder, Phase 3</h4>
<p>
Implement the following method:
</p>
<ul><li><b>public void printAnalysis()</b>, which prints the history information regarding the product, following the exercise below:</li>
</ul><p>
Use example:
</p>
<pre class="sh_java sh_sourceCode"><span class="sh_usertype">ProductContainerRecorder</span><span class="sh_normal"> </span>juice <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">ProductContainerRecorder</span><span class="sh_symbol">(</span><span class="sh_string">"Juice"</span><span class="sh_symbol">,</span> <span class="sh_number">1000.0</span><span class="sh_symbol">,</span> <span class="sh_number">1000.0</span><span class="sh_symbol">);</span>
juice<span class="sh_symbol">.</span><span class="sh_function">takeFromTheContainer</span><span class="sh_symbol">(</span><span class="sh_number">11.3</span><span class="sh_symbol">);</span>
juice<span class="sh_symbol">.</span><span class="sh_function">addToTheContainer</span><span class="sh_symbol">(</span><span class="sh_number">1.0</span><span class="sh_symbol">);</span>
<span class="sh_comment">//System.out.println(juice.history()); // [1000.0, 988.7, 989.7]</span>

juice<span class="sh_symbol">.</span><span class="sh_function">printAnalysis</span><span class="sh_symbol">();</span>
</pre>
<p>
The method <i>printAnalysis</i> prints:
</p>

<pre>Product: Juice
History: [1000.0, 988.7, 989.7]
Greatest product amount: 1000.0
Smallest product amount: 988.7
Average: 992.8
Greatest change: 11.299999999999955
Variance: 39.129999999999676
</pre>
<p>

</p><h4>Exercise 30.9: Product Container Recorder, Phase 4</h4>
<p>
Fill the analysis so that it prints the greatest fluctuation and the history variance.
</p>


</div>


<h3> Inheritance, Interfaces, Both, or None?</h3>

<p>Inheritance does not exclude using interfaces, and viceversa. Interfaces are like an agreement on the class implementation, and they allow for the abstraction of the concrete implementation. Changing a class which implements an interface is quite easy.</p>

        <p>As with interfaces, when we make use of inheritance, the subclasses are committed to provide all the superclass methods. Because of polymorphism, inheritance works as interfaces do. We can assign a subclass instance to a method which receives its superclass as parameter.</p>

        <p>Below, we create a farm simulator, where we simulate the life in a farm. Note that the program does not make us of inheritance, and the interface use is scarce. With programs, we often create a first version which we improve later on. Typically, we don't already understand the scope of the problem when we implement the first version; planning interfaces and inheritance hierarchy may be difficult and it may slow down the work.</p>


<div class="tehtavat">
    <p class="heading" id="e31">Exercise 31: Farm Simulator</p>

<p>Dairy farms have got milking animals; they do not handle milk themselves, but milk trucks transport it to dairy factories which process it into a variety of milk products. Each dairy factory is specialised in one product type; for instance, a cheese factory produces cheese, a butter factory produces butter, and a milk factory produces milk.
</p><p>

</p><p>Let's create a simulator which represents the milk course of life. Implement all the classes in the package <code>farmsimulator</code>.
</p><p>


</p><h4>Exercise 31.1: Bulk Tank</h4>

<p>Milk has to be stored in bulk tanks in good conditions. Bulk tanks are produced both with a standard capacity of 2000 litres, and with customer specific capacity. Create the class BulkTank, with the following constructors and methods.
</p>

  <ul><li><strong>public BulkTank()</strong></li>
    <li><strong>public BulkTank(double capacity)</strong></li>
    <li><strong>public double getCapacity()</strong></li>
    <li><strong>public double getVolume()</strong></li>
    <li><strong>public double howMuchFreeSpace()</strong></li>
    <li><strong>public void addToTank(double amount)</strong> adds to the tank only as much milk as it fits; the additional milk will not be added, and you don't have to worry about a situation where the milk spills over</li>
    <li><strong>public double getFromTank(double amount)</strong>
      takes the required amount from the tank, or as much as there is left
    </li>
  </ul><p>Also, implement the <code>toString</code> method for your <code>BulkTank</code>. The <code>toString</code> method describes the tank situation by rounding down the litres using the <code>ceil()</code> method of class <code>Math</code>.
</p>

<p>Test your bulk tank with the following program chunk:</p>

<pre class="sh_java sh_sourceCode"><span class="sh_usertype">BulkTank</span><span class="sh_normal"> </span>tank <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">BulkTank</span><span class="sh_symbol">();</span>
tank<span class="sh_symbol">.</span><span class="sh_function">getFromTank</span><span class="sh_symbol">(</span><span class="sh_number">100</span><span class="sh_symbol">);</span>
tank<span class="sh_symbol">.</span><span class="sh_function">addToTank</span><span class="sh_symbol">(</span><span class="sh_number">25</span><span class="sh_symbol">);</span>
tank<span class="sh_symbol">.</span><span class="sh_function">getFromTank</span><span class="sh_symbol">(</span><span class="sh_number">5</span><span class="sh_symbol">);</span>
System<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">println</span><span class="sh_symbol">(</span>tank<span class="sh_symbol">);</span>

tank <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">BulkTank</span><span class="sh_symbol">(</span><span class="sh_number">50</span><span class="sh_symbol">);</span>
tank<span class="sh_symbol">.</span><span class="sh_function">addToTank</span><span class="sh_symbol">(</span><span class="sh_number">100</span><span class="sh_symbol">);</span>
System<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">println</span><span class="sh_symbol">(</span>tank<span class="sh_symbol">);</span>
</pre>


<p>The program print output should look like the following:</p>

<pre>20.0/2000.0
50.0/50.0
</pre>

<p>Note that when you call the <code>println()</code> method of the <code>out</code> object of class <code>System</code>, the method receives as paramater an <code>Object</code> variable; in such case, the print output is determined by the overwritten <code>toString()</code> method in <code>BulkTank</code>! We are in front of a case of polymorphism, because the method can work with different types.
</p>

<h4>Exercise 31.2: Cow</h4>

<p>If we want to produce milk, we also need cows. Cows have got names and udders. Udder capacity is a random value between 15 and 40; the class <code>Random</code> can be used to raffle off the numers, for instance, <code>int num = 15 + new Random().nextInt(26);</code>. The class <code>Cow</code> has the following functionality:</p>

  <ul><li><strong>public Cow()</strong> creates a new cow with a random name</li>
    <li><strong>public Cow(String name)</strong> creates a new cow with its given name</li>
    <li><strong>String getName()</strong> returns the cow's name</li>
    <li><strong>double getCapacity()</strong> returns the udder capacity</li>
    <li><strong>double getAmount()</strong> returns the amount on milk available in the cow's udders</li>
    <li><strong>String toString()</strong> returns a String which describes the cow (see the example below)</li>
  </ul><p><code>Cow</code> also implement the following interfaces: <code>Milkable</code>, which describes the cow's faculty for being milked, and <code>Alive</code>, which represents their faculty for being alive.</p>

<pre class="sh_java sh_sourceCode"><span class="sh_keyword">public</span> <span class="sh_keyword">interface</span><span class="sh_normal"> </span><span class="sh_classname">Milkable</span> <span class="sh_cbracket">{</span>
    <span class="sh_keyword">public</span> <span class="sh_type">double</span> <span class="sh_function">milk</span><span class="sh_symbol">();</span>
<span class="sh_cbracket">}</span>

<span class="sh_keyword">public</span> <span class="sh_keyword">interface</span><span class="sh_normal"> </span><span class="sh_classname">Alive</span> <span class="sh_cbracket">{</span>
    <span class="sh_keyword">public</span> <span class="sh_type">void</span> <span class="sh_function">liveHour</span><span class="sh_symbol">();</span>
<span class="sh_cbracket">}</span>
</pre>

<p>When a cow is milked, all their milk provision is taken to be processed. As long as a cow lives, their milk provision increases slowly. In Finland, milking cows produce 25-30 litres of milk every day, on the average. We simulate this by producing 0.7-2 litres every hour.
</p>

<p>If a cow is not given a name, they are assigned a random one from the list below.
</p>

<pre class="sh_java sh_sourceCode">    <span class="sh_keyword">private</span> <span class="sh_keyword">static</span> <span class="sh_keyword">final</span> String<span class="sh_symbol">[]</span> NAMES <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> String<span class="sh_symbol">[]</span><span class="sh_cbracket">{</span>
        <span class="sh_string">"Anu"</span><span class="sh_symbol">,</span> <span class="sh_string">"Arpa"</span><span class="sh_symbol">,</span> <span class="sh_string">"Essi"</span><span class="sh_symbol">,</span> <span class="sh_string">"Heluna"</span><span class="sh_symbol">,</span> <span class="sh_string">"Hely"</span><span class="sh_symbol">,</span>
        <span class="sh_string">"Hento"</span><span class="sh_symbol">,</span> <span class="sh_string">"Hilke"</span><span class="sh_symbol">,</span> <span class="sh_string">"Hilsu"</span><span class="sh_symbol">,</span> <span class="sh_string">"Hymy"</span><span class="sh_symbol">,</span> <span class="sh_string">"Ihq"</span><span class="sh_symbol">,</span> <span class="sh_string">"Ilme"</span><span class="sh_symbol">,</span> <span class="sh_string">"Ilo"</span><span class="sh_symbol">,</span>
        <span class="sh_string">"Jaana"</span><span class="sh_symbol">,</span> <span class="sh_string">"Jami"</span><span class="sh_symbol">,</span> <span class="sh_string">"Jatta"</span><span class="sh_symbol">,</span> <span class="sh_string">"Laku"</span><span class="sh_symbol">,</span> <span class="sh_string">"Liekki"</span><span class="sh_symbol">,</span>
        <span class="sh_string">"Mainikki"</span><span class="sh_symbol">,</span> <span class="sh_string">"Mella"</span><span class="sh_symbol">,</span> <span class="sh_string">"Mimmi"</span><span class="sh_symbol">,</span> <span class="sh_string">"Naatti"</span><span class="sh_symbol">,</span>
        <span class="sh_string">"Nina"</span><span class="sh_symbol">,</span> <span class="sh_string">"Nyytti"</span><span class="sh_symbol">,</span> <span class="sh_string">"Papu"</span><span class="sh_symbol">,</span> <span class="sh_string">"Pullukka"</span><span class="sh_symbol">,</span> <span class="sh_string">"Pulu"</span><span class="sh_symbol">,</span>
        <span class="sh_string">"Rima"</span><span class="sh_symbol">,</span> <span class="sh_string">"Soma"</span><span class="sh_symbol">,</span> <span class="sh_string">"Sylkki"</span><span class="sh_symbol">,</span> <span class="sh_string">"Valpu"</span><span class="sh_symbol">,</span> <span class="sh_string">"Virpi"</span><span class="sh_cbracket">}</span><span class="sh_symbol">;</span>
</pre>

<p>Implement the class Cow, and test whether it works with the following program body.</p>

<pre class="sh_java sh_sourceCode"><span class="sh_usertype">Cow</span><span class="sh_normal"> </span>cow <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">Cow</span><span class="sh_symbol">();</span>
System<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">println</span><span class="sh_symbol">(</span>cow<span class="sh_symbol">);</span>


<span class="sh_usertype">Alive</span><span class="sh_normal"> </span>livingCow <span class="sh_symbol">=</span> cow<span class="sh_symbol">;</span>
livingCow<span class="sh_symbol">.</span><span class="sh_function">liveHour</span><span class="sh_symbol">();</span>
livingCow<span class="sh_symbol">.</span><span class="sh_function">liveHour</span><span class="sh_symbol">();</span>
livingCow<span class="sh_symbol">.</span><span class="sh_function">liveHour</span><span class="sh_symbol">();</span>
livingCow<span class="sh_symbol">.</span><span class="sh_function">liveHour</span><span class="sh_symbol">();</span>

System<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">println</span><span class="sh_symbol">(</span>cow<span class="sh_symbol">);</span>

<span class="sh_usertype">Milkable</span><span class="sh_normal"> </span>milkingCow <span class="sh_symbol">=</span> cow<span class="sh_symbol">;</span>
milkingCow<span class="sh_symbol">.</span><span class="sh_function">milk</span><span class="sh_symbol">();</span>

System<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">println</span><span class="sh_symbol">(</span>cow<span class="sh_symbol">);</span>
System<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">println</span><span class="sh_symbol">(</span><span class="sh_string">""</span><span class="sh_symbol">);</span>

cow <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">Cow</span><span class="sh_symbol">(</span><span class="sh_string">"Ammu"</span><span class="sh_symbol">);</span>
System<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">println</span><span class="sh_symbol">(</span>cow<span class="sh_symbol">);</span>
cow<span class="sh_symbol">.</span><span class="sh_function">liveHour</span><span class="sh_symbol">();</span>
cow<span class="sh_symbol">.</span><span class="sh_function">liveHour</span><span class="sh_symbol">();</span>
System<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">println</span><span class="sh_symbol">(</span>cow<span class="sh_symbol">);</span>
cow<span class="sh_symbol">.</span><span class="sh_function">milk</span><span class="sh_symbol">();</span>
System<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">println</span><span class="sh_symbol">(</span>cow<span class="sh_symbol">);</span>
</pre>

<p>The program print output can be like the following.</p>



<pre>Liekki 0.0/23.0
Liekki 7.0/23.0
Liekki 0.0/23.0
Ammu 0.0/35.0
Ammu 9.0/35.0
Ammu 0.0/35.0
</pre>


<h4>Exercise 31.3: MilkingRobot</h4>
<p>In modern dairy farms, milking robots handle the milking. The milking robot has to be connected to the bulk tank in order to milk an udder:
</p>

  <ul><li><strong>public MilkingRobot()</strong> creates a new milking robot</li>
    <li><strong>BulkTank getBulkTank()</strong> returns the connected bulk tank, or a <code>null</code> reference, if the tank hasn't been installed</li>
    <li><strong>void setBulkTank(BulkTank tank)</strong> installs the parameter bulk tank to the milking robot</li>
    <li><strong>void milk(Milkable milkable)</strong> milks the cow and fills the connected bulk tank; the method returns an <code>IllegalStateException</code> is no tank has been fixed </li>
  </ul><p>Implement the class MilkingRobot, and test it using the following program body. Make sure that the milking robot can milk all the objects which implement the interface Milkable!</p>

<pre class="sh_java sh_sourceCode">        <span class="sh_usertype">MilkingRobot</span><span class="sh_normal"> </span>milkingRobot <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">MilkingRobot</span><span class="sh_symbol">();</span>
        <span class="sh_usertype">Cow</span><span class="sh_normal"> </span>cow <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">Cow</span><span class="sh_symbol">();</span>
        milkingRobot<span class="sh_symbol">.</span><span class="sh_function">milk</span><span class="sh_symbol">(</span>cow<span class="sh_symbol">);</span>
</pre>

<pre>Exception in thread "main" java.lang.IllegalStateException: The MilkingRobot hasn't been installed
        at farmsimulator.MilkingRobot.milk(MilkingRobot.java:17)
        at farmsimulator.Main.main(Main.java:9)
Java Result: 1
</pre>

<pre class="sh_java sh_sourceCode"><span class="sh_usertype">MilkingRobot</span><span class="sh_normal"> </span>milkingRobot <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">MilkingRobot</span><span class="sh_symbol">();</span>
<span class="sh_usertype">Cow</span><span class="sh_normal"> </span>cow <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">Cow</span><span class="sh_symbol">();</span>
System<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">println</span><span class="sh_symbol">(</span><span class="sh_string">""</span><span class="sh_symbol">);</span>

<span class="sh_usertype">BulkTank</span><span class="sh_normal"> </span>tank <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">BulkTank</span><span class="sh_symbol">();</span>
milkingRobot<span class="sh_symbol">.</span><span class="sh_function">setBulkTank</span><span class="sh_symbol">(</span>tank<span class="sh_symbol">);</span>
System<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">println</span><span class="sh_symbol">(</span><span class="sh_string">"Bulk tank: "</span> <span class="sh_symbol">+</span> tank<span class="sh_symbol">);</span>

<span class="sh_keyword">for</span><span class="sh_symbol">(</span><span class="sh_type">int</span> i <span class="sh_symbol">=</span> <span class="sh_number">0</span><span class="sh_symbol">;</span> i <span class="sh_symbol">&lt;</span> <span class="sh_number">2</span><span class="sh_symbol">;</span> i<span class="sh_symbol">++)</span> <span class="sh_cbracket">{</span>
    System<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">println</span><span class="sh_symbol">(</span>cow<span class="sh_symbol">);</span>
    System<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">println</span><span class="sh_symbol">(</span><span class="sh_string">"Living.."</span><span class="sh_symbol">);</span>
    <span class="sh_keyword">for</span><span class="sh_symbol">(</span><span class="sh_type">int</span> j <span class="sh_symbol">=</span> <span class="sh_number">0</span><span class="sh_symbol">;</span> j <span class="sh_symbol">&lt;</span> <span class="sh_number">5</span><span class="sh_symbol">;</span> j<span class="sh_symbol">++)</span> <span class="sh_cbracket">{</span>
        cow<span class="sh_symbol">.</span><span class="sh_function">liveHour</span><span class="sh_symbol">();</span>
    <span class="sh_cbracket">}</span>
    System<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">println</span><span class="sh_symbol">(</span>cow<span class="sh_symbol">);</span>

    System<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">println</span><span class="sh_symbol">(</span><span class="sh_string">"Milking..."</span><span class="sh_symbol">);</span>
    milkingRobot<span class="sh_symbol">.</span><span class="sh_function">milk</span><span class="sh_symbol">(</span>cow<span class="sh_symbol">);</span>
    System<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">println</span><span class="sh_symbol">(</span><span class="sh_string">"Bulk tank: "</span> <span class="sh_symbol">+</span> tank<span class="sh_symbol">);</span>
    System<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">println</span><span class="sh_symbol">(</span><span class="sh_string">""</span><span class="sh_symbol">);</span>
<span class="sh_cbracket">}</span>
</pre>

<p>The print output of the program can look like the following:</p>

<pre>Bulk tank: 0.0/2000.0
Mella 0.0/23.0
Living..
Mella 6.2/23.0
Milking...
Bulk tank: 6.2/2000.0

Mella 0.0/23.0
Living..
Mella 7.8/23.0
Milking...
Bulk tank: 14.0/2000.0
</pre>

<h4>Exercise 31.4: Barn</h4>

<p>Cows are kept (and in this case milked) in barns. The original barns have room for one milking robot. Note that when milking robots are installed, they are connected to a specific barn's bulk tank. If a barn does not have a milking robot, it can't be used to handle the cow, either. Implement the class <code>Barn</code> with the following constructor and methods:
</p>

  <ul><li><strong>public Barn(BulkTank tank)</strong></li>
    <li><strong>public BulkTank getBulkTank()</strong> returns the barn's bulk tank</li>
    <li><strong>public void installMilkingRobot(MilkingRobot milkingRobot)</strong> installs a milking robot and connects it to the barn bulk tank</li>
    <li><strong>public void takeCareOf(Cow cow)</strong> milks the parameter cow with the help of the milking robot, the method throws an <code>IllegalStateException</code> if the milking robot hasn't been installed</li>
    <li><strong>public void takeCareOf(Collection&lt;Cow&gt; cows)</strong> milks the parameter cows with the help of the milking robot, the method throws an <code>IllegalStateException</code> if the milking robot hasn't been installed</li>
    <li><strong>public String toString()</strong> returns the state of the bulk tank contained by the barn</li>
  </ul><p><code>Collection</code> is Java's own interface, and it represents collections' behaviour. For instance, the classes <code>ArrayList</code> and <code>LinkedList</code> implement the interface <code>Collection</code>. All instances of classes which implement <code>Collection</code> can be iterated with a for-each construction.</p>

<p>Test your class <code>Barn</code> with the help of the following program body. Do not pay to much attention to the class <code>LinkedList</code>; apparently, it works as <code>ArrayList</code>, but the implemantation in encapsulates is slightly different. More information about this in the data structures course!
</p>

<pre class="sh_java sh_sourceCode"><span class="sh_usertype">Barn</span><span class="sh_normal"> </span>barn <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">Barn</span><span class="sh_symbol">(</span><span class="sh_keyword">new</span> <span class="sh_function">BulkTank</span><span class="sh_symbol">());</span>
System<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">println</span><span class="sh_symbol">(</span><span class="sh_string">"Barn: "</span> <span class="sh_symbol">+</span> barn<span class="sh_symbol">);</span>

<span class="sh_usertype">MilkingRobot</span><span class="sh_normal"> </span>robot <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">MilkingRobot</span><span class="sh_symbol">();</span>
barn<span class="sh_symbol">.</span><span class="sh_function">installMilkingRobot</span><span class="sh_symbol">(</span>robot<span class="sh_symbol">);</span>

<span class="sh_usertype">Cow</span><span class="sh_normal"> </span>ammu <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">Cow</span><span class="sh_symbol">();</span>
ammu<span class="sh_symbol">.</span><span class="sh_function">liveHour</span><span class="sh_symbol">();</span>
ammu<span class="sh_symbol">.</span><span class="sh_function">liveHour</span><span class="sh_symbol">();</span>

barn<span class="sh_symbol">.</span><span class="sh_function">takeCareOf</span><span class="sh_symbol">(</span>ammu<span class="sh_symbol">);</span>
System<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">println</span><span class="sh_symbol">(</span><span class="sh_string">"Barn: "</span> <span class="sh_symbol">+</span> barn<span class="sh_symbol">);</span>

<span class="sh_usertype">LinkedList&lt;Cow&gt;</span><span class="sh_normal"> </span>cowList <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> LinkedList<span class="sh_symbol">&lt;</span>Cow<span class="sh_symbol">&gt;();</span>
cowList<span class="sh_symbol">.</span><span class="sh_function">add</span><span class="sh_symbol">(</span>ammu<span class="sh_symbol">);</span>
cowList<span class="sh_symbol">.</span><span class="sh_function">add</span><span class="sh_symbol">(</span><span class="sh_keyword">new</span> <span class="sh_function">Cow</span><span class="sh_symbol">());</span>

<span class="sh_keyword">for</span><span class="sh_symbol">(</span><span class="sh_usertype">Cow</span><span class="sh_normal"> </span>cow<span class="sh_symbol">:</span> cowList<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span>
    cow<span class="sh_symbol">.</span><span class="sh_function">liveHour</span><span class="sh_symbol">();</span>
    cow<span class="sh_symbol">.</span><span class="sh_function">liveHour</span><span class="sh_symbol">();</span>
<span class="sh_cbracket">}</span>

barn<span class="sh_symbol">.</span><span class="sh_function">takeCareOf</span><span class="sh_symbol">(</span>cowList<span class="sh_symbol">);</span>
System<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">println</span><span class="sh_symbol">(</span><span class="sh_string">"Barn: "</span> <span class="sh_symbol">+</span> barn<span class="sh_symbol">);</span>
</pre>

<p>
The print output should look like the following:
</p>

<pre>Barn: 0.0/2000.0
Barn: 2.8/2000.0
Barn: 9.6/2000.0
</pre>

<h4>Exercise 31.5: Farm</h4>

<p>Farms have got an owner, a barn and a herd of cows. Farm also implements our old interface <code>Alive</code>: calling the method <code>liveHour</code> makes all the cows of the farm live for an hour.
   You also have to create method <code>manageCows</code> which calls Barn's method <code>takeCareOf</code> so that all cows are milked. Implement your class Farm, and make it work according to the following example.
</p>

<pre class="sh_java sh_sourceCode"><span class="sh_usertype">Farm</span><span class="sh_normal"> </span>farm <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">Farm</span><span class="sh_symbol">(</span><span class="sh_string">"Esko"</span><span class="sh_symbol">,</span> <span class="sh_keyword">new</span> <span class="sh_function">Barn</span><span class="sh_symbol">(</span><span class="sh_keyword">new</span> <span class="sh_function">BulkTank</span><span class="sh_symbol">()));</span>
System<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">println</span><span class="sh_symbol">(</span>farm<span class="sh_symbol">);</span>

System<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">println</span><span class="sh_symbol">(</span>farm<span class="sh_symbol">.</span><span class="sh_function">getOwner</span><span class="sh_symbol">()</span> <span class="sh_symbol">+</span> <span class="sh_string">" is a tough guy!"</span><span class="sh_symbol">);</span>
</pre>

<p>
Expected print output:
</p>

<pre>Farm owner: Esko
Barn bulk tank: 0.0/2000.0
No cows.
Esko is a tough guy!
</pre>


<pre class="sh_java sh_sourceCode"><span class="sh_usertype">Farm</span><span class="sh_normal"> </span>farm <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">Farm</span><span class="sh_symbol">(</span><span class="sh_string">"Esko"</span><span class="sh_symbol">,</span> <span class="sh_keyword">new</span> <span class="sh_function">Barn</span><span class="sh_symbol">(</span><span class="sh_keyword">new</span> <span class="sh_function">BulkTank</span><span class="sh_symbol">()));</span>
farm<span class="sh_symbol">.</span><span class="sh_function">addCow</span><span class="sh_symbol">(</span><span class="sh_keyword">new</span> <span class="sh_function">Cow</span><span class="sh_symbol">());</span>
farm<span class="sh_symbol">.</span><span class="sh_function">addCow</span><span class="sh_symbol">(</span><span class="sh_keyword">new</span> <span class="sh_function">Cow</span><span class="sh_symbol">());</span>
farm<span class="sh_symbol">.</span><span class="sh_function">addCow</span><span class="sh_symbol">(</span><span class="sh_keyword">new</span> <span class="sh_function">Cow</span><span class="sh_symbol">());</span>
System<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">println</span><span class="sh_symbol">(</span>farm<span class="sh_symbol">);</span>
</pre>


<p>
Expected print output:
</p>

<pre>Farm owner: Esko
Barn bulk tank: 0.0/2000.0
Animals:
        Naatti 0.0/19.0
        Hilke 0.0/30.0
        Sylkki 0.0/29.0
</pre>

<pre class="sh_java sh_sourceCode"><span class="sh_usertype">Farm</span><span class="sh_normal"> </span>farm <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">Farm</span><span class="sh_symbol">(</span><span class="sh_string">"Esko"</span><span class="sh_symbol">,</span> <span class="sh_keyword">new</span> <span class="sh_function">Barn</span><span class="sh_symbol">(</span><span class="sh_keyword">new</span> <span class="sh_function">BulkTank</span><span class="sh_symbol">()));</span>

farm<span class="sh_symbol">.</span><span class="sh_function">addCow</span><span class="sh_symbol">(</span><span class="sh_keyword">new</span> <span class="sh_function">Cow</span><span class="sh_symbol">());</span>
farm<span class="sh_symbol">.</span><span class="sh_function">addCow</span><span class="sh_symbol">(</span><span class="sh_keyword">new</span> <span class="sh_function">Cow</span><span class="sh_symbol">());</span>
farm<span class="sh_symbol">.</span><span class="sh_function">addCow</span><span class="sh_symbol">(</span><span class="sh_keyword">new</span> <span class="sh_function">Cow</span><span class="sh_symbol">());</span>

farm<span class="sh_symbol">.</span><span class="sh_function">liveHour</span><span class="sh_symbol">();</span>
farm<span class="sh_symbol">.</span><span class="sh_function">liveHour</span><span class="sh_symbol">();</span>
System<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">println</span><span class="sh_symbol">(</span>farm<span class="sh_symbol">);</span>
</pre>

<p>
Expected print output:
</p>

<pre>Farm owner: Esko
Barn bulk tank: 0.0/2000.0
Animals:
        Heluna 2.0/17.0
        Rima 3.0/32.0
        Ilo 3.0/25.0
</pre>

<pre class="sh_java sh_sourceCode"><span class="sh_usertype">Farm</span><span class="sh_normal"> </span>farm <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">Farm</span><span class="sh_symbol">(</span><span class="sh_string">"Esko"</span><span class="sh_symbol">,</span> <span class="sh_keyword">new</span> <span class="sh_function">Barn</span><span class="sh_symbol">(</span><span class="sh_keyword">new</span> <span class="sh_function">BulkTank</span><span class="sh_symbol">()));</span>
<span class="sh_usertype">MilkingRobot</span><span class="sh_normal"> </span>robot <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">MilkingRobot</span><span class="sh_symbol">();</span>
farm<span class="sh_symbol">.</span><span class="sh_function">installMilkingRobot</span><span class="sh_symbol">(</span>robot<span class="sh_symbol">);</span>

farm<span class="sh_symbol">.</span><span class="sh_function">addCow</span><span class="sh_symbol">(</span><span class="sh_keyword">new</span> <span class="sh_function">Cow</span><span class="sh_symbol">());</span>
farm<span class="sh_symbol">.</span><span class="sh_function">addCow</span><span class="sh_symbol">(</span><span class="sh_keyword">new</span> <span class="sh_function">Cow</span><span class="sh_symbol">());</span>
farm<span class="sh_symbol">.</span><span class="sh_function">addCow</span><span class="sh_symbol">(</span><span class="sh_keyword">new</span> <span class="sh_function">Cow</span><span class="sh_symbol">());</span>


farm<span class="sh_symbol">.</span><span class="sh_function">liveHour</span><span class="sh_symbol">();</span>
farm<span class="sh_symbol">.</span><span class="sh_function">liveHour</span><span class="sh_symbol">();</span>

farm<span class="sh_symbol">.</span><span class="sh_function">manageCows</span><span class="sh_symbol">();</span>

System<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">println</span><span class="sh_symbol">(</span>farm<span class="sh_symbol">);</span>
</pre>

<p>
Expected print output:
</p>

<pre>Farm owner: Esko
Barn bulk tank: 18.0/2000.0
Animals:
        Hilke 0.0/30.0
        Sylkki 0.0/35.0
        Hento 0.0/34.0
</pre>

</div>


<h3> An Abstract Class</h3>

        <p>Abstract classes combine interfaces and inheritance. They do not produce instances, but you can create instances of their subclasses. An abstract class can contain both normal and abstract methods, the first containing the method body, the second having only the method definition. The implementation of the abstract methods is left to the inheriting class. In general, we use abstract classes when the object they represent is not a clear, self-defined concept. In such cases, it is not possible to create instances of it.</p>

        <p>Both when we define abstract classes and abstract methods, we use the keyword <code>abstract</code>. An abstract class is defined by the statement <code>public abstract class <em>ClassName</em></code>, whereas an abstract method is defined by <code>public abstract <em>returnType</em> <em>methodName</em></code>. Let's consider the following abstract class <code>Operation</code>, which provides a framework for operations, and their excecutions.</p>

<pre class="sh_java sh_sourceCode"><span class="sh_keyword">public</span> <span class="sh_keyword">abstract</span> <span class="sh_keyword">class</span><span class="sh_normal"> </span><span class="sh_classname">Operation</span> <span class="sh_cbracket">{</span>

    <span class="sh_keyword">private</span> <span class="sh_usertype">String</span><span class="sh_normal"> </span>name<span class="sh_symbol">;</span>

    <span class="sh_keyword">public</span> <span class="sh_function">Operation</span><span class="sh_symbol">(</span><span class="sh_usertype">String</span><span class="sh_normal"> </span>name<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span>
        <span class="sh_keyword">this</span><span class="sh_symbol">.</span>name <span class="sh_symbol">=</span> name<span class="sh_symbol">;</span>
    <span class="sh_cbracket">}</span>

    <span class="sh_keyword">public</span> <span class="sh_usertype">String</span><span class="sh_normal"> </span><span class="sh_function">getName</span><span class="sh_symbol">()</span> <span class="sh_cbracket">{</span>
        <span class="sh_keyword">return</span> <span class="sh_keyword">this</span><span class="sh_symbol">.</span>name<span class="sh_symbol">;</span>
    <span class="sh_cbracket">}</span>

    <span class="sh_keyword">public</span> <span class="sh_keyword">abstract</span> <span class="sh_type">void</span> <span class="sh_function">execute</span><span class="sh_symbol">(</span><span class="sh_usertype">Scanner</span><span class="sh_normal"> </span>reader<span class="sh_symbol">);</span>
<span class="sh_cbracket">}</span>
</pre>

        <p>The abstract class <code>Operation</code> works as a framework to excetute different operations. For instance, an addition can be implemented by inheriting the class <code>Operation</code> in the following way.</p>

<pre class="sh_java sh_sourceCode"><span class="sh_keyword">public</span> <span class="sh_keyword">class</span><span class="sh_normal"> </span><span class="sh_classname">Addition</span> <span class="sh_keyword">extends</span> Operation <span class="sh_cbracket">{</span>

    <span class="sh_keyword">public</span> <span class="sh_function">Addition</span><span class="sh_symbol">()</span> <span class="sh_cbracket">{</span>
        <span class="sh_keyword">super</span><span class="sh_symbol">(</span><span class="sh_string">"Addition"</span><span class="sh_symbol">);</span>
    <span class="sh_cbracket">}</span>

    @Override
    <span class="sh_keyword">public</span> <span class="sh_type">void</span> <span class="sh_function">execute</span><span class="sh_symbol">(</span><span class="sh_usertype">Scanner</span><span class="sh_normal"> </span>reader<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span>
        System<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">print</span><span class="sh_symbol">(</span><span class="sh_string">"Give the first number: "</span><span class="sh_symbol">);</span>
        <span class="sh_type">int</span> first <span class="sh_symbol">=</span> Integer<span class="sh_symbol">.</span><span class="sh_function">parseInt</span><span class="sh_symbol">(</span>reader<span class="sh_symbol">.</span><span class="sh_function">nextLine</span><span class="sh_symbol">());</span>
        System<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">print</span><span class="sh_symbol">(</span><span class="sh_string">"Give the second number: "</span><span class="sh_symbol">);</span>
        <span class="sh_type">int</span> second <span class="sh_symbol">=</span> Integer<span class="sh_symbol">.</span><span class="sh_function">parseInt</span><span class="sh_symbol">(</span>reader<span class="sh_symbol">.</span><span class="sh_function">nextLine</span><span class="sh_symbol">());</span>

        System<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">println</span><span class="sh_symbol">(</span><span class="sh_string">"The sum is "</span> <span class="sh_symbol">+</span> <span class="sh_symbol">(</span>first <span class="sh_symbol">+</span> second<span class="sh_symbol">));</span>
    <span class="sh_cbracket">}</span>
<span class="sh_cbracket">}</span>
</pre>

        <p>Because all classes which descend from <code>Operation</code> are also Operation-type, we can create a user interface based on <code>Operation</code>-type variables. The following class <code>UserInterface</code> contains a list of operations and a reader. The operations can be added dynamically in the user interface.</p>

<pre class="sh_java sh_sourceCode"><span class="sh_keyword">public</span> <span class="sh_keyword">class</span><span class="sh_normal"> </span><span class="sh_classname">UserInterface</span> <span class="sh_cbracket">{</span>

    <span class="sh_keyword">private</span> <span class="sh_usertype">Scanner</span><span class="sh_normal"> </span>reader<span class="sh_symbol">;</span>
    <span class="sh_keyword">private</span> <span class="sh_usertype">List&lt;Operation&gt;</span><span class="sh_normal"> </span>operations<span class="sh_symbol">;</span>

    <span class="sh_keyword">public</span> <span class="sh_function">UserInterface</span><span class="sh_symbol">(</span><span class="sh_usertype">Scanner</span><span class="sh_normal"> </span>reader<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span>
        <span class="sh_keyword">this</span><span class="sh_symbol">.</span>reader <span class="sh_symbol">=</span> reader<span class="sh_symbol">;</span>
        <span class="sh_keyword">this</span><span class="sh_symbol">.</span>operations <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> ArrayList<span class="sh_symbol">&lt;</span>Operation<span class="sh_symbol">&gt;();</span>
    <span class="sh_cbracket">}</span>

    <span class="sh_keyword">public</span> <span class="sh_type">void</span> <span class="sh_function">addOperation</span><span class="sh_symbol">(</span><span class="sh_usertype">Operation</span><span class="sh_normal"> </span>operation<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span>
        <span class="sh_keyword">this</span><span class="sh_symbol">.</span>operations<span class="sh_symbol">.</span><span class="sh_function">add</span><span class="sh_symbol">(</span>operation<span class="sh_symbol">);</span>
    <span class="sh_cbracket">}</span>

    <span class="sh_keyword">public</span> <span class="sh_type">void</span> <span class="sh_function">start</span><span class="sh_symbol">()</span> <span class="sh_cbracket">{</span>
        <span class="sh_keyword">while</span> <span class="sh_symbol">(</span><span class="sh_keyword">true</span><span class="sh_symbol">)</span> <span class="sh_cbracket">{</span>
            <span class="sh_function">printOperations</span><span class="sh_symbol">();</span>
            System<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">println</span><span class="sh_symbol">(</span><span class="sh_string">"Choice: "</span><span class="sh_symbol">);</span>

            <span class="sh_usertype">String</span><span class="sh_normal"> </span>choice <span class="sh_symbol">=</span> <span class="sh_keyword">this</span><span class="sh_symbol">.</span>reader<span class="sh_symbol">.</span><span class="sh_function">nextLine</span><span class="sh_symbol">();</span>
            <span class="sh_keyword">if</span> <span class="sh_symbol">(</span>choice<span class="sh_symbol">.</span><span class="sh_function">equals</span><span class="sh_symbol">(</span><span class="sh_string">"0"</span><span class="sh_symbol">))</span> <span class="sh_cbracket">{</span>
                <span class="sh_keyword">break</span><span class="sh_symbol">;</span>
            <span class="sh_cbracket">}</span>

            <span class="sh_function">executeOperation</span><span class="sh_symbol">(</span>choice<span class="sh_symbol">);</span>
            System<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">println</span><span class="sh_symbol">();</span>
        <span class="sh_cbracket">}</span>
    <span class="sh_cbracket">}</span>

    <span class="sh_keyword">private</span> <span class="sh_type">void</span> <span class="sh_function">printOperations</span><span class="sh_symbol">()</span> <span class="sh_cbracket">{</span>
        System<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">println</span><span class="sh_symbol">(</span><span class="sh_string">"</span><span class="sh_specialchar">\t</span><span class="sh_string">0: Quit"</span><span class="sh_symbol">);</span>
        <span class="sh_keyword">for</span> <span class="sh_symbol">(</span><span class="sh_type">int</span> i <span class="sh_symbol">=</span> <span class="sh_number">0</span><span class="sh_symbol">;</span> i <span class="sh_symbol">&lt;</span> <span class="sh_keyword">this</span><span class="sh_symbol">.</span>operations<span class="sh_symbol">.</span><span class="sh_function">size</span><span class="sh_symbol">();</span> i<span class="sh_symbol">++)</span> <span class="sh_cbracket">{</span>
            <span class="sh_usertype">String</span><span class="sh_normal"> </span>operationName <span class="sh_symbol">=</span> <span class="sh_keyword">this</span><span class="sh_symbol">.</span>operations<span class="sh_symbol">.</span><span class="sh_function">get</span><span class="sh_symbol">(</span>i<span class="sh_symbol">).</span><span class="sh_function">getName</span><span class="sh_symbol">();</span>
            System<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">println</span><span class="sh_symbol">(</span><span class="sh_string">"</span><span class="sh_specialchar">\t</span><span class="sh_string">"</span> <span class="sh_symbol">+</span> <span class="sh_symbol">(</span>i <span class="sh_symbol">+</span> <span class="sh_number">1</span><span class="sh_symbol">)</span> <span class="sh_symbol">+</span> <span class="sh_string">": "</span> <span class="sh_symbol">+</span> operationName<span class="sh_symbol">);</span>
        <span class="sh_cbracket">}</span>
    <span class="sh_cbracket">}</span>

    <span class="sh_keyword">private</span> <span class="sh_type">void</span> <span class="sh_function">executeOperation</span><span class="sh_symbol">(</span><span class="sh_usertype">String</span><span class="sh_normal"> </span>choice<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span>
        <span class="sh_type">int</span> operation <span class="sh_symbol">=</span> Integer<span class="sh_symbol">.</span><span class="sh_function">parseInt</span><span class="sh_symbol">(</span>choice<span class="sh_symbol">);</span>

        <span class="sh_usertype">Operation</span><span class="sh_normal"> </span>chosen <span class="sh_symbol">=</span> <span class="sh_keyword">this</span><span class="sh_symbol">.</span>operations<span class="sh_symbol">.</span><span class="sh_function">get</span><span class="sh_symbol">(</span>operation <span class="sh_symbol">-</span> <span class="sh_number">1</span><span class="sh_symbol">);</span>
        chosen<span class="sh_symbol">.</span><span class="sh_function">execute</span><span class="sh_symbol">(</span>reader<span class="sh_symbol">);</span>
    <span class="sh_cbracket">}</span>
<span class="sh_cbracket">}</span>
</pre>

        <p>The user interface works in the following way:</p>

<pre class="sh_java sh_sourceCode">        <span class="sh_usertype">UserInterface</span><span class="sh_normal"> </span>ui <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">UserInterface</span><span class="sh_symbol">(</span><span class="sh_keyword">new</span> <span class="sh_function">Scanner</span><span class="sh_symbol">(</span>System<span class="sh_symbol">.</span>in<span class="sh_symbol">));</span>
        ui<span class="sh_symbol">.</span><span class="sh_function">addOperation</span><span class="sh_symbol">(</span><span class="sh_keyword">new</span> <span class="sh_function">Addition</span><span class="sh_symbol">());</span>

        ui<span class="sh_symbol">.</span><span class="sh_function">start</span><span class="sh_symbol">();</span>
</pre>

<pre>Operations:
        0: Quit
        1: Addition
Choice: <font color="red">1</font>
Give the first number: <font color="red">8</font>
Give the second number: <font color="red">12</font>
The sum is 20

Operations:
        0: Quit
        1: Addition
Choice: <font color="red">0</font>
</pre>

        <p>The difference between interfaces and abstract classes is that abstract classes provide the program with more structure. Because it is possible to define the functionality of abstract classes, we can use them to define the default implementation, for instance. The user interface above made use of a definition of the abstract class to store the operation name.</p>


<div class="tehtavat">
    <p class="heading" id="e32">Exercise 32: Different Boxes</p>

  <p>Together with the exercise body, you find the classes <code>Thing</code> and <code>Box</code>. The class <code>Box</code> is abstract, and it is programmed so that adding things always implies calling the method <code>add</code>. The <code>add</code> method, resposible of adding one thing, is abstract, and any box which inherits the class <code>Box</code> has to implement the method <code>add</code>. Your task is modifying the class <code>Thing</code> and implementing various different boxes based on <code>Box</code>.</p>

  <p>Add all new classes to the package <code>boxes</code>.</p>


<pre class="sh_java sh_sourceCode"><span class="sh_preproc">package</span> boxes<span class="sh_symbol">;</span>

<span class="sh_preproc">import</span> java<span class="sh_symbol">.</span>util<span class="sh_symbol">.</span>Collection<span class="sh_symbol">;</span>

<span class="sh_keyword">public</span> <span class="sh_keyword">abstract</span> <span class="sh_keyword">class</span><span class="sh_normal"> </span><span class="sh_classname">Box</span> <span class="sh_cbracket">{</span>

    <span class="sh_keyword">public</span> <span class="sh_keyword">abstract</span> <span class="sh_type">void</span> <span class="sh_function">add</span><span class="sh_symbol">(</span><span class="sh_usertype">Thing</span><span class="sh_normal"> </span>thing<span class="sh_symbol">);</span>

    <span class="sh_keyword">public</span> <span class="sh_type">void</span> <span class="sh_function">add</span><span class="sh_symbol">(</span><span class="sh_usertype">Collection&lt;Thing&gt;</span><span class="sh_normal"> </span>things<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span>
        <span class="sh_keyword">for</span> <span class="sh_symbol">(</span><span class="sh_usertype">Thing</span><span class="sh_normal"> </span>thing <span class="sh_symbol">:</span> things<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span>
            <span class="sh_function">add</span><span class="sh_symbol">(</span>thing<span class="sh_symbol">);</span>
        <span class="sh_cbracket">}</span>
    <span class="sh_cbracket">}</span>

    <span class="sh_keyword">public</span> <span class="sh_keyword">abstract</span> <span class="sh_type">boolean</span> <span class="sh_function">isInTheBox</span><span class="sh_symbol">(</span><span class="sh_usertype">Thing</span><span class="sh_normal"> </span>thing<span class="sh_symbol">);</span>
<span class="sh_cbracket">}</span>
</pre>

<h4>Exercise 32.1: Modifications to Thing</h4>

  <p>Add an inspection to the constructor of <code>Thing</code>, to make sure that the thing's weight is never negative (weight 0 is accepted). If the weight is negative, the constructor has to throw an <code>IllegalArgumentException</code>. Also implement the methods <code>equals</code> and <code>hashCode</code> in the class <code>Thing</code>, allowing you to use the <code>contains</code> method of different lists and collections. Implement the methods without taking into consideration the value of the object variable <code>weight</code>. <em>Of course, you can use NetBeans functionality to implement equals and hashCode.</em></p>

<h4>Exercise 32.2: Maximum Weight Box</h4>

  <p>Implement the class <code>MaxWeightBox</code> in the package <code>boxes</code>; the class inherits <code>Box</code>. MaxWeightBox has the constructor <code>public MaxWeightBox(int maxWeight)</code>, which determines the box maximum weight. Things can be added to MaxWeightBox if and only if the thing weight does not exceed the box weight.</p>

<pre class="sh_java sh_sourceCode">        <span class="sh_usertype">MaxWeightBox</span><span class="sh_normal"> </span>coffeeBox <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">MaxWeightBox</span><span class="sh_symbol">(</span><span class="sh_number">10</span><span class="sh_symbol">);</span>
        coffeeBox<span class="sh_symbol">.</span><span class="sh_function">add</span><span class="sh_symbol">(</span><span class="sh_keyword">new</span> <span class="sh_function">Thing</span><span class="sh_symbol">(</span><span class="sh_string">"Saludo"</span><span class="sh_symbol">,</span> <span class="sh_number">5</span><span class="sh_symbol">));</span>
        coffeeBox<span class="sh_symbol">.</span><span class="sh_function">add</span><span class="sh_symbol">(</span><span class="sh_keyword">new</span> <span class="sh_function">Thing</span><span class="sh_symbol">(</span><span class="sh_string">"Pirkka"</span><span class="sh_symbol">,</span> <span class="sh_number">5</span><span class="sh_symbol">));</span>
        coffeeBox<span class="sh_symbol">.</span><span class="sh_function">add</span><span class="sh_symbol">(</span><span class="sh_keyword">new</span> <span class="sh_function">Thing</span><span class="sh_symbol">(</span><span class="sh_string">"Kopi Luwak"</span><span class="sh_symbol">,</span> <span class="sh_number">5</span><span class="sh_symbol">));</span>

        System<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">println</span><span class="sh_symbol">(</span>coffeeBox<span class="sh_symbol">.</span><span class="sh_function">isInTheBox</span><span class="sh_symbol">(</span><span class="sh_keyword">new</span> <span class="sh_function">Thing</span><span class="sh_symbol">(</span><span class="sh_string">"Saludo"</span><span class="sh_symbol">)));</span>
        System<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">println</span><span class="sh_symbol">(</span>coffeeBox<span class="sh_symbol">.</span><span class="sh_function">isInTheBox</span><span class="sh_symbol">(</span><span class="sh_keyword">new</span> <span class="sh_function">Thing</span><span class="sh_symbol">(</span><span class="sh_string">"Pirkka"</span><span class="sh_symbol">)));</span>
        System<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">println</span><span class="sh_symbol">(</span>coffeeBox<span class="sh_symbol">.</span><span class="sh_function">isInTheBox</span><span class="sh_symbol">(</span><span class="sh_keyword">new</span> <span class="sh_function">Thing</span><span class="sh_symbol">(</span><span class="sh_string">"Kopi Luwak"</span><span class="sh_symbol">)));</span>
</pre>

<pre>true
true
false
</pre>

<h4>Exercise 32.3: One-Thing Box and Black-Hole Box</h4>

        <p>Next, implement the class <code>OneThingBox</code> in the package <code>boxes</code>; the class inherits <code>Box</code>. OneThingBox has the constructor <code>public OneThingBox()</code>, and only one thing can fit there. If the box already contains one thing, this should not be changed. The weight of the added thing is not important.</p>

<pre class="sh_java sh_sourceCode">        <span class="sh_usertype">OneThingBox</span><span class="sh_normal"> </span>box <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">OneThingBox</span><span class="sh_symbol">();</span>
        box<span class="sh_symbol">.</span><span class="sh_function">add</span><span class="sh_symbol">(</span><span class="sh_keyword">new</span> <span class="sh_function">Thing</span><span class="sh_symbol">(</span><span class="sh_string">"Saludo"</span><span class="sh_symbol">,</span> <span class="sh_number">5</span><span class="sh_symbol">));</span>
        box<span class="sh_symbol">.</span><span class="sh_function">add</span><span class="sh_symbol">(</span><span class="sh_keyword">new</span> <span class="sh_function">Thing</span><span class="sh_symbol">(</span><span class="sh_string">"Pirkka"</span><span class="sh_symbol">,</span> <span class="sh_number">5</span><span class="sh_symbol">));</span>

        System<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">println</span><span class="sh_symbol">(</span>box<span class="sh_symbol">.</span><span class="sh_function">isInTheBox</span><span class="sh_symbol">(</span><span class="sh_keyword">new</span> <span class="sh_function">Thing</span><span class="sh_symbol">(</span><span class="sh_string">"Saludo"</span><span class="sh_symbol">)));</span>
        System<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">println</span><span class="sh_symbol">(</span>box<span class="sh_symbol">.</span><span class="sh_function">isInTheBox</span><span class="sh_symbol">(</span><span class="sh_keyword">new</span> <span class="sh_function">Thing</span><span class="sh_symbol">(</span><span class="sh_string">"Pirkka"</span><span class="sh_symbol">)));</span>
</pre>

<pre>true
false
</pre>


        <p>Next, implement the class <code>BlackHoleBox</code> in the package <code>boxes</code>; the class inherits <code>Box</code>. BlackHoleBox has the constructor <code>public BlackHoleBox()</code>; any thing can be added to a black-hole box, but none will be found when you'll look for them. In other words, adding things must always work, but the method <code>isInTheBox</code> has to return always false.</p>

<pre class="sh_java sh_sourceCode">        <span class="sh_usertype">BlackHoleBox</span><span class="sh_normal"> </span>box <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">BlackHoleBox</span><span class="sh_symbol">();</span>
        box<span class="sh_symbol">.</span><span class="sh_function">add</span><span class="sh_symbol">(</span><span class="sh_keyword">new</span> <span class="sh_function">Thing</span><span class="sh_symbol">(</span><span class="sh_string">"Saludo"</span><span class="sh_symbol">,</span> <span class="sh_number">5</span><span class="sh_symbol">));</span>
        box<span class="sh_symbol">.</span><span class="sh_function">add</span><span class="sh_symbol">(</span><span class="sh_keyword">new</span> <span class="sh_function">Thing</span><span class="sh_symbol">(</span><span class="sh_string">"Pirkka"</span><span class="sh_symbol">,</span> <span class="sh_number">5</span><span class="sh_symbol">));</span>

        System<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">println</span><span class="sh_symbol">(</span>box<span class="sh_symbol">.</span><span class="sh_function">isInTheBox</span><span class="sh_symbol">(</span><span class="sh_keyword">new</span> <span class="sh_function">Thing</span><span class="sh_symbol">(</span><span class="sh_string">"Saludo"</span><span class="sh_symbol">)));</span>
        System<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">println</span><span class="sh_symbol">(</span>box<span class="sh_symbol">.</span><span class="sh_function">isInTheBox</span><span class="sh_symbol">(</span><span class="sh_keyword">new</span> <span class="sh_function">Thing</span><span class="sh_symbol">(</span><span class="sh_string">"Pirkka"</span><span class="sh_symbol">)));</span>
</pre>

<pre>false
false
</pre>



</div>

<h3> Removing Objects from an ArrayList</h3>

<p>In the following exercise we see what you may end up to, when you want to remove a part of the list objects while parsing an ArrayList:</p>

<pre class="sh_java sh_sourceCode">   <span class="sh_comment">// somewhere, with a definition like:</span>
   <span class="sh_comment">// ArrayList&lt;Object&gt; list = new ...</span>

   <span class="sh_keyword">for</span> <span class="sh_symbol">(</span> <span class="sh_usertype">Object</span><span class="sh_normal"> </span>object <span class="sh_symbol">:</span> list <span class="sh_symbol">)</span> <span class="sh_cbracket">{</span>
      <span class="sh_keyword">if</span> <span class="sh_symbol">(</span> <span class="sh_function">hasToBeRemoved</span><span class="sh_symbol">(</span>object<span class="sh_symbol">)</span> <span class="sh_symbol">)</span> <span class="sh_cbracket">{</span>
         list<span class="sh_symbol">.</span><span class="sh_function">remove</span><span class="sh_symbol">(</span>object<span class="sh_symbol">);</span>
      <span class="sh_cbracket">}</span>
   <span class="sh_cbracket">}</span>
</pre>

<p>The solution does not work and it throws a <code>ConcurrentModificationException</code>, because it is not possible to modify a list while parsing it with a <em>foreach</em> iterator. We will come back to the topic better on week 12. If you run into such a situation, you can handle it in the following way:</p>

<pre class="sh_java sh_sourceCode">   <span class="sh_comment">// somewhere, with a definition like:</span>
   <span class="sh_comment">// ArrayList&lt;Object&gt; list = new ...</span>

   <span class="sh_usertype">ArrayList&lt;Object&gt;</span><span class="sh_normal"> </span>toBeRemoved <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> ArrayList<span class="sh_symbol">&lt;</span>Object<span class="sh_symbol">&gt;();</span>

   <span class="sh_keyword">for</span> <span class="sh_symbol">(</span> <span class="sh_usertype">Object</span><span class="sh_normal"> </span>object <span class="sh_symbol">:</span> list <span class="sh_symbol">)</span> <span class="sh_cbracket">{</span>
      <span class="sh_keyword">if</span> <span class="sh_symbol">(</span> <span class="sh_function">hasToBeRemoved</span><span class="sh_symbol">(</span>object<span class="sh_symbol">)</span> <span class="sh_symbol">)</span> <span class="sh_cbracket">{</span>
         toBeRemoved<span class="sh_symbol">.</span><span class="sh_function">add</span><span class="sh_symbol">(</span>object<span class="sh_symbol">);</span>
      <span class="sh_cbracket">}</span>
   <span class="sh_cbracket">}</span>

   list<span class="sh_symbol">.</span><span class="sh_function">removeAll</span><span class="sh_symbol">(</span>toBeRemoved<span class="sh_symbol">);</span>
</pre>

<p>The objects which have to be deleted are gathered together while we parse the list, and the remove operation is executed only after parsing the list.</p>

<div class="tehtavat">

    <p class="heading" id="e33">Exercise 33: Dungeon</p>

  <p><em>This exercise is worth four points.</em> Attention! Implement all the functionality in the package <code>dungeon</code>.</p>

<p><b>Attention: you can create only one Scanner object to make your tests work. Do not use Scandinavian letters in the class names. Also, do not use static variables, the tests execute your program many different times, and the static variable values left from the previous execution would possibly disturb them!</b></p>


<p>In this exercise, you implement a dungeon game. In the game, the player is in a dungeon full of vampires. The player has to destroy the vampires before his lamp runs out of battery and the vampires can suck his blood in the darkness. The player can see the vampires with a blinking of their lamp, after which they have to move blind before the following blinking. With one move, the player can walk as many steps as they want.</p>

<p>The game situation, i.e. the dungeon, the player and the vampires are shown in text form. The first line in the print output tells how many moves the player has left (that is to say, how much battery the lamp has). After that, the print output shows player and vampire positions, which in turn are followed by the game map. In the example below, you see the player (<code>@</code>) and three vampires (<code>v</code>); in this case, the player has enough light for fourteen moves.</p>

<pre>14

@ 1 2
v 6 1
v 7 3
v 12 2

.................
......v..........
.@.........v.....
.......v.........
</pre>

<p>The example above shows the lamp has enough battery for 14 blinkings. The player <code>@</code> is located at <code>1 2</code>. Note that the coordinates are calculated starting from the high left corner of the game board. In the map below, the character <code>X</code> is located at <code>0 0</code>, <code>Y</code> is at <code>2 0</code> and <code>Z</code> is at <code>0 2</code>.</p>

<pre>X.Y..............
.................
Z................
.................
</pre>



<p>The user can move by giving a sequence of commands and pressing Enter. The commands are:</p>
<ul><li><code>w</code> go up</li>
  <li><code>s</code> go down</li>
  <li><code>a</code> go left</li>
  <li><code>d</code> go right</li>
</ul><p>When the user commands are executed (the user can give many commands at once), a new game situation is drawn. If the lamp charge reaches 0, the game ends and the text <code>YOU LOSE</code> is printed on the board.
</p>

<p>The vampires move randomly in the game, and they take one step for each step the player takes. If the player and a vampire run into each other (even momentarily) the vampire is destroyed. If a vampire tries to step outside the board, or into a place already occupied by another vampire, the move is not executed. When all the vampires are destroyed, the game ends and it prints <code>YOU WIN</code>.</p>

<p>In order to help the tests, create the class <code>Dungeon</code> in your game, with:</p>

<p>
  </p><ul><li>the constructor <strong><code>public Dungeon(int length, int height, int vampires, int moves, boolean vampiresMove)</code></strong>
      <p>the values <code>length</code> and <code>height</code> represent the dimension of the dungeon (always a rectangle); <code>vampires</code> stands for the initial number of vampires (the positions of the vampires can be decided randomly); <code>moves</code> determines the initial number of moves; and if <code>vampiresMove</code> is <code>false</code>, the vampires do not move.</p></li>
    <li>the method <strong><code>public void run()</code></strong>, which starts the game</li>
  </ul><p><em>Attention!</em> The player starts the game in the position 0,0!</p>
<p><em>Attention!</em> Player and vampires can not move out of the dungeon and two vampires cannot step into the same place!</p>

<p><em>Attention!</em> Because the random movement of the vampires, the tests might occasionally fail. If you believe your code works, try re-running the tests to see if they succeed on the next try.</p>

<p>Below, you find a couple of examples to help you to understand the situation better:</p>

<pre>14

@ 0 0
v 1 2
v 7 8
v 7 5
v 8 0
v 2 9

@.......v.
..........
.v........
..........
..........
.......v..
..........
..........
.......v..
..v.......

<font color="red">ssd</font>
13

@ 1 2
v 8 8
v 7 4
v 8 3
v 1 8

..........
..........
.@........
........v.
.......v..
..........
..........
..........
.v......v.
..........

<font color="red">ssss</font>
12

@ 1 6
v 6 9
v 6 5
v 8 3

..........
..........
..........
........v.
..........
......v...
.@........
..........
..........
......v...

<font color="red">dd</font>
11

@ 3 6
v 5 9
v 6 7
v 8 1

..........
........v.
..........
..........
..........
..........
...@......
......v...
..........
.....v....

<font color="red">ddds</font>
10

@ 6 7
v 6 6
v 5 0

.....v....
..........
..........
..........
..........
..........
......v...
......@...
..........
..........

<font color="red">w</font>
9

@ 6 6
v 4 0

....v.....
..........
..........
..........
..........
..........
......@...
..........
..........
..........

<font color="red">www</font>
8

@ 6 3
v 4 0

....v.....
..........
..........
......@...
..........
..........
..........
..........
..........
..........

<font color="red">aa</font>
7

@ 4 3
v 4 2

..........
..........
....v.....
....@.....
..........
..........
..........
..........
..........
..........

<font color="red">w</font>
YOU WIN
</pre>



</div>
</div>    </div>


      </div><!-- /inner -->

  </div><!-- /node-323 -->
        </div>


              </div><!-- /inner-inner -->
	  </div><!-- /inner-wrapper -->
    <div class="corner-bottom"><div class="corner-bottom-right corner"></div><div class="corner-bottom-left corner"></div></div>
  </div><!-- /inner -->
</div><!-- /block -->  </div>
</div>
  </div>
</div>
</div>
</div>
                                                                  </div><!-- /content-content -->
                                                              </div><!-- /content-inner-inner -->
                            </div><!-- /content-inner -->
                          </div><!-- /content-region-inner -->
                        </div><!-- /content-region -->

                        <div id="content-bottom" class="content-bottom row nested ">
<div id="content-bottom-inner" class="content-bottom-inner inner clearfix">

<div id="block-block-1" class="block block-block odd first last grid16-16">
  <div class="inner">
    <div class="corner-top"><div class="corner-top-right corner"></div><div class="corner-top-left corner"></div></div>
      	<div class="inner-wrapper">
      <div class="inner-inner">
                <div class="content clearfix">
          <div id="header-top-block">
<p class="rtecenter">
</p>
<p class="rtecenter">
</p>
	</div>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-47575342-3', 'auto');
  ga('set', 'anonymizeIp', true);
  ga('send', 'pageview');

</script>        </div>
      </div><!-- /inner-inner -->
	  </div><!-- /inner-wrapper -->
    <div class="corner-bottom"><div class="corner-bottom-right corner"></div><div class="corner-bottom-left corner"></div></div>
  </div><!-- /inner -->
</div><!-- /block --></div><!-- /content-bottom-inner -->
</div><!-- /content-bottom -->
                      </div><!-- /content-group-inner -->
                    </div><!-- /content-group -->

                                      </div><!-- /main-content-inner -->
                </div><!-- /main-content -->

                              </div><!-- /main-group-inner -->
            </div><!-- /main-group -->
          </div><!-- /main-inner -->
        </div><!-- /main -->
      </div><!-- /main-wrapper -->

      <!-- postscript-bottom row: width = grid_width -->

      <!-- footer row: width = grid_width -->

      <!-- footer-message row: width = grid_width -->
      <div id="footer-message-wrapper" class="footer-message-wrapper full-width">
        <div id="footer-message" class="footer-message row grid16-16">
          <div id="footer-message-inner" class="footer-message-inner inner clearfix">
                              <div id="footer-message-text" class="footer-message-text block">
<div id="footer-message-text-inner" class="footer-message-text-inner inner clearfix">
<br>
</div><!-- /footer-message-text-inner -->
</div><!-- /footer-message-text -->

          </div><!-- /footer-message-inner -->
        </div><!-- /footer-message -->
      </div><!-- /footer-message-wrapper -->

    <!-- /page-inner -->
  <!-- /page -->


</body>
