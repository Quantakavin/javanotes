<head>
  <link href="java.css" rel="stylesheet" type="text/css">
  <!-- Latest compiled and minified CSS -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

  <!-- Optional theme -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">

  <!-- Latest compiled and minified JavaScript -->
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
</head>
<header class="navbar navbar-fixed-top navbar-inverse navbar-default">
  <div class="container-fluid" style="background-color: #20B2AA; padding-left:15%;">
    <nav>
      <div class="navbar-brand" style="color: white">
        Enrole
      </div>
    </nav>
  </div>
</header>
<body id="pid-programming-part2-material-week-11" class="not-front not-logged-in page-node node-type-weekly-tasks no-sidebars full-node panels layout-main sidebars-both-first font-family-lucida font-size-13 grid-type-fluid grid-width-16 fluid-100 container signup2">
  <div id="page" class="page">
    <div id="page-inner" class="page-inner">

      <!-- header-top row: width = grid_width -->

      <!-- header-group row: width = grid_width -->
      <div id="header-group-wrapper" class="header-group-wrapper full-width">
        <div id="header-group" class="header-group row grid16-16">
          <div id="header-group-inner" class="header-group-inner inner clearfix">
                                    <div id="primary-menu" class="primary-menu block">
<div id="primary-menu-inner" class="primary-menu-inner inner clearfix">
    <div class="navigation-wrapper"> <div class="navigation-links left">
      </div>
<div class="navigation-links right">                                      </div>                 </div> </div><!-- /primary-menu-inner -->
</div><!-- /primary-menu -->
          </div><!-- /header-group-inner -->
        </div><!-- /header-group -->
      </div><!-- /header-group-wrapper -->

      <!-- preface-top row: width = grid_width -->

<!--            <div id="preface-top-wrapper" class="preface-top-wrapper full-width">
        <div id="preface-top" class="preface-top row grid16-16">
          <div id="preface-top-inner" class="preface-top-inner inner clearfix">
-->
          </div><!-- /preface-top-inner -->
        </div><!-- /preface-top -->
      <!-- /preface-top-wrapper -->

    <!-- main row: width = grid_width -->
    <div id="main-wrapper" class="main-wrapper full-width">
      <div id="main" class="main row grid16-16">
        <div id="main-inner" class="main-inner inner clearfix">

          <!-- main group: width = grid_width - sidebar_first_width -->
          <div id="main-group" class="main-group row nested grid16-16">
            <div id="main-group-inner" class="main-group-inner inner clearfix">

              <div id="main-content" class="main-content row nested">
                <div id="main-content-inner" class="main-content-inner inner clearfix">
                  <!-- content group: width = grid_width - (sidebar_first_width + sidebar_last_width) -->
                    <div id="content-group" class="content-group row nested " style="width:100%">
                      <div id="content-group-inner" class="content-group-inner inner clearfix">


                        <div id="content-region" class="content-region row nested">
                          <div id="content-region-inner" class="content-region-inner inner clearfix">
                            <a name="main-content-area" id="main-content-area"></a>
                                                        <div id="content-inner" class="content-inner block">
                              <div id="content-inner-inner" class="content-inner-inner inner clearfix">
                                                                                                <div id="content-content" class="content-content">
                                  <div class="panel-flexible panels-flexible-13 clear-block">
<div class="panel-flexible-inside panels-flexible-13-inside">
<div class="panels-flexible-row panels-flexible-row-13-7 panels-flexible-row-first clear-block ">
  <div class="inside panels-flexible-row-inside panels-flexible-row-13-7-inside panels-flexible-row-inside-first clear-block">
<div class="panels-flexible-region panels-flexible-region-13-js_ panels-flexible-region-first panels-flexible-region-last ">
  <div class="inside panels-flexible-region-inside panels-flexible-region-13-js_-inside panels-flexible-region-inside-first panels-flexible-region-inside-last">
<div class="panel-pane pane-custom pane-2 ">
  <div class="inner">
    <div class="corner-top"><div class="corner-top-right corner"></div><div class="corner-top-left corner"></div></div>
  	<div class="inner-wrapper">
      <div class="inner-inner">

            <div class="warning-banner">
                  </div>

                    <div class="pane-content content">
                      <h1 class="title">Object-Oriented Programming with Java, part II</h1>        </div>


              </div><!-- /inner-inner -->
	  </div><!-- /inner-wrapper -->
    <div class="corner-bottom"><div class="corner-bottom-right corner"></div><div class="corner-bottom-left corner"></div></div>
  </div><!-- /inner -->
</div><!-- /block --><div class="panel-region-separator"></div><div class="panel-pane pane-custom pane-3 ">
  <div class="inner">
    <div class="corner-top"><div class="corner-top-right corner"></div><div class="corner-top-left corner"></div></div>
  	<div class="inner-wrapper">
      <div class="inner-inner">



        <div class="pane-content content">
          <link href="/2013-oo-programming/menu.css" media="screen" rel="stylesheet" type="text/css">
<link href="/2013-oo-programming/common-new.css" media="screen, print" rel="stylesheet" type="text/css">
<link href="/2013-oo-programming/sh_style.css" media="screen, print" rel="stylesheet" type="text/css">        </div>


              </div><!-- /inner-inner -->
	  </div><!-- /inner-wrapper -->
    <div class="corner-bottom"><div class="corner-bottom-right corner"></div><div class="corner-bottom-left corner"></div></div>
  </div><!-- /inner -->
</div><!-- /block -->  </div>
</div>
  </div>
</div>
<div class="panels-flexible-row panels-flexible-row-13-4 clear-block js">
  <div class="inside panels-flexible-row-inside panels-flexible-row-13-4-inside clear-block">
<div class="panels-flexible-region panels-flexible-region-13-js_en_ panels-flexible-region-first ">
  <div class="inside panels-flexible-region-inside panels-flexible-region-13-js_en_-inside panels-flexible-region-inside-first">
  </div>
</div>
<div class="panels-flexible-region panels-flexible-region-13-js ">
  <div class="inside panels-flexible-region-inside panels-flexible-region-13-js-inside">
<div class="panel-pane pane-node ">
  <div class="inner">
    <div class="corner-top"><div class="corner-top-right corner"></div><div class="corner-top-left corner"></div></div>
  	<div class="inner-wrapper">
      <div class="inner-inner">



        <div class="pane-content content">

<div id="node-222" class="node odd full-node node-type-page">
  <div class="inner">

        <h2 class="title"><a href="/content/js-en" title=""></a></h2>



    <div class="content clearfix">
      <script type="text/javascript" src="https://www.cs.helsinki.fi/group/java/k13/ohpe/js/bootstrap.min.js"></script>
<script type="text/javascript" src="https://www.cs.helsinki.fi/group/java/k13/ohpe/javascripts/jquery-1.7.1.min.js"></script>
<script type="text/javascript" src="https://www.cs.helsinki.fi/group/java/materiaali/javascripts/exercises-eng-new.js"></script>
<script type="text/javascript" src="https://www.cs.helsinki.fi/group/java/materiaali/javascripts/common-mooc-eng.js"></script>
<script type="text/javascript" src="https://www.cs.helsinki.fi/group/java/k13/ohpe/javascripts/shjs/sh_main.min.js"></script>
<script type="text/javascript" src="https://www.cs.helsinki.fi/group/java/k13/ohpe/javascripts/shjs/sh_java.min.js"></script>



<script type="text/javascript" src="https://www.cs.helsinki.fi/group/java/k13/ohpe/javascripts/jquery.easing.js"></script>

<div id="toc" class="menu" data-first-chapter-index="1" data-first-exercise-index="1">
          <!-- <span id="materiaali_toc" ></span> -->
          <!--div id="tehtavat_toc" ></div-->
          <!-- <span id="tehtavat_toc2" ></span> -->
        </div>    </div>


      </div><!-- /inner -->

  </div><!-- /node-222 -->
        </div>


              </div><!-- /inner-inner -->
	  </div><!-- /inner-wrapper -->
    <div class="corner-bottom"><div class="corner-bottom-right corner"></div><div class="corner-bottom-left corner"></div></div>
  </div><!-- /inner -->
</div><!-- /block -->  </div>
</div>
<div class="panels-flexible-region panels-flexible-region-13-copyright panels-flexible-region-last float-right">
  <div class="inside panels-flexible-region-inside panels-flexible-region-13-copyright-inside panels-flexible-region-inside-last">
<div class="panel-pane pane-custom pane-1 box ">
  <div class="inner">
    <div class="corner-top"><div class="corner-top-right corner"></div><div class="corner-top-left corner"></div></div>
  	<div class="inner-wrapper">
      <div class="inner-inner">



        <div class="pane-content content">
          <p><a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/2.0/"><img alt="Creative Commons License" style="border-width:0; float:right;" src="http://i.creativecommons.org/l/by-nc-sa/2.0/88x31.png"></a><small>This material is licensed under the Creative Commons BY-NC-SA license, which means that you can use it and distribute it freely so long as you do not erase the names of the original authors. If you do changes in the material and want to distribute this altered version of the material, you have to license it with a similar free license. The use of the material for commercial use is prohibited without a separate agreement.</small></p>        </div>


              </div><!-- /inner-inner -->
	  </div><!-- /inner-wrapper -->
    <div class="corner-bottom"><div class="corner-bottom-right corner"></div><div class="corner-bottom-left corner"></div></div>
  </div><!-- /inner -->
</div><!-- /block --><div class="panel-region-separator"></div><div class="panel-pane pane-content-field pane-field-author course-menu ">
  <div class="inner">
    <div class="corner-top"><div class="corner-top-right corner"></div><div class="corner-top-left corner"></div></div>
  	<div class="inner-wrapper">
      <div class="inner-inner">



        <div class="pane-content content">
          <div class="field field-type-text field-field-author">
    <div class="field-items">
            <div class="field-item odd">
                    Authors: Arto Hellas, Matti Luukkainen        </div>
        </div>
</div>
        </div>


              </div><!-- /inner-inner -->
	  </div><!-- /inner-wrapper -->
    <div class="corner-bottom"><div class="corner-bottom-right corner"></div><div class="corner-bottom-left corner"></div></div>
  </div><!-- /inner -->
</div><!-- /block --><div class="panel-region-separator"></div><div class="panel-pane pane-content-field pane-field-translators course-menu ">
  <div class="inner">
    <div class="corner-top"><div class="corner-top-right corner"></div><div class="corner-top-left corner"></div></div>
  	<div class="inner-wrapper">
      <div class="inner-inner">



        <div class="pane-content content">
          <div class="field field-type-text field-field-translators">
    <div class="field-items">
            <div class="field-item odd">
                    Translators: Simone Romeo, Kenny Heinonen        </div>
        </div>
        <div class="field-item odd"><br>The course is maintained by the Agile Education Research Group</div>
</div>
        </div>


              </div><!-- /inner-inner -->
	  </div><!-- /inner-wrapper -->
    <div class="corner-bottom"><div class="corner-bottom-right corner"></div><div class="corner-bottom-left corner"></div></div>
  </div><!-- /inner -->
</div><!-- /block -->  </div>
</div>
  </div>
</div>
<div class="panels-flexible-row panels-flexible-row-13-8 panels-flexible-row-last clear-block js en">
  <div class="inside panels-flexible-row-inside panels-flexible-row-13-8-inside panels-flexible-row-inside-last clear-block">
<div class="panels-flexible-region panels-flexible-region-13-js_en panels-flexible-region-first panels-flexible-region-last ">
  <div class="inside panels-flexible-region-inside panels-flexible-region-13-js_en-inside panels-flexible-region-inside-first panels-flexible-region-inside-last">
<div class="panel-pane pane-node-content box-mooc ">
  <div class="inner">
    <div class="corner-top"><div class="corner-top-right corner"></div><div class="corner-top-left corner"></div></div>
  	<div class="inner-wrapper">
      <div class="inner-inner">



        <div class="pane-content content">

<div id="node-326" class="node even full-node node-type-weekly_tasks">
  <div class="inner">




    <div class="content clearfix">
      <div class="viikkoraja-mooc" id="Week 11" deadline="unlocks when 85% of week 10 done " data-first-chapter-index="50" data-first-exercise-index="141" data-first-week-index="11" data-first-chapter-index-mooc="51" data-first-exercise-index-mooc="34" data-first-week-index-mooc="11" tekija="Arto Vihavainen, Matti Luukkainen">

<h2 id="51"> Writing to a File</h2>

<p>In section 15, we learnt that reading from a file happened with the help of the classes <code>Scanner</code> and <code>File</code>. The class <code><a href="http://docs.oracle.com/javase/6/docs/api/java/io/FileWriter.html">FileWriter</a></code> provides the functionality to write to a file. The <code>FileWriter</code> constructor is given as parameter a String illustrating the file location.</p>

<pre class="sh_java sh_sourceCode"><span class="sh_usertype">FileWriter</span><span class="sh_normal"> </span>writer <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">FileWriter</span><span class="sh_symbol">(</span><span class="sh_string">"file.txt"</span><span class="sh_symbol">);</span>
writer<span class="sh_symbol">.</span><span class="sh_function">write</span><span class="sh_symbol">(</span><span class="sh_string">"Hi file!</span><span class="sh_specialchar">\n</span><span class="sh_string">"</span><span class="sh_symbol">);</span> <span class="sh_comment">// the line break has to be written, too!</span>
writer<span class="sh_symbol">.</span><span class="sh_function">write</span><span class="sh_symbol">(</span><span class="sh_string">"Adding text</span><span class="sh_specialchar">\n</span><span class="sh_string">"</span><span class="sh_symbol">);</span>
writer<span class="sh_symbol">.</span><span class="sh_function">write</span><span class="sh_symbol">(</span><span class="sh_string">"And more"</span><span class="sh_symbol">);</span>
writer<span class="sh_symbol">.</span><span class="sh_function">close</span><span class="sh_symbol">();</span> <span class="sh_comment">// the call closes the file and makes sure the written text goes to the file</span>
</pre>

    <p>In the example we write the string "Hi file!" to the file "file.txt"; that is followed by a line break, and by more text. Note that when you use the <code>write</code> method, it does not produce line breaks, but they have to be added later manually.</p>

    <p>Both the <code>FileWriter</code> constructor and the <code>write</code> method may throw an exception, which has to be either handled or the responsibility has to be delegated to the calling method. The method which is given as parameter the file name and the text to write into it can look like the following.</p>

<pre class="sh_java sh_sourceCode"><span class="sh_keyword">public</span> <span class="sh_keyword">class</span><span class="sh_normal"> </span><span class="sh_classname">FileHandler</span> <span class="sh_cbracket">{</span>

    <span class="sh_keyword">public</span> <span class="sh_type">void</span> <span class="sh_function">writeToFile</span><span class="sh_symbol">(</span><span class="sh_usertype">String</span><span class="sh_normal"> </span>fileName<span class="sh_symbol">,</span> <span class="sh_usertype">String</span><span class="sh_normal"> </span>text<span class="sh_symbol">)</span> <span class="sh_keyword">throws</span> Exception <span class="sh_cbracket">{</span>
        <span class="sh_usertype">FileWriter</span><span class="sh_normal"> </span>writer <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">FileWriter</span><span class="sh_symbol">(</span>fileName<span class="sh_symbol">);</span>
        writer<span class="sh_symbol">.</span><span class="sh_function">write</span><span class="sh_symbol">(</span>text<span class="sh_symbol">);</span>
        writer<span class="sh_symbol">.</span><span class="sh_function">close</span><span class="sh_symbol">();</span>
    <span class="sh_cbracket">}</span>
<span class="sh_cbracket">}</span>
</pre>

    <p>In the above <code>writeToFile</code> method, we first create a <code>FileWriter</code> object, which writes into the <code>fileName</code> file stored at the location specified as parameter. After this, we write into the file using the <code>write</code> method. The exception the constructor and <code>write</code> method can possibly throw has to be handled either with the help of a <code>try-catch</code> block or delegating the responsibility. In the method <code>writeToFile</code> the responsibility was delegated.</p>

    <p>Let's create a <code>main</code> method where we call the <code>writeToFile</code> method of a <code>FileHandler</code> object. The exception does not have to be handled in the <code>main</code> method either, but the method can declare to throw possibly an exception throw the definition <code>throws Exception</code>.</p>

<pre class="sh_java sh_sourceCode">    <span class="sh_keyword">public</span> <span class="sh_keyword">static</span> <span class="sh_type">void</span> <span class="sh_function">main</span><span class="sh_symbol">(</span>String<span class="sh_symbol">[]</span> args<span class="sh_symbol">)</span> <span class="sh_keyword">throws</span> Exception <span class="sh_cbracket">{</span>
        <span class="sh_usertype">FileHandler</span><span class="sh_normal"> </span>handler <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">FileHandler</span><span class="sh_symbol">();</span>
        handler<span class="sh_symbol">.</span><span class="sh_function">writeToFile</span><span class="sh_symbol">(</span><span class="sh_string">"diary.txt"</span><span class="sh_symbol">,</span> <span class="sh_string">"Dear Diary, today was a nice day."</span><span class="sh_symbol">);</span>
    <span class="sh_cbracket">}</span>
</pre>

    <p>When we call the method above, we create the file "diary.txt", where we write the text "Dear Diary, today was a nice day.". If the file exists already, the old content is erased and the new one is written. FileWriter allows us to add text at the end of the already existing file by providing additional parameter <code>boolean append</code>, without erasing the existing text. Let's add the method <code>appendToFile()</code> to the class <code>FileHandler</code>; the method appends the text received as parameter to the end of the file.</p>

<pre class="sh_java sh_sourceCode"><span class="sh_keyword">public</span> <span class="sh_keyword">class</span><span class="sh_normal"> </span><span class="sh_classname">FileHandler</span> <span class="sh_cbracket">{</span>
    <span class="sh_keyword">public</span> <span class="sh_type">void</span> <span class="sh_function">writeToFile</span><span class="sh_symbol">(</span><span class="sh_usertype">String</span><span class="sh_normal"> </span>fileName<span class="sh_symbol">,</span> <span class="sh_usertype">String</span><span class="sh_normal"> </span>text<span class="sh_symbol">)</span> <span class="sh_keyword">throws</span> Exception <span class="sh_cbracket">{</span>
        <span class="sh_usertype">FileWriter</span><span class="sh_normal"> </span>writer <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">FileWriter</span><span class="sh_symbol">(</span>fileName<span class="sh_symbol">);</span>
        writer<span class="sh_symbol">.</span><span class="sh_function">write</span><span class="sh_symbol">(</span>text<span class="sh_symbol">);</span>
        writer<span class="sh_symbol">.</span><span class="sh_function">close</span><span class="sh_symbol">();</span>
    <span class="sh_cbracket">}</span>

    <span class="sh_keyword">public</span> <span class="sh_type">void</span> <span class="sh_function">appendToFile</span><span class="sh_symbol">(</span><span class="sh_usertype">String</span><span class="sh_normal"> </span>fileName<span class="sh_symbol">,</span> <span class="sh_usertype">String</span><span class="sh_normal"> </span>text<span class="sh_symbol">)</span> <span class="sh_keyword">throws</span> Exception <span class="sh_cbracket">{</span>
        <span class="sh_usertype">FileWriter</span><span class="sh_normal"> </span>writer <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">FileWriter</span><span class="sh_symbol">(</span>fileName<span class="sh_symbol">,</span> <span class="sh_keyword">true</span><span class="sh_symbol">);</span>
        writer<span class="sh_symbol">.</span><span class="sh_function">write</span><span class="sh_symbol">(</span>text<span class="sh_symbol">);</span>
        writer<span class="sh_symbol">.</span><span class="sh_function">close</span><span class="sh_symbol">();</span>
    <span class="sh_cbracket">}</span>
<span class="sh_cbracket">}</span>
</pre>

    <p>In most of the cases, instead of writing text at the end of a file with the method <code>append</code>, it is easier to write all the file again.</p>

<div class="tehtavat">
    <p class="heading" id="e34">Exercise 34: File Manager</p>

<p>Together with the exercise body, you find the class <code>FileManager</code>, which contains the method bodies to read a write a file.</p>

<h4>Exercise 34.1: File Reading</h4>

<p>Implement the method <code>public ArrayList&lt;String&gt; read(String file)</code> to return the lines of the parameter file in ArrayList form, each file line being a String contained by the ArrayList.
</p>

<p>There are two text files to help testing the project: <code>src/testinput1.txt</code> and <code>src/testinput2.txt</code>. The methods are supposed to be used in the following way:
</p>

<pre class="sh_java sh_sourceCode">    <span class="sh_keyword">public</span> <span class="sh_keyword">static</span> <span class="sh_type">void</span> <span class="sh_function">main</span><span class="sh_symbol">(</span>String<span class="sh_symbol">[]</span> args<span class="sh_symbol">)</span> <span class="sh_keyword">throws</span> FileNotFoundException<span class="sh_symbol">,</span> IOException <span class="sh_cbracket">{</span>
        <span class="sh_usertype">FileManager</span><span class="sh_normal"> </span>f <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">FileManager</span><span class="sh_symbol">();</span>

        <span class="sh_keyword">for</span> <span class="sh_symbol">(</span><span class="sh_usertype">String</span><span class="sh_normal"> </span>line <span class="sh_symbol">:</span> f<span class="sh_symbol">.</span><span class="sh_function">read</span><span class="sh_symbol">(</span><span class="sh_string">"src/testinput1.txt"</span><span class="sh_symbol">))</span> <span class="sh_cbracket">{</span>
            System<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">println</span><span class="sh_symbol">(</span>line<span class="sh_symbol">);</span>
        <span class="sh_cbracket">}</span>
    <span class="sh_cbracket">}</span>
</pre>

<p>The print output should look like the following</p>

<pre>first
second
</pre>


<h4>Exercise 34.2: Writing a Line</h4>

<p>Modify the method <code>public void save(String file, String text)</code> so that it would write the string of the second argument into the file of the first argument. If the file already exists, the string is written over the old version.
</p>


<h4>Exercise 34.3: Writing a List</h4>

<p>Modify the method <code>public void save(String file, ArrayList&lt;String&gt; texts)</code> so that it would write the strings of the second argument into the file of the first argument; each string of the array list has to go to its own line. If the file already exists, the strings are written over the old version.

</p>
<p class="heading" id="e35">Exercise 35: Two-Direction Dictionary</p>
    <p>With this exercise, we develop the dictionary we implemented earlier, so that words can be both read and written into the file. Also, the dictionary has to translate in both directions, from Finnish into English and from English into Finnish (in this exercise, we suppose unofficially that Finnish and English do not have words which are spellt the same). Your task is creating the dictionary in the class <code>MindfulDictionary</code>. The class has to be implemented in the package <code>dictionary</code>.</p>

<h4>Exercise 35.1: Forgetful Basic Functionality</h4>

<p>Create a parameterless constructor, as well as the methods:</p>

 <ul><li><code>public void add(String word, String translation)</code></li> adds a word to the dictionary. Each word has only one translation; if the same word is added twice, nothing happens.<br><li><code>public String translate(String word)</code></li> returns the word translation; if the word isn't recognised, it returns null<br></ul><p>At this point, the dictionary has to work in the following way:</p>

<pre class="sh_java sh_sourceCode"><span class="sh_usertype">MindfulDictionary</span><span class="sh_normal"> </span>dict <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">MindfulDictionary</span><span class="sh_symbol">();</span>
dict<span class="sh_symbol">.</span><span class="sh_function">add</span><span class="sh_symbol">(</span><span class="sh_string">"apina"</span><span class="sh_symbol">,</span> <span class="sh_string">"monkey"</span><span class="sh_symbol">);</span>
dict<span class="sh_symbol">.</span><span class="sh_function">add</span><span class="sh_symbol">(</span><span class="sh_string">"banaani"</span><span class="sh_symbol">,</span> <span class="sh_string">"banana"</span><span class="sh_symbol">);</span>
dict<span class="sh_symbol">.</span><span class="sh_function">add</span><span class="sh_symbol">(</span><span class="sh_string">"apina"</span><span class="sh_symbol">,</span> <span class="sh_string">"apfe"</span><span class="sh_symbol">);</span>

System<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">println</span><span class="sh_symbol">(</span> dict<span class="sh_symbol">.</span><span class="sh_function">translate</span><span class="sh_symbol">(</span><span class="sh_string">"apina"</span><span class="sh_symbol">)</span> <span class="sh_symbol">);</span>
System<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">println</span><span class="sh_symbol">(</span> dict<span class="sh_symbol">.</span><span class="sh_function">translate</span><span class="sh_symbol">(</span><span class="sh_string">"monkey"</span><span class="sh_symbol">)</span> <span class="sh_symbol">);</span>
System<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">println</span><span class="sh_symbol">(</span> dict<span class="sh_symbol">.</span><span class="sh_function">translate</span><span class="sh_symbol">(</span><span class="sh_string">"programming"</span><span class="sh_symbol">)</span> <span class="sh_symbol">);</span>
System<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">println</span><span class="sh_symbol">(</span> dict<span class="sh_symbol">.</span><span class="sh_function">translate</span><span class="sh_symbol">(</span><span class="sh_string">"banana"</span><span class="sh_symbol">)</span> <span class="sh_symbol">);</span>
</pre>

<p>Prints:</p>

<pre>monkey
apina
null
banaani
</pre>

<p>As you notice from the example, after adding a pair the dictionary can translate in both directions.</p>

<h4>Exercise 35.2: Removing Words</h4>

<p>Add the method <code>public void remove(String word)</code>, which removes the given word and its translation from your dictionary.</p>

<p>At this point, the dictionary has to work in the following way:</p>

<pre class="sh_java sh_sourceCode"><span class="sh_usertype">MindfulDictionary</span><span class="sh_normal"> </span>dict <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">MindfulDictionary</span><span class="sh_symbol">();</span>
dict<span class="sh_symbol">.</span><span class="sh_function">add</span><span class="sh_symbol">(</span><span class="sh_string">"apina"</span><span class="sh_symbol">,</span> <span class="sh_string">"monkey"</span><span class="sh_symbol">);</span>
dict<span class="sh_symbol">.</span><span class="sh_function">add</span><span class="sh_symbol">(</span><span class="sh_string">"banaani"</span><span class="sh_symbol">,</span> <span class="sh_string">"banana"</span><span class="sh_symbol">);</span>
dict<span class="sh_symbol">.</span><span class="sh_function">add</span><span class="sh_symbol">(</span><span class="sh_string">"ohjelmointi"</span><span class="sh_symbol">,</span> <span class="sh_string">"programming"</span><span class="sh_symbol">);</span>
dict<span class="sh_symbol">.</span><span class="sh_function">remove</span><span class="sh_symbol">(</span><span class="sh_string">"apina"</span><span class="sh_symbol">);</span>
dict<span class="sh_symbol">.</span><span class="sh_function">remove</span><span class="sh_symbol">(</span><span class="sh_string">"banana"</span><span class="sh_symbol">);</span>

System<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">println</span><span class="sh_symbol">(</span> dict<span class="sh_symbol">.</span><span class="sh_function">translate</span><span class="sh_symbol">(</span><span class="sh_string">"apina"</span><span class="sh_symbol">)</span> <span class="sh_symbol">);</span>
System<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">println</span><span class="sh_symbol">(</span> dict<span class="sh_symbol">.</span><span class="sh_function">translate</span><span class="sh_symbol">(</span><span class="sh_string">"monkey"</span><span class="sh_symbol">)</span> <span class="sh_symbol">);</span>
System<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">println</span><span class="sh_symbol">(</span> dict<span class="sh_symbol">.</span><span class="sh_function">translate</span><span class="sh_symbol">(</span><span class="sh_string">"banana"</span><span class="sh_symbol">)</span> <span class="sh_symbol">);</span>
System<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">println</span><span class="sh_symbol">(</span> dict<span class="sh_symbol">.</span><span class="sh_function">translate</span><span class="sh_symbol">(</span><span class="sh_string">"banaani"</span><span class="sh_symbol">)</span> <span class="sh_symbol">);</span>
System<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">println</span><span class="sh_symbol">(</span> dict<span class="sh_symbol">.</span><span class="sh_function">translate</span><span class="sh_symbol">(</span><span class="sh_string">"ohjelmointi"</span><span class="sh_symbol">)</span> <span class="sh_symbol">);</span>
</pre>

<p>Prints</p>

<pre>null
null
null
null
programming
</pre>

<p>As you see, the delection happens in both ways: whether you remove a word or its translation, the dictionary loses the both the pieces of information. </p>



<h4>Exercise 35.3: Loading a File</h4>

<p>Create the constructor <code>public MindfulDictionary(String file)</code> and the method <code>public boolean load()</code>, which loads a file whose name is given as parameter in the dictionary constructor. If opening or reading the file does not work, the method returns false and otherwise true.</p>

<p>Each line of the dictionary file contains a word and its translation, divided by the character ":". Together with the exercise body, you find a dictionary file meant to help the tests. It looks like the following: </p>

<pre>apina:monkey
alla oleva:below
olut:beer
</pre>

<p>Read the dictionary file line by line with the reader method <code>nextLine</code>. You can split the lines with the String method <code>split</code>, in the following way:</p>

<pre class="sh_java sh_sourceCode"><span class="sh_usertype">Scanner</span><span class="sh_normal"> </span>fileReader <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_symbol">...</span>
<span class="sh_keyword">while</span> <span class="sh_symbol">(</span> fileReader<span class="sh_symbol">.</span><span class="sh_function">hasNextLine</span><span class="sh_symbol">()</span> <span class="sh_symbol">)</span><span class="sh_cbracket">{</span>
    <span class="sh_usertype">String</span><span class="sh_normal"> </span>line <span class="sh_symbol">=</span> fileReader<span class="sh_symbol">.</span><span class="sh_function">nextLine</span><span class="sh_symbol">();</span>
    String<span class="sh_symbol">[]</span> parts <span class="sh_symbol">=</span> line<span class="sh_symbol">.</span><span class="sh_function">split</span><span class="sh_symbol">(</span><span class="sh_string">":"</span><span class="sh_symbol">);</span>   <span class="sh_comment">// the line is split at :</span>

    System<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">println</span><span class="sh_symbol">(</span> parts<span class="sh_symbol">[</span><span class="sh_number">0</span><span class="sh_symbol">]</span> <span class="sh_symbol">);</span>     <span class="sh_comment">// the part of the line before :</span>
    System<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">println</span><span class="sh_symbol">(</span> parts<span class="sh_symbol">[</span><span class="sh_number">1</span><span class="sh_symbol">]</span> <span class="sh_symbol">);</span>     <span class="sh_comment">// the part of the line after :</span>
<span class="sh_cbracket">}</span>
</pre>

<p>The dictionary is used in the following way:</p>

<pre class="sh_java sh_sourceCode"><span class="sh_usertype">MindfulDictionary</span><span class="sh_normal"> </span>dict <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">MindfulDictionary</span><span class="sh_symbol">(</span><span class="sh_string">"src/words.txt"</span><span class="sh_symbol">);</span>
dict<span class="sh_symbol">.</span><span class="sh_function">load</span><span class="sh_symbol">();</span>

System<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">println</span><span class="sh_symbol">(</span> dict<span class="sh_symbol">.</span><span class="sh_function">translate</span><span class="sh_symbol">(</span><span class="sh_string">"apina"</span><span class="sh_symbol">)</span> <span class="sh_symbol">);</span>
System<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">println</span><span class="sh_symbol">(</span> dict<span class="sh_symbol">.</span><span class="sh_function">translate</span><span class="sh_symbol">(</span><span class="sh_string">"ohjelmointi"</span><span class="sh_symbol">)</span> <span class="sh_symbol">);</span>
System<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">println</span><span class="sh_symbol">(</span> dict<span class="sh_symbol">.</span><span class="sh_function">translate</span><span class="sh_symbol">(</span><span class="sh_string">"alla oleva"</span><span class="sh_symbol">)</span> <span class="sh_symbol">);</span>
</pre>

<p>Printing</p>

<pre>monkey
null
below
</pre>


<h4>Exercise 35.4: Saving Data</h4>

    <p>Create the method <code>public boolean save()</code>; when the method is called, the dictionary contents are written into the file whose name was given as parameter to the constructor. The method returns false if the file can't be saved; otherwise it returns true. Dictionary files have to be saved in the form described above, meaning that the program has to be able to read its own files.</p>

<p><strong>Attention:</strong> even though the dictionary can translate in both directions, only one direction has to be stored into the dictionary file. For instance, if the dictionary knows that <em>tietokone = computer</em>, you have to write either the line:</p>

<pre>tietokone:computer
</pre>

<p>or the line</p>

<pre>computer:tietokone
</pre>

<p>but not both!</p>

    <p>It may be useful to write the new translation list over the old file; in fact, the <code>append</code> command which came out in the material should not be used.</p>

<p>The final version of your dictionary should be used in the following way:</p>

<pre class="sh_java sh_sourceCode"><span class="sh_usertype">MindfulDictionary</span><span class="sh_normal"> </span>dict <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">MindfulDictionary</span><span class="sh_symbol">(</span><span class="sh_string">"src/words.txt"</span><span class="sh_symbol">);</span>
dict<span class="sh_symbol">.</span><span class="sh_function">load</span><span class="sh_symbol">();</span>

<span class="sh_comment">// using the dictionary</span>

dict<span class="sh_symbol">.</span><span class="sh_function">save</span><span class="sh_symbol">();</span>
</pre>

<p>At the beginning we load the dictionary from our file, and we save it back in the end, so that the changes made to the dictionary will be available next time, too.</p>

</div>


<h2 id="52"> User Interfaces</h2>

<p></p><hr><p><big><strong><strong>Attention!</strong> A part of the user interface tests opens a user interface and uses your mouse to click on the user interface components. When you are executing user interface tests, do not use your mouse!</strong></big></p>
<p></p><hr><p>So far, our programs have only been composed of application logic and text user interface which made use of application logic. In a couple of exercises we have also got a graphical user interface, but they had usually been created for us. Next, we see how we can create graphical user interfaces in Java.</p>

<p>User interfaces are windows which contain different types of buttons, text boxes, and menus. When we program user interfaces we use Java's
<a href="http://docs.oracle.com/javase/tutorial/uiswing/components/index.html" target="_blank">Swing</a> component library, which provides us with classes to create and handle user interfaces.</p>

<p>The basic element of a user interface is the class <code><a href="http://docs.oracle.com/javase/6/docs/api/javax/swing/JFrame.html" target="_blank">JFrame</a></code>, and we create the user interface components in its component section. Orthodox user interfaces implement the interface <code>Runnable</code>, and they are started in the main program. In this course, we use the following user interface body:</p>

<pre class="sh_java sh_sourceCode"><span class="sh_preproc">import</span> java<span class="sh_symbol">.</span>awt<span class="sh_symbol">.</span>Container<span class="sh_symbol">;</span>
<span class="sh_preproc">import</span> java<span class="sh_symbol">.</span>awt<span class="sh_symbol">.</span>Dimension<span class="sh_symbol">;</span>
<span class="sh_preproc">import</span> javax<span class="sh_symbol">.</span>swing<span class="sh_symbol">.</span>JFrame<span class="sh_symbol">;</span>
<span class="sh_preproc">import</span> javax<span class="sh_symbol">.</span>swing<span class="sh_symbol">.</span>WindowConstants<span class="sh_symbol">;</span>

<span class="sh_keyword">public</span> <span class="sh_keyword">class</span><span class="sh_normal"> </span><span class="sh_classname">UserInterface</span> <span class="sh_keyword">implements</span> Runnable <span class="sh_cbracket">{</span>

    <span class="sh_keyword">private</span> <span class="sh_usertype">JFrame</span><span class="sh_normal"> </span>frame<span class="sh_symbol">;</span>

    <span class="sh_keyword">public</span> <span class="sh_function">UserInterface</span><span class="sh_symbol">()</span> <span class="sh_cbracket">{</span>
    <span class="sh_cbracket">}</span>

    @Override
    <span class="sh_keyword">public</span> <span class="sh_type">void</span> <span class="sh_function">run</span><span class="sh_symbol">()</span> <span class="sh_cbracket">{</span>
        frame <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">JFrame</span><span class="sh_symbol">(</span><span class="sh_string">"Title"</span><span class="sh_symbol">);</span>
        frame<span class="sh_symbol">.</span><span class="sh_function">setPreferredSize</span><span class="sh_symbol">(</span><span class="sh_keyword">new</span> <span class="sh_function">Dimension</span><span class="sh_symbol">(</span><span class="sh_number">200</span><span class="sh_symbol">,</span> <span class="sh_number">100</span><span class="sh_symbol">));</span>

        frame<span class="sh_symbol">.</span><span class="sh_function">setDefaultCloseOperation</span><span class="sh_symbol">(</span>WindowConstants<span class="sh_symbol">.</span>EXIT_ON_CLOSE<span class="sh_symbol">);</span>

        <span class="sh_function">createComponents</span><span class="sh_symbol">(</span>frame<span class="sh_symbol">.</span><span class="sh_function">getContentPane</span><span class="sh_symbol">());</span>

        frame<span class="sh_symbol">.</span><span class="sh_function">pack</span><span class="sh_symbol">();</span>
        frame<span class="sh_symbol">.</span><span class="sh_function">setVisible</span><span class="sh_symbol">(</span><span class="sh_keyword">true</span><span class="sh_symbol">);</span>
    <span class="sh_cbracket">}</span>

    <span class="sh_keyword">private</span> <span class="sh_type">void</span> <span class="sh_function">createComponents</span><span class="sh_symbol">(</span><span class="sh_usertype">Container</span><span class="sh_normal"> </span>container<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span>
    <span class="sh_cbracket">}</span>

    <span class="sh_keyword">public</span> <span class="sh_usertype">JFrame</span><span class="sh_normal"> </span><span class="sh_function">getFrame</span><span class="sh_symbol">()</span> <span class="sh_cbracket">{</span>
        <span class="sh_keyword">return</span> frame<span class="sh_symbol">;</span>
    <span class="sh_cbracket">}</span>
<span class="sh_cbracket">}</span>
</pre>

<p>Let's have a closer look the the user interface code above.</p>

<pre class="sh_java sh_sourceCode"><span class="sh_keyword">public</span> <span class="sh_keyword">class</span><span class="sh_normal"> </span><span class="sh_classname">UserInterface</span> <span class="sh_keyword">implements</span> Runnable <span class="sh_cbracket">{</span>
</pre>

<p>The class <code>UserInterface</code> implements Java's <a href="http://docs.oracle.com/javase/6/docs/api/java/lang/Runnable.html" target="_blank">Runnable</a> interface, which allows us to execute a threaded program. Executing a threaded program means that we execute different parts of the program at the same time. We do not dig deeper into threads, but a further information on threads is provided by the course <em>Operating Systems</em>.</p>

<pre class="sh_java sh_sourceCode">    <span class="sh_keyword">private</span> <span class="sh_usertype">JFrame</span><span class="sh_normal"> </span>frame<span class="sh_symbol">;</span>
</pre>

<p>The user interface contains a <code>JFrame</code> object as variable, which is the basic element of a visible user interface. All user interface components are added to the <code>JFrame</code> object component container. Note that <strong>object variables cannot be initiated outside the methods</strong>. For instance, an initialisation of the object variable <code>JFrame</code> with the class definition <code>"private JFrame frame = new JFrame()"</code> would evade user interface thread execution order, and it can lead to a breakdown.</p>

<pre class="sh_java sh_sourceCode">    @Override
    <span class="sh_keyword">public</span> <span class="sh_type">void</span> <span class="sh_function">run</span><span class="sh_symbol">()</span> <span class="sh_cbracket">{</span>
        frame <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">JFrame</span><span class="sh_symbol">(</span><span class="sh_string">"Title"</span><span class="sh_symbol">);</span>
        frame<span class="sh_symbol">.</span><span class="sh_function">setPreferredSize</span><span class="sh_symbol">(</span><span class="sh_keyword">new</span> <span class="sh_function">Dimension</span><span class="sh_symbol">(</span><span class="sh_number">200</span><span class="sh_symbol">,</span> <span class="sh_number">100</span><span class="sh_symbol">));</span>

        frame<span class="sh_symbol">.</span><span class="sh_function">setDefaultCloseOperation</span><span class="sh_symbol">(</span>WindowConstants<span class="sh_symbol">.</span>EXIT_ON_CLOSE<span class="sh_symbol">);</span>

        <span class="sh_function">createComponents</span><span class="sh_symbol">(</span>frame<span class="sh_symbol">.</span><span class="sh_function">getContentPane</span><span class="sh_symbol">());</span>

        frame<span class="sh_symbol">.</span><span class="sh_function">pack</span><span class="sh_symbol">();</span>
        frame<span class="sh_symbol">.</span><span class="sh_function">setVisible</span><span class="sh_symbol">(</span><span class="sh_keyword">true</span><span class="sh_symbol">);</span>
    <span class="sh_cbracket">}</span>
</pre>

<p>The interface <code>Runnable</code> defines the method <code>public void run()</code>, which has to be implemented by all classes which implement the interface. With the method <code>public void run()</code>, we first create a new JFrame whose title is <code>"Title"</code>. After this, we define the frame size whose width is 200 pixels and height is 100 pixels. The statement <code>frame.setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);</code> tells to the JFrame object that the user interface has to close when the user presses the cross icon.</p>

<p>Afterwards, we call the method <code>createComponents</code> which is defined lower down in the class. The method is given <code>JFrame</code>'s <em><a href="http://docs.oracle.com/javase/6/docs/api/java/awt/Container.html" target="_blank">Container</a></em> object as parameter, where we can add user interface components.</p>

<p>Finally, we call the method <code>frame.pack()</code> which packs the JFrame object as defined before and sorts the user interface components of the Container object contained by JFrame. At the end, we call the method <code>frame.setVisible(true)</code>, to show the user interface to the user.</p>

<pre class="sh_java sh_sourceCode">    <span class="sh_keyword">private</span> <span class="sh_type">void</span> <span class="sh_function">createComponents</span><span class="sh_symbol">(</span><span class="sh_usertype">Container</span><span class="sh_normal"> </span>container<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span>
    <span class="sh_cbracket">}</span>
</pre>

<p>In the method <code>createComponents</code> we add user interface components to the <code>JFrame</code>'s container. In our example there is no UI component in addition to our JFrame window. The class <code>UserInterface</code> has also the method <code>getFrame</code> which we can use to retrieve the JFrame object which is encapsulated in the class.</p>

<p>Swing user interfaces are started through the method <code>invokeLater</code>, which is provided by the class <code><a href="http://docs.oracle.com/javase/6/docs/api/javax/swing/SwingUtilities.html" target="_blank">SwingUtilities</a></code>. <code>invokeLater</code> receives as parameter an object which implements the interface <code>Runnable</code>. The method adds the <code>Runnable</code> object to the execution queue and calls it as soon as possible. With the class<code>SwingUtilities</code>, we can start new threads when we need them.</p>

<pre class="sh_java sh_sourceCode"><span class="sh_preproc">import</span> javax<span class="sh_symbol">.</span>swing<span class="sh_symbol">.</span>SwingUtilities<span class="sh_symbol">;</span>

<span class="sh_keyword">public</span> <span class="sh_keyword">class</span><span class="sh_normal"> </span><span class="sh_classname">Main</span> <span class="sh_cbracket">{</span>

    <span class="sh_keyword">public</span> <span class="sh_keyword">static</span> <span class="sh_type">void</span> <span class="sh_function">main</span><span class="sh_symbol">(</span>String<span class="sh_symbol">[]</span> args<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span>
        <span class="sh_usertype">UserInterface</span><span class="sh_normal"> </span>ui <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">UserInterface</span><span class="sh_symbol">();</span>
        SwingUtilities<span class="sh_symbol">.</span><span class="sh_function">invokeLater</span><span class="sh_symbol">(</span>ui<span class="sh_symbol">);</span>
    <span class="sh_cbracket">}</span>
<span class="sh_cbracket">}</span>
</pre>


<p>When we execute the main method above, the user interface we have defined in the class <code>UserInterface</code> appears in our screen.</p>

    <p><img src="https://www.cs.helsinki.fi/group/java/k13/ohja/img-ohja/week5/first-ui.png"></p>


<h3> UI Components</h3>


<p>User Interfaces are composed of a background window (JFrame) and a component Container, as well as the UI components which are set into the container. UI components are different kinds of buttons, texts, and other items. Every component has its own class. It's useful to get accustomed to Oracle visual sequence of components at the address <a href="http://docs.oracle.com/javase/tutorial/uiswing/components/index.html" target="_blank">http://docs.oracle.com/javase/tutorial/uiswing/components/index.html</a>.</p>

<h4> Text</h4>

<p>Text can be displayed with the help of the class <code><a href="http://docs.oracle.com/javase/6/docs/api/javax/swing/JLabel.html" target="_blank">JLabel</a></code>. <code>JLabel</code> provides a UI component which can be assigned text and whose text can be modified. The text is assigned either in the constructor, or separately, with the <code>setText</code> method.</p>

<p>Let's modify our UI container to display text. We create a new JLabel text component within the method <code>createComponents</code>. Then we retrieve the <code>Container</code> object from our <code>JFrame</code> object, and we add JLabel to Container using its <code>add</code> method.</p>

<pre class="sh_java sh_sourceCode">    <span class="sh_keyword">private</span> <span class="sh_type">void</span> <span class="sh_function">createComponents</span><span class="sh_symbol">(</span><span class="sh_usertype">Container</span><span class="sh_normal"> </span>container<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span>
        <span class="sh_usertype">JLabel</span><span class="sh_normal"> </span>text <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">JLabel</span><span class="sh_symbol">(</span><span class="sh_string">"Text field!"</span><span class="sh_symbol">);</span>
        container<span class="sh_symbol">.</span><span class="sh_function">add</span><span class="sh_symbol">(</span>text<span class="sh_symbol">);</span>
    <span class="sh_cbracket">}</span>
</pre>

<p>As you see from the code above, JLabel shall display the text <code>"Text field!"</code>. When we execute the user interface, we see the following window.</p>

    <p><img src="https://www.cs.helsinki.fi/group/java/k13/ohja/img-ohja/week5/text-field.png"></p>


<div class="tehtavat">
    <p class="heading" id="e36">Exercise 36: Greeter</p>

<p>Implement a user interface which displays the text "Hi!". The width of the user interface (i.e. of the JFrame object) has to be at least 400px, its height 200px, and its title should be "Swing on". The JFrame object should be created and become visible inside the method <code>run()</code>, and the text components are added to the user interface with the method <code>createComponents(Container container)</code>.</p>

<p><strong>ATTENTION: The ui object variables have to be initiated in the methods or in the constructor! Do not initiate an object variable directly in its definition.</strong></p>
</div>

<h4> Buttons</h4>

<p>You can add buttons to your user interface using the class <code>JButton</code>. Adding a JButton object to your user interface is similar to adding a JLabel object.</p>

<pre class="sh_java sh_sourceCode">    <span class="sh_keyword">private</span> <span class="sh_type">void</span> <span class="sh_function">createComponents</span><span class="sh_symbol">(</span><span class="sh_usertype">Container</span><span class="sh_normal"> </span>container<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span>
        <span class="sh_usertype">JButton</span><span class="sh_normal"> </span>button <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">JButton</span><span class="sh_symbol">(</span><span class="sh_string">"Click!"</span><span class="sh_symbol">);</span>
        container<span class="sh_symbol">.</span><span class="sh_function">add</span><span class="sh_symbol">(</span>button<span class="sh_symbol">);</span>
    <span class="sh_cbracket">}</span>
</pre>

    <p><img src="https://www.cs.helsinki.fi/group/java/k13/ohja/img-ohja/week5/click.png"></p>

<p>Next, we try to add both text and a button to our user interface.</p>

<pre class="sh_java sh_sourceCode">    <span class="sh_keyword">private</span> <span class="sh_type">void</span> <span class="sh_function">createComponents</span><span class="sh_symbol">(</span><span class="sh_usertype">Container</span><span class="sh_normal"> </span>container<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span>
        <span class="sh_usertype">JButton</span><span class="sh_normal"> </span>button <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">JButton</span><span class="sh_symbol">(</span><span class="sh_string">"Click!"</span><span class="sh_symbol">);</span>
        container<span class="sh_symbol">.</span><span class="sh_function">add</span><span class="sh_symbol">(</span>button<span class="sh_symbol">);</span>
        <span class="sh_usertype">JLabel</span><span class="sh_normal"> </span>text <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">JLabel</span><span class="sh_symbol">(</span><span class="sh_string">"Text."</span><span class="sh_symbol">);</span>
        container<span class="sh_symbol">.</span><span class="sh_function">add</span><span class="sh_symbol">(</span>text<span class="sh_symbol">);</span>
    <span class="sh_cbracket">}</span>
</pre>

<p>When we execute the program we see the following user interface.</p>

    <p><img src="https://www.cs.helsinki.fi/group/java/k13/ohja/img-ohja/week5/text.png"></p>

<p>Only the last component we have added is visible, and our program does not work as we would expect. What is the problem, in fact?</p>

<h3> Setting up UI Components</h3>

<p>All UI components have got their own location in the user interface. The component location is defined by the UI <em>Layout Manager</em>. Before, when we tried to add many different components to our <code>Container</code> object, only one component became visible. Every <code>Container</code> object has a default UI layout manager: <code><a href="http://docs.oracle.com/javase/6/docs/api/java/awt/BorderLayout.html" target="_blank">BorderLayout</a></code>.</p>

<p>BorderLayout places the UI components to five areas: the user interface centre and the four compass points.  When we use the Container's <code>add</code> method, we can give it another parameter, clarifying where we would like to place the component. the BorderLayout class has five class variables available for use: <code>BorderLayout.NORTH</code>, <code>BorderLayout.EAST</code>, <code>BorderLayout.SOUTH</code>, <code>BorderLayout.WEST</code>, ja <code>BorderLayout.CENTER</code>.</p>

<p>The UI layout manager we want to use is assigned to the <code>Container</code> object in the parameter of the method <code>setLauout</code>. In addition to the UI component, the method <code>add</code> can also be assigned the location wehere the component should be placed. In the example below, we assign a component to every BorderLayout location.</p>

<pre class="sh_java sh_sourceCode">    <span class="sh_keyword">private</span> <span class="sh_type">void</span> <span class="sh_function">createComponents</span><span class="sh_symbol">(</span><span class="sh_usertype">Container</span><span class="sh_normal"> </span>container<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span>
        <span class="sh_comment">// the following line is not essential in this case, because BorderLayout is default in JFrame</span>
        container<span class="sh_symbol">.</span><span class="sh_function">setLayout</span><span class="sh_symbol">(</span><span class="sh_keyword">new</span> <span class="sh_function">BorderLayout</span><span class="sh_symbol">());</span>

        container<span class="sh_symbol">.</span><span class="sh_function">add</span><span class="sh_symbol">(</span><span class="sh_keyword">new</span> <span class="sh_function">JButton</span><span class="sh_symbol">(</span><span class="sh_string">"North"</span><span class="sh_symbol">),</span> BorderLayout<span class="sh_symbol">.</span>NORTH<span class="sh_symbol">);</span>
        container<span class="sh_symbol">.</span><span class="sh_function">add</span><span class="sh_symbol">(</span><span class="sh_keyword">new</span> <span class="sh_function">JButton</span><span class="sh_symbol">(</span><span class="sh_string">"East"</span><span class="sh_symbol">),</span> BorderLayout<span class="sh_symbol">.</span>EAST<span class="sh_symbol">);</span>
        container<span class="sh_symbol">.</span><span class="sh_function">add</span><span class="sh_symbol">(</span><span class="sh_keyword">new</span> <span class="sh_function">JButton</span><span class="sh_symbol">(</span><span class="sh_string">"South"</span><span class="sh_symbol">),</span> BorderLayout<span class="sh_symbol">.</span>SOUTH<span class="sh_symbol">);</span>
        container<span class="sh_symbol">.</span><span class="sh_function">add</span><span class="sh_symbol">(</span><span class="sh_keyword">new</span> <span class="sh_function">JButton</span><span class="sh_symbol">(</span><span class="sh_string">"West"</span><span class="sh_symbol">),</span> BorderLayout<span class="sh_symbol">.</span>WEST<span class="sh_symbol">);</span>
        container<span class="sh_symbol">.</span><span class="sh_function">add</span><span class="sh_symbol">(</span><span class="sh_keyword">new</span> <span class="sh_function">JButton</span><span class="sh_symbol">(</span><span class="sh_string">"Center"</span><span class="sh_symbol">),</span> BorderLayout<span class="sh_symbol">.</span>CENTER<span class="sh_symbol">);</span>

        container<span class="sh_symbol">.</span><span class="sh_function">add</span><span class="sh_symbol">(</span><span class="sh_keyword">new</span> <span class="sh_function">JButton</span><span class="sh_symbol">(</span><span class="sh_string">"Default (Center)"</span><span class="sh_symbol">));</span>
    <span class="sh_cbracket">}</span>
</pre>

<p>Notice that the button <code>"Center"</code> is not visible in our user interface because the button <code>"Default (Center)"</code> is assigned to its place by default. A container with the code above will look like the following after increasing its size manually.</p>

    <p><img src="https://www.cs.helsinki.fi/group/java/k13/ohja/img-ohja/week5/layout-override.png"></p>

<p>As for UI components, there are also many UI layout managers. Oracle has a visual guide to learn more about UI layout managers at <a href="http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html" target="_blank">http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html</a>. Below, we introduce the layout manager <code><a href="http://docs.oracle.com/javase/6/docs/api/javax/swing/BoxLayout.html" target="_blank">BoxLayout</a></code>.</p>

<h4> BoxLayout</h4>

<p>When we use BoxLayout, UI components are added into the user interface either horizontally or vertically. The BoxLayout constructor is given a Container object as parameter -- where we have been adding the UI components -- and the layout direction of the UI components. The layout direction can be either <code>BoxLayout.X_AXIS</code>, i.e. components are set up horizontally, or <code>BoxLayout.Y_AXIS</code>, i.e. the componets are set up vertically. Differently than BorderLayout, BoxLayout does not have a limited number of places. In other words, you can add to your Container as many components as you want.</p>

<p>Arranging the user interface with <code>BoxLayout</code> works as using <code>BorderLayout</code>. We first create the layout manager and we assign it to the <code>Container</code> object using its method <code>setLayout</code>. After this, we can add components to the <code>Container</code> object using the <code>add</code> method. We don't need a further parameter specifying the location. Below, you find an example of components placed in horizontal order.</p>

<pre class="sh_java sh_sourceCode">    <span class="sh_keyword">private</span> <span class="sh_type">void</span> <span class="sh_function">createComponents</span><span class="sh_symbol">(</span><span class="sh_usertype">Container</span><span class="sh_normal"> </span>container<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span>
        <span class="sh_usertype">BoxLayout</span><span class="sh_normal"> </span>layout <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">BoxLayout</span><span class="sh_symbol">(</span>container<span class="sh_symbol">,</span> BoxLayout<span class="sh_symbol">.</span>X_AXIS<span class="sh_symbol">);</span>
        container<span class="sh_symbol">.</span><span class="sh_function">setLayout</span><span class="sh_symbol">(</span>layout<span class="sh_symbol">);</span>

        container<span class="sh_symbol">.</span><span class="sh_function">add</span><span class="sh_symbol">(</span><span class="sh_keyword">new</span> <span class="sh_function">JLabel</span><span class="sh_symbol">(</span><span class="sh_string">"First!"</span><span class="sh_symbol">));</span>
        container<span class="sh_symbol">.</span><span class="sh_function">add</span><span class="sh_symbol">(</span><span class="sh_keyword">new</span> <span class="sh_function">JLabel</span><span class="sh_symbol">(</span><span class="sh_string">"Second!"</span><span class="sh_symbol">));</span>
        container<span class="sh_symbol">.</span><span class="sh_function">add</span><span class="sh_symbol">(</span><span class="sh_keyword">new</span> <span class="sh_function">JLabel</span><span class="sh_symbol">(</span><span class="sh_string">"Third!"</span><span class="sh_symbol">));</span>
    <span class="sh_cbracket">}</span>
</pre>

    <p><img src="https://www.cs.helsinki.fi/group/java/k13/ohja/img-ohja/week5/layout-xaxis.png"></p>

<p>Setting up the components vertically does not require major changes. We modify the direction parameter of the <code>BoxLayout</code> constructor: <code>BoxLayout.Y_AXIS</code>.</p>

<pre class="sh_java sh_sourceCode">    <span class="sh_keyword">private</span> <span class="sh_type">void</span> <span class="sh_function">createComponents</span><span class="sh_symbol">(</span><span class="sh_usertype">Container</span><span class="sh_normal"> </span>container<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span>
        <span class="sh_usertype">BoxLayout</span><span class="sh_normal"> </span>layout <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">BoxLayout</span><span class="sh_symbol">(</span>container<span class="sh_symbol">,</span> BoxLayout<span class="sh_symbol">.</span>Y_AXIS<span class="sh_symbol">);</span>
        container<span class="sh_symbol">.</span><span class="sh_function">setLayout</span><span class="sh_symbol">(</span>layout<span class="sh_symbol">);</span>

        container<span class="sh_symbol">.</span><span class="sh_function">add</span><span class="sh_symbol">(</span><span class="sh_keyword">new</span> <span class="sh_function">JLabel</span><span class="sh_symbol">(</span><span class="sh_string">"First!"</span><span class="sh_symbol">));</span>
        container<span class="sh_symbol">.</span><span class="sh_function">add</span><span class="sh_symbol">(</span><span class="sh_keyword">new</span> <span class="sh_function">JLabel</span><span class="sh_symbol">(</span><span class="sh_string">"Second!"</span><span class="sh_symbol">));</span>
        container<span class="sh_symbol">.</span><span class="sh_function">add</span><span class="sh_symbol">(</span><span class="sh_keyword">new</span> <span class="sh_function">JLabel</span><span class="sh_symbol">(</span><span class="sh_string">"Third!"</span><span class="sh_symbol">));</span>
    <span class="sh_cbracket">}</span>
</pre>

    <p><img src="https://www.cs.helsinki.fi/group/java/k13/ohja/img-ohja/week5/layout-yaxis.png"></p>

<p>Using the different layout managers, we can create user interfaces where the components are set up appropriately. Below, there is an example of user interface where the components are placed vertically. First there is some text, and then an optional selection. You can create a multiple-exclusion scope for a set of buttons -- meaning that turning "on" one of those buttons turns off all the others in the group -- using <code><a href="http://docs.oracle.com/javase/6/docs/api/javax/swing/ButtonGroup.html" target="_blank">ButtonGroup</a></code> and <code><a href="http://docs.oracle.com/javase/6/docs/api/javax/swing/JRadioButton.html" target="_blank">JRadioButton</a></code>.</p>

<pre class="sh_java sh_sourceCode">    <span class="sh_keyword">private</span> <span class="sh_type">void</span> <span class="sh_function">createComponents</span><span class="sh_symbol">(</span><span class="sh_usertype">Container</span><span class="sh_normal"> </span>container<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span>
        <span class="sh_usertype">BoxLayout</span><span class="sh_normal"> </span>layout <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">BoxLayout</span><span class="sh_symbol">(</span>container<span class="sh_symbol">,</span> BoxLayout<span class="sh_symbol">.</span>Y_AXIS<span class="sh_symbol">);</span>
        container<span class="sh_symbol">.</span><span class="sh_function">setLayout</span><span class="sh_symbol">(</span>layout<span class="sh_symbol">);</span>

        container<span class="sh_symbol">.</span><span class="sh_function">add</span><span class="sh_symbol">(</span><span class="sh_keyword">new</span> <span class="sh_function">JLabel</span><span class="sh_symbol">(</span><span class="sh_string">"Choose meat or fish:"</span><span class="sh_symbol">));</span>

        <span class="sh_usertype">JRadioButton</span><span class="sh_normal"> </span>meat <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">JRadioButton</span><span class="sh_symbol">(</span><span class="sh_string">"Meat"</span><span class="sh_symbol">);</span>
        <span class="sh_usertype">JRadioButton</span><span class="sh_normal"> </span>fish <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">JRadioButton</span><span class="sh_symbol">(</span><span class="sh_string">"Fish"</span><span class="sh_symbol">);</span>

        <span class="sh_usertype">ButtonGroup</span><span class="sh_normal"> </span>buttonGroup <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">ButtonGroup</span><span class="sh_symbol">();</span>
        buttonGroup<span class="sh_symbol">.</span><span class="sh_function">add</span><span class="sh_symbol">(</span>meat<span class="sh_symbol">);</span>
        buttonGroup<span class="sh_symbol">.</span><span class="sh_function">add</span><span class="sh_symbol">(</span>fish<span class="sh_symbol">);</span>

        container<span class="sh_symbol">.</span><span class="sh_function">add</span><span class="sh_symbol">(</span>meat<span class="sh_symbol">);</span>
        container<span class="sh_symbol">.</span><span class="sh_function">add</span><span class="sh_symbol">(</span>fish<span class="sh_symbol">);</span>
    <span class="sh_cbracket">}</span>
</pre>


    <p>Once the UI is launched, and Meat is selected, the UI looks as follows.</p>

    <p><img src="https://www.cs.helsinki.fi/group/java/k13/ohja/img-ohja/week5/buttongroup.png"></p>


<div class="tehtavat">
    <p class="heading" id="e37">Exercise 37: Survey</p>

<p>Implement a user interface in the exercise body; the interface has to look like the following:</p>

    <p><img src="https://www.cs.helsinki.fi/group/java/k13/ohja/img-ohja/week5/survey.png"></p>

<p>Use <code>BoxLayout</code> as layout manager for your user interface; the components are the classes <code>JLabel</code>, <code>JRadioButton</code>, <code>JCheckBox</code> and <code>JButton</code>.</p>

<p>Use the class <code>ButtonGroup</code> to make sure the options <code>"No reason."</code> and <code>"Because it is fun!"</code> cannot be chosen at the same time.</p>

<p>Make sure that the user interface is big enough so that the user can click the buttons without resizing the interface. For instance, you can use 200 pixels for the width and 300 pixels for the height.</p>
</div>

<h3> Managing Action Events</h3>

<p>So far, even though our user interfaces are beautiful, they are quite boring: they do not react in any way according to the actions done on the interfaces.
Such unresponsiveness does not depend on our user interface components, but on the fact we haven't provided them with any way to listen to action events.</p>

<p>Action event listeners <em>listen</em> the UI components they are assigned to. Always when we perform an action on our UI components -- pressing a button, for instance -- the UI component calls a particular method of all the action event listeners assigned to it. Action event listeners are classes which implement a particular interface, and whose instances can be assigned to UI components. When an action event happens, the UI component goes through all its action event listeners, and calls the method defined by the interface.</p>

<p>The most used action event listener interface with Swing user interfaces is <code><a href="http://docs.oracle.com/javase/6/docs/api/java/awt/event/ActionListener.html">ActionListener</a></code>. The interface <code>ActionListener</code> defines the method <code>void actionPerformed(ActionEvent e)</code>, which receives an <code><a href="http://docs.oracle.com/javase/6/docs/api/java/awt/event/ActionEvent.html" target="_blank">ActionEvent</a></code> object as parameter.</p>

<p>Let's implement our first own action event listener, which has to print a message only when we press the relative button. The class <code>MessageListener</code> implements <code>ActionListener</code> and prints the message <code>"Message received!"</code> when the method <code>actionPerformed</code> is called.</p>

<pre class="sh_java sh_sourceCode"><span class="sh_preproc">import</span> java<span class="sh_symbol">.</span>awt<span class="sh_symbol">.</span>event<span class="sh_symbol">.</span>ActionEvent<span class="sh_symbol">;</span>
<span class="sh_preproc">import</span> java<span class="sh_symbol">.</span>awt<span class="sh_symbol">.</span>event<span class="sh_symbol">.</span>ActionListener<span class="sh_symbol">;</span>

<span class="sh_keyword">public</span> <span class="sh_keyword">class</span><span class="sh_normal"> </span><span class="sh_classname">MessageListener</span> <span class="sh_keyword">implements</span> ActionListener <span class="sh_cbracket">{</span>

    @Override
    <span class="sh_keyword">public</span> <span class="sh_type">void</span> <span class="sh_function">actionPerformed</span><span class="sh_symbol">(</span><span class="sh_usertype">ActionEvent</span><span class="sh_normal"> </span>ae<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span>
        System<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">println</span><span class="sh_symbol">(</span><span class="sh_string">"Message received!"</span><span class="sh_symbol">);</span>
    <span class="sh_cbracket">}</span>
<span class="sh_cbracket">}</span>
</pre>

<p>Next, we create the a <code>JButton</code> for our user interface, and we add a instance of <code>MessageListener</code> to it. The class <code>JButton</code> can be added an action event listener by using the method defined in its parent class <code>AbstractButton</code>: <code>public void addActionListener(ActionListener actionListener)</code>.</p>

<pre class="sh_java sh_sourceCode">    <span class="sh_keyword">private</span> <span class="sh_type">void</span> <span class="sh_function">createComponents</span><span class="sh_symbol">(</span><span class="sh_usertype">Container</span><span class="sh_normal"> </span>container<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span>
        <span class="sh_usertype">JButton</span><span class="sh_normal"> </span>button <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">JButton</span><span class="sh_symbol">(</span><span class="sh_string">"Send!"</span><span class="sh_symbol">);</span>
        button<span class="sh_symbol">.</span><span class="sh_function">addActionListener</span><span class="sh_symbol">(</span><span class="sh_keyword">new</span> <span class="sh_function">MessageListener</span><span class="sh_symbol">());</span>

        container<span class="sh_symbol">.</span><span class="sh_function">add</span><span class="sh_symbol">(</span>button<span class="sh_symbol">);</span>
    <span class="sh_cbracket">}</span>
</pre>

    <p><img src="https://www.cs.helsinki.fi/group/java/k13/ohja/img-ohja/week5/send.png"></p>

<p>When we press the button in our user interface we see the following message.</p>

<pre>Message received!
</pre>

<h4> Handling Objects in the Action Event Listeners</h4>

<p>Often, we want that an action event listener modified the state of an object. In order to have access to the object in the action event listener, the action event listener constructor has to be assigned a reference to the obejct concerned. Action eventlisteners are exactly similar to other Java's class, and we can program their whole functionality.</p>

<p>Let's take the following user interface, which has two <code><a href="http://docs.oracle.com/javase/6/docs/api/javax/swing/JTextArea.html" target="_blank">JTextArea</a></code>s -- where the user can input text, and a <code>JButton</code>. The user interface makes use of <code><a href="http://docs.oracle.com/javase/6/docs/api/java/awt/GridLayout.html" target="_blank">GridLayout</a></code>, which makes the user interface look like a coordinate system. In the GridLayout constructor, we defined one line and three columns.</p>

<pre class="sh_java sh_sourceCode">    <span class="sh_keyword">private</span> <span class="sh_type">void</span> <span class="sh_function">createComponents</span><span class="sh_symbol">(</span><span class="sh_usertype">Container</span><span class="sh_normal"> </span>container<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span>
        <span class="sh_usertype">GridLayout</span><span class="sh_normal"> </span>layout <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">GridLayout</span><span class="sh_symbol">(</span><span class="sh_number">1</span><span class="sh_symbol">,</span> <span class="sh_number">3</span><span class="sh_symbol">);</span>
        container<span class="sh_symbol">.</span><span class="sh_function">setLayout</span><span class="sh_symbol">(</span>layout<span class="sh_symbol">);</span>

        <span class="sh_usertype">JTextArea</span><span class="sh_normal"> </span>textAreaLeft <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">JTextArea</span><span class="sh_symbol">(</span><span class="sh_string">"The Copier"</span><span class="sh_symbol">);</span>
        <span class="sh_usertype">JTextArea</span><span class="sh_normal"> </span>textAreaRight <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">JTextArea</span><span class="sh_symbol">();</span>
        <span class="sh_usertype">JButton</span><span class="sh_normal"> </span>copyButton <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">JButton</span><span class="sh_symbol">(</span><span class="sh_string">"Copy!"</span><span class="sh_symbol">);</span>

        container<span class="sh_symbol">.</span><span class="sh_function">add</span><span class="sh_symbol">(</span>textAreaLeft<span class="sh_symbol">);</span>
        container<span class="sh_symbol">.</span><span class="sh_function">add</span><span class="sh_symbol">(</span>copyButton<span class="sh_symbol">);</span>
        container<span class="sh_symbol">.</span><span class="sh_function">add</span><span class="sh_symbol">(</span>textAreaRight<span class="sh_symbol">);</span>
    <span class="sh_cbracket">}</span>
</pre>

    <p>After a manual resize, the UI looks like the following.</p>

    <p><img src="https://www.cs.helsinki.fi/group/java/k13/ohja/img-ohja/week5/copier.png"></p>

<p>We want to implement our user interface so that the text in the left area would be copied into the right area when we press the <code>JButton</code>. This is possible by implementing an action event listener. Let's create the class <code>AreaCopier</code> which implements <code>ActionListener</code> and copies the text from one to the other JTextArea.</p>


<pre class="sh_java sh_sourceCode"><span class="sh_preproc">import</span> java<span class="sh_symbol">.</span>awt<span class="sh_symbol">.</span>event<span class="sh_symbol">.</span>ActionEvent<span class="sh_symbol">;</span>
<span class="sh_preproc">import</span> java<span class="sh_symbol">.</span>awt<span class="sh_symbol">.</span>event<span class="sh_symbol">.</span>ActionListener<span class="sh_symbol">;</span>
<span class="sh_preproc">import</span> javax<span class="sh_symbol">.</span>swing<span class="sh_symbol">.</span>JTextArea<span class="sh_symbol">;</span>

<span class="sh_keyword">public</span> <span class="sh_keyword">class</span><span class="sh_normal"> </span><span class="sh_classname">AreaCopier</span> <span class="sh_keyword">implements</span> ActionListener <span class="sh_cbracket">{</span>

    <span class="sh_keyword">private</span> <span class="sh_usertype">JTextArea</span><span class="sh_normal"> </span>origin<span class="sh_symbol">;</span>
    <span class="sh_keyword">private</span> <span class="sh_usertype">JTextArea</span><span class="sh_normal"> </span>destination<span class="sh_symbol">;</span>

    <span class="sh_keyword">public</span> <span class="sh_function">AreaCopier</span><span class="sh_symbol">(</span><span class="sh_usertype">JTextArea</span><span class="sh_normal"> </span>origin<span class="sh_symbol">,</span> <span class="sh_usertype">JTextArea</span><span class="sh_normal"> </span>destination<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span>
        <span class="sh_keyword">this</span><span class="sh_symbol">.</span>origin <span class="sh_symbol">=</span> origin<span class="sh_symbol">;</span>
        <span class="sh_keyword">this</span><span class="sh_symbol">.</span>destination <span class="sh_symbol">=</span> destination<span class="sh_symbol">;</span>
    <span class="sh_cbracket">}</span>

    @Override
    <span class="sh_keyword">public</span> <span class="sh_type">void</span> <span class="sh_function">actionPerformed</span><span class="sh_symbol">(</span><span class="sh_usertype">ActionEvent</span><span class="sh_normal"> </span>ae<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span>
        <span class="sh_keyword">this</span><span class="sh_symbol">.</span>destination<span class="sh_symbol">.</span><span class="sh_function">setText</span><span class="sh_symbol">(</span><span class="sh_keyword">this</span><span class="sh_symbol">.</span>origin<span class="sh_symbol">.</span><span class="sh_function">getText</span><span class="sh_symbol">());</span>
    <span class="sh_cbracket">}</span>
<span class="sh_cbracket">}</span>
</pre>

<p>Adding the new action event listener to the <code>JButton</code> object is possible using the method <code>addActionListener</code>.</p>

<pre class="sh_java sh_sourceCode">    <span class="sh_keyword">private</span> <span class="sh_type">void</span> <span class="sh_function">createComponents</span><span class="sh_symbol">(</span><span class="sh_usertype">Container</span><span class="sh_normal"> </span>container<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span>
        <span class="sh_usertype">GridLayout</span><span class="sh_normal"> </span>layout <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">GridLayout</span><span class="sh_symbol">(</span><span class="sh_number">1</span><span class="sh_symbol">,</span> <span class="sh_number">3</span><span class="sh_symbol">);</span>
        container<span class="sh_symbol">.</span><span class="sh_function">setLayout</span><span class="sh_symbol">(</span>layout<span class="sh_symbol">);</span>

        <span class="sh_usertype">JTextArea</span><span class="sh_normal"> </span>textAreaLeft <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">JTextArea</span><span class="sh_symbol">(</span><span class="sh_string">"The Copier"</span><span class="sh_symbol">);</span>
        <span class="sh_usertype">JTextArea</span><span class="sh_normal"> </span>textAreaRight <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">JTextArea</span><span class="sh_symbol">();</span>
        <span class="sh_usertype">JButton</span><span class="sh_normal"> </span>copyButton <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">JButton</span><span class="sh_symbol">(</span><span class="sh_string">"Copy!"</span><span class="sh_symbol">);</span>

        <span class="sh_usertype">AreaCopier</span><span class="sh_normal"> </span>copier <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">AreaCopier</span><span class="sh_symbol">(</span>textAreaLeft<span class="sh_symbol">,</span> textAreaRight<span class="sh_symbol">);</span>
        copyButton<span class="sh_symbol">.</span><span class="sh_function">addActionListener</span><span class="sh_symbol">(</span>copier<span class="sh_symbol">);</span>

        container<span class="sh_symbol">.</span><span class="sh_function">add</span><span class="sh_symbol">(</span>textAreaLeft<span class="sh_symbol">);</span>
        container<span class="sh_symbol">.</span><span class="sh_function">add</span><span class="sh_symbol">(</span>copyButton<span class="sh_symbol">);</span>
        container<span class="sh_symbol">.</span><span class="sh_function">add</span><span class="sh_symbol">(</span>textAreaRight<span class="sh_symbol">);</span>
    <span class="sh_cbracket">}</span>
</pre>


<p>When we press the button, the text in the left area is copied into the right one.</p>

    <p><img src="https://www.cs.helsinki.fi/group/java/k13/ohja/img-ohja/week5/copier2.png"></p>

<div class="tehtavat">
    <p class="heading" id="e38">Exercise 38: Notice Board</p>

<p>Implement a user interface in the exercise body; the interface has to look like the following:</p>

    <p><img src="https://www.cs.helsinki.fi/group/java/k13/ohja/img-ohja/week5/noticeboard.png"></p>

<p>The program has to be composed of the following classes, which are contained in the package <code>noticeboard</code>. The class <code>NoticeBoard</code> is the user interface class, and it is started from the <code>Main</code> class. The notice board has various different components: <code>JTextField</code>, <code>JButton</code>, and <code>JLabel</code>. You can manage the layout of the ui components with <code>GridLayout</code>: the call <code>new GridLayout(3, 1)</code> creates a new layout manager, which sets up three ui elements vertically.</p>

<p>The application also has to contain the class <code>ActionEventListener</code>, which implements the interface <code>ActionListener</code>. The action event listener is connected to the button, and when pressed, it has to copy the contents of the JTextField into JLabel. At the same time, it wipes the JTextField by setting its contents as "".</p>

<p>Make sure that the user interface is big enough to click on each button.</p>
</div>

<h3> Separating Application and UI Logic</h3>

<p>Mixing the application logic (the functionality to print or compute, for instance) and the user interface together in the same classes is usually a bad thing. It makes much more difficult to test and modify a program, and it makes the code much more difficult to read. As the single responsibility principle states: each class should have only one clear responsibility. Separating the application logic from the UI logic works smoothly planning your interfaces appropriately. Let's suppose, that we have got a the class <code>PersonRecord</code>, and we want to implement a user interface to record people.</p>

<pre class="sh_java sh_sourceCode"><span class="sh_keyword">public</span> <span class="sh_keyword">interface</span><span class="sh_normal"> </span><span class="sh_classname">PersonRecord</span> <span class="sh_cbracket">{</span>
    <span class="sh_type">void</span> <span class="sh_function">record</span><span class="sh_symbol">(</span><span class="sh_usertype">Person</span><span class="sh_normal"> </span>person<span class="sh_symbol">);</span>
    <span class="sh_usertype">Person</span><span class="sh_normal"> </span><span class="sh_function">get</span><span class="sh_symbol">(</span><span class="sh_usertype">String</span><span class="sh_normal"> </span>id<span class="sh_symbol">);</span>

    <span class="sh_type">void</span> <span class="sh_function">delete</span><span class="sh_symbol">(</span><span class="sh_usertype">Person</span><span class="sh_normal"> </span>person<span class="sh_symbol">);</span>
    <span class="sh_type">void</span> <span class="sh_function">delete</span><span class="sh_symbol">(</span><span class="sh_usertype">String</span><span class="sh_normal"> </span>id<span class="sh_symbol">);</span>
    <span class="sh_type">void</span> <span class="sh_function">deleteAll</span><span class="sh_symbol">();</span>

    <span class="sh_usertype">Collection&lt;Person&gt;</span><span class="sh_normal"> </span><span class="sh_function">getAll</span><span class="sh_symbol">();</span>
<span class="sh_cbracket">}</span>
</pre>

<h4> UI Implementation</h4>

<p>When we implement our user interface, a good start is adding the components to it. If we want to record people, we need fields for their name and their ID number, as well as a button to add the person. We use Java's <code><a href="http://docs.oracle.com/javase/6/docs/api/javax/swing/JTextField.html" target="_blank">JTextField</a></code> to input text, and the class <code>JButton</code> to implement our button. In addition, we also create <code>JLabel</code> textual descriptions which tell the user what to do.</p>

<p>For our UI layout, we use <code>GridLayout</code>. There are three lines and two columns in our user interface. We add the action event listener later. The UI method <code>createComponents</code> looks like the following.</p>

<pre class="sh_java sh_sourceCode">    <span class="sh_keyword">private</span> <span class="sh_type">void</span> <span class="sh_function">createComponents</span><span class="sh_symbol">(</span><span class="sh_usertype">Container</span><span class="sh_normal"> </span>container<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span>
        <span class="sh_usertype">GridLayout</span><span class="sh_normal"> </span>layout <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">GridLayout</span><span class="sh_symbol">(</span><span class="sh_number">3</span><span class="sh_symbol">,</span> <span class="sh_number">2</span><span class="sh_symbol">);</span>
        container<span class="sh_symbol">.</span><span class="sh_function">setLayout</span><span class="sh_symbol">(</span>layout<span class="sh_symbol">);</span>

        <span class="sh_usertype">JLabel</span><span class="sh_normal"> </span>textName <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">JLabel</span><span class="sh_symbol">(</span><span class="sh_string">"Name: "</span><span class="sh_symbol">);</span>
        <span class="sh_usertype">JTextField</span><span class="sh_normal"> </span>nameField <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">JTextField</span><span class="sh_symbol">();</span>
        <span class="sh_usertype">JLabel</span><span class="sh_normal"> </span>textID <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">JLabel</span><span class="sh_symbol">(</span><span class="sh_string">"ID: "</span><span class="sh_symbol">);</span>
        <span class="sh_usertype">JTextField</span><span class="sh_normal"> </span>idField <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">JTextField</span><span class="sh_symbol">();</span>

        <span class="sh_usertype">JButton</span><span class="sh_normal"> </span>addButton <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">JButton</span><span class="sh_symbol">(</span><span class="sh_string">"Add!"</span><span class="sh_symbol">);</span>
        <span class="sh_comment">// event listener</span>

        container<span class="sh_symbol">.</span><span class="sh_function">add</span><span class="sh_symbol">(</span>textName<span class="sh_symbol">);</span>
        container<span class="sh_symbol">.</span><span class="sh_function">add</span><span class="sh_symbol">(</span>nameField<span class="sh_symbol">);</span>
        container<span class="sh_symbol">.</span><span class="sh_function">add</span><span class="sh_symbol">(</span>textID<span class="sh_symbol">);</span>
        container<span class="sh_symbol">.</span><span class="sh_function">add</span><span class="sh_symbol">(</span>idField<span class="sh_symbol">);</span>
        container<span class="sh_symbol">.</span><span class="sh_function">add</span><span class="sh_symbol">(</span><span class="sh_keyword">new</span> <span class="sh_function">JLabel</span><span class="sh_symbol">(</span><span class="sh_string">""</span><span class="sh_symbol">));</span>
        container<span class="sh_symbol">.</span><span class="sh_function">add</span><span class="sh_symbol">(</span>addButton<span class="sh_symbol">);</span>
    <span class="sh_cbracket">}</span>
</pre>

<p>After adding the information, our user interface looks like the following.</p>

    <p><img src="https://www.cs.helsinki.fi/group/java/k13/ohja/img-ohja/week5/persondetails.png"></p>

<p>The action event listener has to know about the recording functionality (<code>PersonRecord</code> interface), as well as the fields it uses. Let's create the class <code>PersonRecordListener</code> which implements <code>ActionListener</code>. As constructor parameter, the class is assigned an object which implements the interface <code>PersonRecord</code>, as well as two <code>JTextField</code> objects which stand for the name and ID fields. In the method <code>actionPerformed</code> we create a new <code>Person</code> object and we record it using the <code>record</code> method of our <code>PersonRecord</code> object.</p>

<pre class="sh_java sh_sourceCode"><span class="sh_keyword">public</span> <span class="sh_keyword">class</span><span class="sh_normal"> </span><span class="sh_classname">PersonRecordListener</span> <span class="sh_keyword">implements</span> ActionListener <span class="sh_cbracket">{</span>

    <span class="sh_keyword">private</span> <span class="sh_usertype">PersonRecord</span><span class="sh_normal"> </span>personRecord<span class="sh_symbol">;</span>
    <span class="sh_keyword">private</span> <span class="sh_usertype">JTextField</span><span class="sh_normal"> </span>nameField<span class="sh_symbol">;</span>
    <span class="sh_keyword">private</span> <span class="sh_usertype">JTextField</span><span class="sh_normal"> </span>idField<span class="sh_symbol">;</span>

    <span class="sh_keyword">public</span> <span class="sh_function">PersonRecordListener</span><span class="sh_symbol">(</span><span class="sh_usertype">PersonRecord</span><span class="sh_normal"> </span>personRecord<span class="sh_symbol">,</span> <span class="sh_usertype">JTextField</span><span class="sh_normal"> </span>nameField<span class="sh_symbol">,</span> <span class="sh_usertype">JTextField</span><span class="sh_normal"> </span>idField<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span>
        <span class="sh_keyword">this</span><span class="sh_symbol">.</span>personRecord <span class="sh_symbol">=</span> personRecord<span class="sh_symbol">;</span>
        <span class="sh_keyword">this</span><span class="sh_symbol">.</span>nameField <span class="sh_symbol">=</span> nameField<span class="sh_symbol">;</span>
        <span class="sh_keyword">this</span><span class="sh_symbol">.</span>idField <span class="sh_symbol">=</span> idField<span class="sh_symbol">;</span>
    <span class="sh_cbracket">}</span>

    @Override
    <span class="sh_keyword">public</span> <span class="sh_type">void</span> <span class="sh_function">actionPerformed</span><span class="sh_symbol">(</span><span class="sh_usertype">ActionEvent</span><span class="sh_normal"> </span>ae<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span>
        <span class="sh_usertype">Person</span><span class="sh_normal"> </span>person <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">Person</span><span class="sh_symbol">(</span>nameField<span class="sh_symbol">.</span><span class="sh_function">getText</span><span class="sh_symbol">(),</span> idField<span class="sh_symbol">.</span><span class="sh_function">getText</span><span class="sh_symbol">());</span>
        <span class="sh_keyword">this</span><span class="sh_symbol">.</span>personRecord<span class="sh_symbol">.</span><span class="sh_function">record</span><span class="sh_symbol">(</span>person<span class="sh_symbol">);</span>
    <span class="sh_cbracket">}</span>
<span class="sh_cbracket">}</span>
</pre>

<p>In order to retrieve a <code>PersonRecord</code> reference to <code>PersonRecordListener</code>, the user interface must have access to it. Let's add to our user interface the object variable <code>private PersonRecord personRecord</code> which is set up in the constructor. We also modify the constructor of the class <code>UserInterface</code>, which is assigned a class which implements the interface <code>PersonRecord</code>.</p>

<pre class="sh_java sh_sourceCode"><span class="sh_keyword">public</span> <span class="sh_keyword">class</span><span class="sh_normal"> </span><span class="sh_classname">UserInteface</span> <span class="sh_keyword">implements</span> Runnable <span class="sh_cbracket">{</span>

    <span class="sh_keyword">private</span> <span class="sh_usertype">JFrame</span><span class="sh_normal"> </span>frame<span class="sh_symbol">;</span>
    <span class="sh_keyword">private</span> <span class="sh_usertype">PersonRecord</span><span class="sh_normal"> </span>personRecord<span class="sh_symbol">;</span>

    <span class="sh_keyword">public</span> <span class="sh_function">UserInteface</span><span class="sh_symbol">(</span><span class="sh_usertype">PersonRecord</span><span class="sh_normal"> </span>personRecord<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span>
        <span class="sh_keyword">this</span><span class="sh_symbol">.</span>personRecord <span class="sh_symbol">=</span> personRecord<span class="sh_symbol">;</span>
    <span class="sh_cbracket">}</span>
    <span class="sh_comment">// ...</span>


</pre>

<p>Now we can create the action event listener <code>PersonRecordListener</code>, which is given both a <code>PersonRecord</code> reference and the fields.</p>

<pre class="sh_java sh_sourceCode">    <span class="sh_keyword">private</span> <span class="sh_type">void</span> <span class="sh_function">createComponents</span><span class="sh_symbol">(</span><span class="sh_usertype">Container</span><span class="sh_normal"> </span>container<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span>
        <span class="sh_usertype">GridLayout</span><span class="sh_normal"> </span>layout <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">GridLayout</span><span class="sh_symbol">(</span><span class="sh_number">3</span><span class="sh_symbol">,</span> <span class="sh_number">2</span><span class="sh_symbol">);</span>
        container<span class="sh_symbol">.</span><span class="sh_function">setLayout</span><span class="sh_symbol">(</span>layout<span class="sh_symbol">);</span>

        <span class="sh_usertype">JLabel</span><span class="sh_normal"> </span>nameText <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">JLabel</span><span class="sh_symbol">(</span><span class="sh_string">"Name: "</span><span class="sh_symbol">);</span>
        <span class="sh_usertype">JTextField</span><span class="sh_normal"> </span>nameField <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">JTextField</span><span class="sh_symbol">();</span>
        <span class="sh_usertype">JLabel</span><span class="sh_normal"> </span>idText <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">JLabel</span><span class="sh_symbol">(</span><span class="sh_string">"ID: "</span><span class="sh_symbol">);</span>
        <span class="sh_usertype">JTextField</span><span class="sh_normal"> </span>idField <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">JTextField</span><span class="sh_symbol">();</span>

        <span class="sh_usertype">JButton</span><span class="sh_normal"> </span>addButton <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">JButton</span><span class="sh_symbol">(</span><span class="sh_string">"Add!"</span><span class="sh_symbol">);</span>
        <span class="sh_usertype">PersonRecordListener</span><span class="sh_normal"> </span>listener <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">PersonRecordListener</span><span class="sh_symbol">(</span>personRecord<span class="sh_symbol">,</span> nameField<span class="sh_symbol">,</span> idField<span class="sh_symbol">);</span>
        addButton<span class="sh_symbol">.</span><span class="sh_function">addActionListener</span><span class="sh_symbol">(</span>listener<span class="sh_symbol">);</span>

        container<span class="sh_symbol">.</span><span class="sh_function">add</span><span class="sh_symbol">(</span>nameText<span class="sh_symbol">);</span>
        container<span class="sh_symbol">.</span><span class="sh_function">add</span><span class="sh_symbol">(</span>nameField<span class="sh_symbol">);</span>
        container<span class="sh_symbol">.</span><span class="sh_function">add</span><span class="sh_symbol">(</span>idText<span class="sh_symbol">);</span>
        container<span class="sh_symbol">.</span><span class="sh_function">add</span><span class="sh_symbol">(</span>idField<span class="sh_symbol">);</span>
        container<span class="sh_symbol">.</span><span class="sh_function">add</span><span class="sh_symbol">(</span><span class="sh_keyword">new</span> <span class="sh_function">JLabel</span><span class="sh_symbol">(</span><span class="sh_string">""</span><span class="sh_symbol">));</span>
        container<span class="sh_symbol">.</span><span class="sh_function">add</span><span class="sh_symbol">(</span>addButton<span class="sh_symbol">);</span>
    <span class="sh_cbracket">}</span>
</pre>

<div class="tehtavat">
    <p class="heading" id="e39">Exercise 39: Axe Click Effect</p>

<p>In this exercise we implement a calculator to count the number of clicks. In the exercise, the application logic (counting) and the ui logic are divided from each other. The final application should look like the following, so far. </p>

    <p><img src="https://www.cs.helsinki.fi/group/java/k13/ohja/img-ohja/week5/clickeffect.png"></p>

<h4>Exercise 39.1: PersonalCalculator</h4>

<p>Implement the class <code>PersonalCalculator</code> in the package <code>clicker.applicationlogic</code>; the class implements the interface <code>Calculator</code>. At first, the method <code>giveValue</code> of <code>PersonalCalculator</code> returns 0. Whenever the method <code>increase</code> is called, the value increases by one.</p>

<p>If you want, you can test the class using the following program.</p>

<pre class="sh_java sh_sourceCode">        <span class="sh_usertype">Calculator</span><span class="sh_normal"> </span>calc <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">PersonalCalculator</span><span class="sh_symbol">();</span>
        System<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">println</span><span class="sh_symbol">(</span><span class="sh_string">"Value: "</span> <span class="sh_symbol">+</span> calc<span class="sh_symbol">.</span><span class="sh_function">giveValue</span><span class="sh_symbol">());</span>
        calc<span class="sh_symbol">.</span><span class="sh_function">increase</span><span class="sh_symbol">();</span>
        System<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">println</span><span class="sh_symbol">(</span><span class="sh_string">"Value: "</span> <span class="sh_symbol">+</span> calc<span class="sh_symbol">.</span><span class="sh_function">giveValue</span><span class="sh_symbol">());</span>
        calc<span class="sh_symbol">.</span><span class="sh_function">increase</span><span class="sh_symbol">();</span>
        System<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">println</span><span class="sh_symbol">(</span><span class="sh_string">"Value: "</span> <span class="sh_symbol">+</span> calc<span class="sh_symbol">.</span><span class="sh_function">giveValue</span><span class="sh_symbol">());</span>
</pre>

<pre>Value: 0
Value: 1
Value: 2
</pre>

<h4>Exercise 39.2: ClickListener</h4>

<p>Implement the class <code>ClickListener</code> in the package <code>clicker.ui</code>; the class implements the interface <code>ActionListener</code>. <code>ClickListener</code> receives two objects as constructor parameters: an object which implements the interface <code>Calculator</code> and a <code>JLabel</code> object.</p>

<p>Implement the <code>actionPerformed</code> method so that the <code>Calculator</code> object increases by one at first, and after it, the calculator value is set as text of the <code>JLabel</code> object. The text of the <code>JLabel</code> object can be modified with the method <code>setText</code>.</p>

<h4>Exercise 39.3: User Interface</h4>

<p>Modify the class <code>UserInterface</code>; now the user interface has to receive a <code>Calculator</code> object as constructor parameter: you need a new constructor. Add the necessary ui components to your UserInterface. Also, set the action event listener you implemented in the previous section to the button.</p>

<p>Use the functionality provided by the class <code>BorderLayout</code> to manage the layout of the ui components. Also, change the <code>Main</code> class so that the user interface is assigned a <code>PersonalCalculator</code> object. When the <code>"Click!"</code> button in the user interface has been pressed twice, the application looks like below, more or less.</p>

    <p><img src="https://www.cs.helsinki.fi/group/java/k13/ohja/img-ohja/week5/clickeffect2.png"></p>

</div>


<h3> Nested Container Objects</h3>

<p>Sometimes we end up in a situation, where the <code>Container</code> object provided by <code>JFrame</code> is not suitable enough for our UI layout. We may want our user interface to look different or to group up UI components according to their use. For instance, building a user interface like the one below would not be so easy, using only the <code>Container</code> object provided by the class <code>JFrame</code>.</p>

    <p><img src="https://www.cs.helsinki.fi/group/java/k13/ohja/img-ohja/week5/nestedobjects.png"></p>

<p>We can place Container objects inside each other. The class <code><a href="http://docs.oracle.com/javase/6/docs/api/javax/swing/JPanel.html" target="_blank">JPanel</a></code> (see also <a href="http://docs.oracle.com/javase/tutorial/uiswing/components/panel.html" target="_blank">How to Use Panels</a>) allows for nested <code>Container</code> objects. It is possible to add UI components to a <code>JPanel</code> instance in the same way we add components to the <code>Container</code> instance of <code>JFrame</code> class. Moreover, it is possible to add an instance of <code>JPanel</code> to a <code>Container</code> object. This makes possible to use many <code>Container</code> objects to develop one user interface.</p>

<p>Creating a user interface like the one above is easier with <code>JPanel</code>. Let's create a user interface with three buttons -- Execute, Test, and Send -- plus a text field. The buttons are a group on its own, and we assign them to a <code>JPanel</code> object which is placed in the lower part of the <code>Container</code> object which we have got from <code>JFrame</code> class.</p>

<pre class="sh_java sh_sourceCode">    <span class="sh_keyword">private</span> <span class="sh_type">void</span> <span class="sh_function">createComponents</span><span class="sh_symbol">(</span><span class="sh_usertype">Container</span><span class="sh_normal"> </span>container<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span>
        container<span class="sh_symbol">.</span><span class="sh_function">add</span><span class="sh_symbol">(</span><span class="sh_keyword">new</span> <span class="sh_function">JTextArea</span><span class="sh_symbol">());</span>
        container<span class="sh_symbol">.</span><span class="sh_function">add</span><span class="sh_symbol">(</span><span class="sh_function">createPanel</span><span class="sh_symbol">(),</span> BorderLayout<span class="sh_symbol">.</span>SOUTH<span class="sh_symbol">);</span>
    <span class="sh_cbracket">}</span>

    <span class="sh_keyword">private</span> <span class="sh_usertype">JPanel</span><span class="sh_normal"> </span><span class="sh_function">createPanel</span><span class="sh_symbol">()</span> <span class="sh_cbracket">{</span>
        <span class="sh_usertype">JPanel</span><span class="sh_normal"> </span>panel <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">JPanel</span><span class="sh_symbol">(</span><span class="sh_keyword">new</span> <span class="sh_function">GridLayout</span><span class="sh_symbol">(</span><span class="sh_number">1</span><span class="sh_symbol">,</span> <span class="sh_number">3</span><span class="sh_symbol">));</span>
        panel<span class="sh_symbol">.</span><span class="sh_function">add</span><span class="sh_symbol">(</span><span class="sh_keyword">new</span> <span class="sh_function">JButton</span><span class="sh_symbol">(</span><span class="sh_string">"Execute"</span><span class="sh_symbol">));</span>
        panel<span class="sh_symbol">.</span><span class="sh_function">add</span><span class="sh_symbol">(</span><span class="sh_keyword">new</span> <span class="sh_function">JButton</span><span class="sh_symbol">(</span><span class="sh_string">"Test"</span><span class="sh_symbol">));</span>
        panel<span class="sh_symbol">.</span><span class="sh_function">add</span><span class="sh_symbol">(</span><span class="sh_keyword">new</span> <span class="sh_function">JButton</span><span class="sh_symbol">(</span><span class="sh_string">"Send"</span><span class="sh_symbol">));</span>
        <span class="sh_keyword">return</span> panel<span class="sh_symbol">;</span>
    <span class="sh_cbracket">}</span>
</pre>

<p>The JPanel class is given as constructor parameter the layout style to use. If in its constructor the layout style requires a reference to the <code>Container</code> object used, the <code>JPanel</code> class also has the method <code>setLayout</code>.</p>

<p>If our user interface has clear, separate, groups of components we can also inherit the <code>JPanel</code> class. For instance, the panel above could be implemented in the following way, too.</p>

<pre class="sh_java sh_sourceCode"><span class="sh_preproc">import</span> java<span class="sh_symbol">.</span>awt<span class="sh_symbol">.</span>GridLayout<span class="sh_symbol">;</span>
<span class="sh_preproc">import</span> javax<span class="sh_symbol">.</span>swing<span class="sh_symbol">.</span>JButton<span class="sh_symbol">;</span>
<span class="sh_preproc">import</span> javax<span class="sh_symbol">.</span>swing<span class="sh_symbol">.</span>JPanel<span class="sh_symbol">;</span>

<span class="sh_keyword">public</span> <span class="sh_keyword">class</span><span class="sh_normal"> </span><span class="sh_classname">MenuPanel</span> <span class="sh_keyword">extends</span> JPanel <span class="sh_cbracket">{</span>

    <span class="sh_keyword">public</span> <span class="sh_function">MenuPanel</span><span class="sh_symbol">()</span> <span class="sh_cbracket">{</span>
        <span class="sh_keyword">super</span><span class="sh_symbol">(</span><span class="sh_keyword">new</span> <span class="sh_function">GridLayout</span><span class="sh_symbol">(</span><span class="sh_number">1</span><span class="sh_symbol">,</span> <span class="sh_number">3</span><span class="sh_symbol">));</span>
        <span class="sh_function">createComponents</span><span class="sh_symbol">();</span>
    <span class="sh_cbracket">}</span>

    <span class="sh_keyword">private</span> <span class="sh_type">void</span> <span class="sh_function">createComponents</span><span class="sh_symbol">()</span> <span class="sh_cbracket">{</span>
        <span class="sh_function">add</span><span class="sh_symbol">(</span><span class="sh_keyword">new</span> <span class="sh_function">JButton</span><span class="sh_symbol">(</span><span class="sh_string">"Execute"</span><span class="sh_symbol">));</span>
        <span class="sh_function">add</span><span class="sh_symbol">(</span><span class="sh_keyword">new</span> <span class="sh_function">JButton</span><span class="sh_symbol">(</span><span class="sh_string">"Test"</span><span class="sh_symbol">));</span>
        <span class="sh_function">add</span><span class="sh_symbol">(</span><span class="sh_keyword">new</span> <span class="sh_function">JButton</span><span class="sh_symbol">(</span><span class="sh_string">"Send"</span><span class="sh_symbol">));</span>
    <span class="sh_cbracket">}</span>
<span class="sh_cbracket">}</span>
</pre>

<p>Now we can create a <code>MenuPanel</code> instance in our user interface class.</p>

<pre class="sh_java sh_sourceCode">    <span class="sh_keyword">private</span> <span class="sh_type">void</span> <span class="sh_function">createComponents</span><span class="sh_symbol">(</span><span class="sh_usertype">Container</span><span class="sh_normal"> </span>container<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span>
        container<span class="sh_symbol">.</span><span class="sh_function">add</span><span class="sh_symbol">(</span><span class="sh_keyword">new</span> <span class="sh_function">JTextArea</span><span class="sh_symbol">());</span>
        container<span class="sh_symbol">.</span><span class="sh_function">add</span><span class="sh_symbol">(</span><span class="sh_keyword">new</span> <span class="sh_function">MenuPanel</span><span class="sh_symbol">(),</span> BorderLayout<span class="sh_symbol">.</span>SOUTH<span class="sh_symbol">);</span>
    <span class="sh_cbracket">}</span>
</pre>

<p>Note that in case you need an action event listener, the class <code>MenuPanel</code> must be given all the objects its need as parameter.</p>

<div class="tehtavat">
    <p class="heading" id="e40">Exercise 40: Calculator</p>

<p>The goal of the exercise is creating a simple calculator. The calculator user interface has to look like the following:</p>

   <p><img src="https://www.cs.helsinki.fi/group/java/k13/ohja/img-ohja/laskin.png"></p>

   <p>Together with the exercise body, you find the main program which starts the calculator, as well as the class <code>GraphicCalculator</code> which contains a graphic user interface. The user interface has to follow exactly the following points, but you can plan the program structure as you wish. <b>Note:</b> <code>GraphicCalculator</code> provides empty methods <code>run</code>, <code>createComponents</code> and <code>getFrame</code>.</p>

<h4>Exercise 40.1: The Layout</h4>

<p>You find a <code>JFrame</code> with the exercise body; you manage its layout using <code>GridLayout</code> with three lines and one column. <code>JTextField</code> has to be placed in the upper block and has to be used for the text output; it must be set off with the method call <code>setEnabled(false)</code>. The second block has to contain <code>JTextField</code> for the text input. Originally, the input field contains the text "0", and the input field is empty.</p>

<p>The lowest block has to contain <code>JPanel</code>, and this has to have the layout manager <code>GridLayout</code>, with one line and three columns. The panel has three <code>JButton</code>s, with texts "+", "-" and "Z".</p>

<h4>Exercise 40.2: Basic Functionality</h4>

<p>The calculator basic functionality is the following. When the user writes a number n into the input field and presses <strong>+</strong>, the value of the output field is added n and the output field is updated with a new value. Accordingly, when the user writes a number n into the input field and presses <strong>-</strong>, the value of the output field is decreased by n, and the output field is updated with the new value. If the user presses <strong>Z</strong>, the output field value is reset to zero.</p>

<h4>Exercise 40.3: Cozy Management</h4>

<p>Let's extend our program with the following features:</p>
<ul><li>If the output field is 0, the user can't press the <strong>Z</strong> button, i.e. the button has to be set off with the method call <code>setEnabled(false)</code>. Otherwise, the button has to be on.</li>
<li>When the user presses any of the buttons <strong>+, -, Z</strong> the input field is wiped.</li>
<li>If the input value is not an integer and the user presses one of the buttons <strong>+, -, Z</strong>, the input field is wiped and the value of the output field does not change (unless the button is <strong>Z</strong>).</li>
</ul>
</div>

<h2 id="53"> Drawing</h2>

<p>Its <code>Container</code> functionality is not the only reason why we use the class <code>JPanel</code>: it is also used as drawing board, and the user inherits the <code>JPanel</code> class and overrides the method <code>protected void paintComponent(Graphics graphics)</code>. The user interface calls the method <code>paintComponent</code> whenever we want to draw again the UI component contents. The parameter of the method <code>paintComponent</code> receives from the user interface an object which implements the abstract class <code><a href="http://docs.oracle.com/javase/6/docs/api/java/awt/Graphics.html" target="_blank">Graphics</a></code>. Let's create the class <code>DrawingBoard</code> <code>JPanel</code> which inherits from <code>JPanel</code> and which overrides the <code>paintComponent</code> method.</p>

<pre class="sh_java sh_sourceCode"><span class="sh_keyword">public</span> <span class="sh_keyword">class</span><span class="sh_normal"> </span><span class="sh_classname">DrawingBoard</span> <span class="sh_keyword">extends</span> JPanel <span class="sh_cbracket">{</span>

    <span class="sh_keyword">public</span> <span class="sh_function">DrawingBoard</span><span class="sh_symbol">()</span> <span class="sh_cbracket">{</span>
        <span class="sh_keyword">super</span><span class="sh_symbol">.</span><span class="sh_function">setBackground</span><span class="sh_symbol">(</span>Color<span class="sh_symbol">.</span>WHITE<span class="sh_symbol">);</span>
    <span class="sh_cbracket">}</span>

    @Override
    <span class="sh_keyword">protected</span> <span class="sh_type">void</span> <span class="sh_function">paintComponent</span><span class="sh_symbol">(</span><span class="sh_usertype">Graphics</span><span class="sh_normal"> </span>graphics<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span>
        <span class="sh_keyword">super</span><span class="sh_symbol">.</span><span class="sh_function">paintComponent</span><span class="sh_symbol">(</span>graphics<span class="sh_symbol">);</span>
    <span class="sh_cbracket">}</span>
<span class="sh_cbracket">}</span>
</pre>

<p>The drawing board above does not contain concrete drawing functionality. In the constructor, we can define the colour of our drawing board to be white by calling its superclass' method <code>setBackground</code>. The method <code>setBackGround</code> receives an instance of the class <code><a href="http://docs.oracle.com/javase/6/docs/api/java/awt/Color.html" target="_blank">Color</a></code> as parameter. The class <code>Color</code> contains the most common colours as class variables; for instance, you get the white colour using the class variable <code>Color.WHITE</code>.</p>

<p>The overridden <code>paintComponent</code> method calls the superclass' <code>paintComponent</code> method, and it does not do anything else. Let's add the drawing board to the <code>createComponents</code> method of class <code>UserInterface</code>. We use the user interface which was defined at the beginning of the section <a href="#58">58. User Interfaces</a>.</p>

<pre class="sh_java sh_sourceCode">    <span class="sh_keyword">private</span> <span class="sh_type">void</span> <span class="sh_function">createComponents</span><span class="sh_symbol">(</span><span class="sh_usertype">Container</span><span class="sh_normal"> </span>container<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span>
        container<span class="sh_symbol">.</span><span class="sh_function">add</span><span class="sh_symbol">(</span><span class="sh_keyword">new</span> <span class="sh_function">DrawingBoard</span><span class="sh_symbol">());</span>
    <span class="sh_cbracket">}</span>
</pre>

<p>When we start our user interface we see an empty screen, whose background colour is white. The size of the user interface below is set to 300x300 through the method <code>setPreferredSize</code>, and its title is <code>"Drawing Board"</code>.</p>

    <p><img src="https://www.cs.helsinki.fi/group/java/k13/ohja/img-ohja/week5/drawingboard.png"></p>

<p>Drawing on the board is possible using the methods provides by the <code><a href="http://docs.oracle.com/javase/6/docs/api/java/awt/Graphics.html" target="_blank">Graphics</a></code> object. Let's modify the method <code>paintComponent</code> of <code>DrawingBoard</code> and let's draw two rectangles using the method <code>fillRect</code> of the <code>Graphics</code> object.</p>

<pre class="sh_java sh_sourceCode">    @Override
    <span class="sh_keyword">protected</span> <span class="sh_type">void</span> <span class="sh_function">paintComponent</span><span class="sh_symbol">(</span><span class="sh_usertype">Graphics</span><span class="sh_normal"> </span>graphics<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span>
        <span class="sh_keyword">super</span><span class="sh_symbol">.</span><span class="sh_function">paintComponent</span><span class="sh_symbol">(</span>graphics<span class="sh_symbol">);</span>

        graphics<span class="sh_symbol">.</span><span class="sh_function">fillRect</span><span class="sh_symbol">(</span><span class="sh_number">50</span><span class="sh_symbol">,</span> <span class="sh_number">80</span><span class="sh_symbol">,</span> <span class="sh_number">100</span><span class="sh_symbol">,</span> <span class="sh_number">50</span><span class="sh_symbol">);</span>
        graphics<span class="sh_symbol">.</span><span class="sh_function">fillRect</span><span class="sh_symbol">(</span><span class="sh_number">200</span><span class="sh_symbol">,</span> <span class="sh_number">20</span><span class="sh_symbol">,</span> <span class="sh_number">50</span><span class="sh_symbol">,</span> <span class="sh_number">200</span><span class="sh_symbol">);</span>
    <span class="sh_cbracket">}</span>
</pre>

<p>The method <code>fillRect</code> receives as parameter the <code>x</code> and <code>y</code> coordinates of a rectangle, plus the rectangle width and height. In fact, above we first draw a rectangle which starts with pixel whose coordinates are <code>(50, 80)</code>, which is 100 pixels long, and 50 pixels high. Afterwards, we draw a 50-pixel long, 100-pixel high rectangle which begins at <code>(200, 20)</code>.</p>

<p>As you notice from the picture, the coordinate system does not work as we are accustomed to.</p>

    <p><img src="https://www.cs.helsinki.fi/group/java/k13/ohja/img-ohja/week5/drawingboard-blocks.png"></p>

<p>Java's <code>Graphics</code> object (and most of other programming language libraries) expects the value of the y axis to grow downwards. The coordinate system origin, i.e. the point <code>(0,0)</code> is in the upper left corner: the Graphics object always knows the UI component where we draw, and it is able to define the location of the point to draw based on it. The location of the UI origin can become clear with the help of the following program. First we draw a green 10-pixel long, 200-pixel high rectangle which starts from the point (0,0). Then we draw a black 200-pixel long, 10-pixel high rectangle which starts from the point (0,0). The drawing colour is defined by the method <code>setColor</code> of our <code>Graphics</code> object.</p>


<pre class="sh_java sh_sourceCode">    @Override
    <span class="sh_keyword">protected</span> <span class="sh_type">void</span> <span class="sh_function">paintComponent</span><span class="sh_symbol">(</span><span class="sh_usertype">Graphics</span><span class="sh_normal"> </span>graphics<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span>
        <span class="sh_keyword">super</span><span class="sh_symbol">.</span><span class="sh_function">paintComponent</span><span class="sh_symbol">(</span>graphics<span class="sh_symbol">);</span>

        graphics<span class="sh_symbol">.</span><span class="sh_function">setColor</span><span class="sh_symbol">(</span>Color<span class="sh_symbol">.</span>GREEN<span class="sh_symbol">);</span>
        graphics<span class="sh_symbol">.</span><span class="sh_function">fillRect</span><span class="sh_symbol">(</span><span class="sh_number">0</span><span class="sh_symbol">,</span> <span class="sh_number">0</span><span class="sh_symbol">,</span> <span class="sh_number">10</span><span class="sh_symbol">,</span> <span class="sh_number">200</span><span class="sh_symbol">);</span>
        graphics<span class="sh_symbol">.</span><span class="sh_function">setColor</span><span class="sh_symbol">(</span>Color<span class="sh_symbol">.</span>BLACK<span class="sh_symbol">);</span>
        graphics<span class="sh_symbol">.</span><span class="sh_function">fillRect</span><span class="sh_symbol">(</span><span class="sh_number">0</span><span class="sh_symbol">,</span> <span class="sh_number">0</span><span class="sh_symbol">,</span> <span class="sh_number">200</span><span class="sh_symbol">,</span> <span class="sh_number">10</span><span class="sh_symbol">);</span>
    <span class="sh_cbracket">}</span>
</pre>


    <p><img src="https://www.cs.helsinki.fi/group/java/k13/ohja/img-ohja/week5/drawingboard-coordinates.png"></p>

<p>Such coordinate system reversibility depends on the way user interface size is modified. When we modify the size of a user interface, this is reduced or increased by "dragging the bottom right corner"; in this way, the drawing on the screan would move while we change the UI size. Because the grid starts from the upper left corner, the drawing position is always the same, but the visible part changes.</p>

<div class="tehtavat">
    <p class="heading" id="e41">Exercise 41: Drawing Board</p>

<p>With the exercise body, you find a pre-made user interface, which is connected to the class <code>DrawingBoard</code>, which inherits <code>JPanel</code>. Modify the method <code>paintCOmponent</code> of <code>DrawingBoard</code> so that it would draw the following figure. You can only use the <code>fillRect</code> method of the <code>graphics</code> object, in this exercise.</p>

<p><img src="https://www.cs.helsinki.fi/group/java/k13/ohja/img-ohja/smiley.gif"></p>

<p>Attention! Do not use more than five <code>fillRect</code> calls. The figure does not have to be identical to the one above, the tests tell you when your figure is close enough to the required one.</p>

</div>

<p>Let's extend our previous example and draw an independent avatar-object in our user interface. Let's create the class <code>Avatar</code>; it has the coordinates of the point where it appears, and it is a circle with a 10-pixel diameter. The location of the avatar can be changed by calling its <code>move</code> method.</p>

<pre class="sh_java sh_sourceCode"><span class="sh_preproc">import</span> java<span class="sh_symbol">.</span>awt<span class="sh_symbol">.</span>Graphics<span class="sh_symbol">;</span>

<span class="sh_keyword">public</span> <span class="sh_keyword">class</span><span class="sh_normal"> </span><span class="sh_classname">Avatar</span> <span class="sh_cbracket">{</span>

    <span class="sh_keyword">private</span> <span class="sh_type">int</span> x<span class="sh_symbol">;</span>
    <span class="sh_keyword">private</span> <span class="sh_type">int</span> y<span class="sh_symbol">;</span>

    <span class="sh_keyword">public</span> <span class="sh_function">Avatar</span><span class="sh_symbol">(</span><span class="sh_type">int</span> x<span class="sh_symbol">,</span> <span class="sh_type">int</span> y<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span>
        <span class="sh_keyword">this</span><span class="sh_symbol">.</span>x <span class="sh_symbol">=</span> x<span class="sh_symbol">;</span>
        <span class="sh_keyword">this</span><span class="sh_symbol">.</span>y <span class="sh_symbol">=</span> y<span class="sh_symbol">;</span>
    <span class="sh_cbracket">}</span>

    <span class="sh_keyword">public</span> <span class="sh_type">int</span> <span class="sh_function">getX</span><span class="sh_symbol">()</span> <span class="sh_cbracket">{</span>
        <span class="sh_keyword">return</span> x<span class="sh_symbol">;</span>
    <span class="sh_cbracket">}</span>

    <span class="sh_keyword">public</span> <span class="sh_type">int</span> <span class="sh_function">getY</span><span class="sh_symbol">()</span> <span class="sh_cbracket">{</span>
        <span class="sh_keyword">return</span> y<span class="sh_symbol">;</span>
    <span class="sh_cbracket">}</span>

    <span class="sh_keyword">public</span> <span class="sh_type">void</span> <span class="sh_function">move</span><span class="sh_symbol">(</span><span class="sh_type">int</span> movingX<span class="sh_symbol">,</span> <span class="sh_type">int</span> movingY<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span>
        <span class="sh_keyword">this</span><span class="sh_symbol">.</span>x <span class="sh_symbol">+=</span> movingX<span class="sh_symbol">;</span>
        <span class="sh_keyword">this</span><span class="sh_symbol">.</span>y <span class="sh_symbol">+=</span> movingY<span class="sh_symbol">;</span>
    <span class="sh_cbracket">}</span>

    <span class="sh_keyword">public</span> <span class="sh_type">void</span> <span class="sh_function">draw</span><span class="sh_symbol">(</span><span class="sh_usertype">Graphics</span><span class="sh_normal"> </span>graphics<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span>
        graphics<span class="sh_symbol">.</span><span class="sh_function">fillOval</span><span class="sh_symbol">(</span>x<span class="sh_symbol">,</span> y<span class="sh_symbol">,</span> <span class="sh_number">10</span><span class="sh_symbol">,</span> <span class="sh_number">10</span><span class="sh_symbol">);</span>
    <span class="sh_cbracket">}</span>
<span class="sh_cbracket">}</span>
</pre>

<p>Let's modify our drawing board, giving it an instance of our <code>Avatar</code> as constructor parameter. The method <code>paintComponent</code> of <code>DrawingBoard</code> does not draw the character itself, but it delegates the responsibility to the instance of the class <code>Avatar</code>.</p>

<pre class="sh_java sh_sourceCode"><span class="sh_preproc">import</span> java<span class="sh_symbol">.</span>awt<span class="sh_symbol">.</span>Color<span class="sh_symbol">;</span>
<span class="sh_preproc">import</span> java<span class="sh_symbol">.</span>awt<span class="sh_symbol">.</span>Graphics<span class="sh_symbol">;</span>
<span class="sh_preproc">import</span> javax<span class="sh_symbol">.</span>swing<span class="sh_symbol">.</span>JPanel<span class="sh_symbol">;</span>

<span class="sh_keyword">public</span> <span class="sh_keyword">class</span><span class="sh_normal"> </span><span class="sh_classname">DrawingBoard</span> <span class="sh_keyword">extends</span> JPanel <span class="sh_cbracket">{</span>

    <span class="sh_keyword">private</span> <span class="sh_usertype">Avatar</span><span class="sh_normal"> </span>avatar<span class="sh_symbol">;</span>

    <span class="sh_keyword">public</span> <span class="sh_function">DrawingBoard</span><span class="sh_symbol">(</span><span class="sh_usertype">Avatar</span><span class="sh_normal"> </span>avatar<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span>
        <span class="sh_keyword">super</span><span class="sh_symbol">.</span><span class="sh_function">setBackground</span><span class="sh_symbol">(</span>Color<span class="sh_symbol">.</span>WHITE<span class="sh_symbol">);</span>
        <span class="sh_keyword">this</span><span class="sh_symbol">.</span>avatar <span class="sh_symbol">=</span> avatar<span class="sh_symbol">;</span>
    <span class="sh_cbracket">}</span>

    @Override
    <span class="sh_keyword">protected</span> <span class="sh_type">void</span> <span class="sh_function">paintComponent</span><span class="sh_symbol">(</span><span class="sh_usertype">Graphics</span><span class="sh_normal"> </span>graphics<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span>
        <span class="sh_keyword">super</span><span class="sh_symbol">.</span><span class="sh_function">paintComponent</span><span class="sh_symbol">(</span>graphics<span class="sh_symbol">);</span>
        avatar<span class="sh_symbol">.</span><span class="sh_function">draw</span><span class="sh_symbol">(</span>graphics<span class="sh_symbol">);</span>
    <span class="sh_cbracket">}</span>
<span class="sh_cbracket">}</span>
</pre>

<p>Let's also give our avatar as parameter to our user interface. Avatar is an independent object in the user interface, and we only want to draw it in the user interface. It is essential to change our UI constructor so that it received a <code>Avatar</code> object. Moreover, in the method <code>createComponents</code> we give an instance of the class <code>Avatar</code> as parameter to our <code>DrawingBoard</code> object.</p>

<pre class="sh_java sh_sourceCode"><span class="sh_keyword">public</span> <span class="sh_keyword">class</span><span class="sh_normal"> </span><span class="sh_classname">UserInterface</span> <span class="sh_keyword">implements</span> Runnable <span class="sh_cbracket">{</span>

    <span class="sh_keyword">private</span> <span class="sh_usertype">JFrame</span><span class="sh_normal"> </span>frame<span class="sh_symbol">;</span>
    <span class="sh_keyword">private</span> <span class="sh_usertype">Avatar</span><span class="sh_normal"> </span>avatar<span class="sh_symbol">;</span>

    <span class="sh_keyword">public</span> <span class="sh_function">UserInterface</span><span class="sh_symbol">(</span><span class="sh_usertype">Avatar</span><span class="sh_normal"> </span>avatar<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span>
        <span class="sh_keyword">this</span><span class="sh_symbol">.</span>avatar <span class="sh_symbol">=</span> avatar<span class="sh_symbol">;</span>
    <span class="sh_cbracket">}</span>

<span class="sh_comment">// ...</span>

    <span class="sh_keyword">private</span> <span class="sh_type">void</span> <span class="sh_function">createComponents</span><span class="sh_symbol">(</span><span class="sh_usertype">Container</span><span class="sh_normal"> </span>container<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span>
        <span class="sh_usertype">DrawingBoard</span><span class="sh_normal"> </span>drawingBoard <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">DrawingBoard</span><span class="sh_symbol">(</span>avatar<span class="sh_symbol">);</span>
        container<span class="sh_symbol">.</span><span class="sh_function">add</span><span class="sh_symbol">(</span>drawingBoard<span class="sh_symbol">);</span>
    <span class="sh_cbracket">}</span>
<span class="sh_comment">// ...</span>
</pre>

<p>Now, our user interface can be started giving it an <code>Avatar</code> object as constructor parameter.</p>

<pre class="sh_java sh_sourceCode">        <span class="sh_usertype">UserInterface</span><span class="sh_normal"> </span>ui <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">UserInterface</span><span class="sh_symbol">(</span><span class="sh_keyword">new</span> <span class="sh_function">Avatar</span><span class="sh_symbol">(</span><span class="sh_number">30</span><span class="sh_symbol">,</span> <span class="sh_number">30</span><span class="sh_symbol">));</span>
        SwingUtilities<span class="sh_symbol">.</span><span class="sh_function">invokeLater</span><span class="sh_symbol">(</span>ui<span class="sh_symbol">);</span>
</pre>

    <p><img src="https://www.cs.helsinki.fi/group/java/k13/ohja/img-ohja/week5/drawingboard-avatar.png"></p>

<p>In the user interface above, we see a ball-like Avatar.</p>

<p>Let's now add the functionality to move the avatar. We want to move it using our keyboard. When the user presses the left arrow, the avatar should move left. Pressing the right arrow should move the avatar right. We need an action event listener, which would listen to our keyboard. The interface <code><a href="http://docs.oracle.com/javase/6/docs/api/java/awt/event/KeyListener.html" target="_blank">KeyListener</a></code> defines the functionality needed to listener to a keyboard.</p>

<p>The interface <code>KeyListener</code> calls for implementing the methods <code>keyPressed</code>, <code>keyReleased</code>, and <code>keyTyped</code>. We are only interested to the case in which the keyboard is pressed, so we can leave empty the methods <code>keyReleased</code> and <code>keyTyped</code>. Let's create the class <code>KeyboardListener</code>, which implements the interface <code>KeyListener</code>. The class receives as parameter a <code>Avatar</code> object, and the action event manager has to shift it.</p>

<pre class="sh_java sh_sourceCode"><span class="sh_preproc">import</span> java<span class="sh_symbol">.</span>awt<span class="sh_symbol">.</span>event<span class="sh_symbol">.</span>KeyEvent<span class="sh_symbol">;</span>
<span class="sh_preproc">import</span> java<span class="sh_symbol">.</span>awt<span class="sh_symbol">.</span>event<span class="sh_symbol">.</span>KeyListener<span class="sh_symbol">;</span>

<span class="sh_keyword">public</span> <span class="sh_keyword">class</span><span class="sh_normal"> </span><span class="sh_classname">KeyboardListener</span> <span class="sh_keyword">implements</span> KeyListener <span class="sh_cbracket">{</span>

    <span class="sh_keyword">private</span> <span class="sh_usertype">Avatar</span><span class="sh_normal"> </span>avatar<span class="sh_symbol">;</span>

    <span class="sh_keyword">public</span> <span class="sh_function">KeyboardListener</span><span class="sh_symbol">(</span><span class="sh_usertype">Avatar</span><span class="sh_normal"> </span>avatar<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span>
        <span class="sh_keyword">this</span><span class="sh_symbol">.</span>avatar <span class="sh_symbol">=</span> avatar<span class="sh_symbol">;</span>
    <span class="sh_cbracket">}</span>

    @Override
    <span class="sh_keyword">public</span> <span class="sh_type">void</span> <span class="sh_function">keyPressed</span><span class="sh_symbol">(</span><span class="sh_usertype">KeyEvent</span><span class="sh_normal"> </span>e<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span>
        <span class="sh_keyword">if</span> <span class="sh_symbol">(</span>e<span class="sh_symbol">.</span><span class="sh_function">getKeyCode</span><span class="sh_symbol">()</span> <span class="sh_symbol">==</span> KeyEvent<span class="sh_symbol">.</span>VK_LEFT<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span>
            avatar<span class="sh_symbol">.</span><span class="sh_function">move</span><span class="sh_symbol">(-</span><span class="sh_number">5</span><span class="sh_symbol">,</span> <span class="sh_number">0</span><span class="sh_symbol">);</span>
        <span class="sh_cbracket">}</span> <span class="sh_keyword">else</span> <span class="sh_keyword">if</span> <span class="sh_symbol">(</span>e<span class="sh_symbol">.</span><span class="sh_function">getKeyCode</span><span class="sh_symbol">()</span> <span class="sh_symbol">==</span> KeyEvent<span class="sh_symbol">.</span>VK_RIGHT<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span>
            avatar<span class="sh_symbol">.</span><span class="sh_function">move</span><span class="sh_symbol">(</span><span class="sh_number">5</span><span class="sh_symbol">,</span> <span class="sh_number">0</span><span class="sh_symbol">);</span>
        <span class="sh_cbracket">}</span>
    <span class="sh_cbracket">}</span>

    @Override
    <span class="sh_keyword">public</span> <span class="sh_type">void</span> <span class="sh_function">keyReleased</span><span class="sh_symbol">(</span><span class="sh_usertype">KeyEvent</span><span class="sh_normal"> </span>e<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span>
    <span class="sh_cbracket">}</span>

    @Override
    <span class="sh_keyword">public</span> <span class="sh_type">void</span> <span class="sh_function">keyTyped</span><span class="sh_symbol">(</span><span class="sh_usertype">KeyEvent</span><span class="sh_normal"> </span>ke<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span>
    <span class="sh_cbracket">}</span>
<span class="sh_cbracket">}</span>
</pre>

<p>The method <code>keyPressed</code> receives as parameter an instance of <code>KeyEvent</code> from the user interface. The KeyEvent object knows the number related to the pressed key thanks to its method <code>getKeycode()</code>. Different keys have got different class variables in the <code>KeyEvent</code> class; for instance, the left arrow is <code>KeyEvent.VK_LEFT</code>.</p>

<p>We want to listen to the keystrokes directed to our user interface (we don't want to write to the text field, for instance), and therefore we assign our keyboard listener to the <code>JFrame</code> instance. Let's modify our user interface and add the keyboard listener to the JFrame object.</p>

<pre class="sh_java sh_sourceCode">    <span class="sh_keyword">private</span> <span class="sh_type">void</span> <span class="sh_function">createComponents</span><span class="sh_symbol">(</span><span class="sh_usertype">Container</span><span class="sh_normal"> </span>container<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span>
        <span class="sh_usertype">DrawingBoard</span><span class="sh_normal"> </span>drawingBoard <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">DrawingBoard</span><span class="sh_symbol">(</span>avatar<span class="sh_symbol">);</span>
        container<span class="sh_symbol">.</span><span class="sh_function">add</span><span class="sh_symbol">(</span>drawingBoard<span class="sh_symbol">);</span>

        frame<span class="sh_symbol">.</span><span class="sh_function">addKeyListener</span><span class="sh_symbol">(</span><span class="sh_keyword">new</span> <span class="sh_function">KeyboardListener</span><span class="sh_symbol">(</span>avatar<span class="sh_symbol">));</span>
    <span class="sh_cbracket">}</span>
</pre>

<p>Our application now listens to keystrokes, and it leads them to the instance of the class <code>KeyboardListener</code>.</p>

<p>However, when we try out our user interface it does not work: the avatar does not move on the screen. What is the problem, in fact? We can check the keystrokes which are received by our <code>KeyboardListener</code> by adding a text printout to the beginning of our <code>keyPressed</code> method.</p>

<pre class="sh_java sh_sourceCode">    @Override
    <span class="sh_keyword">public</span> <span class="sh_type">void</span> <span class="sh_function">keyPressed</span><span class="sh_symbol">(</span><span class="sh_usertype">KeyEvent</span><span class="sh_normal"> </span>e<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span>
        System<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">println</span><span class="sh_symbol">(</span><span class="sh_string">"Keystroke "</span> <span class="sh_symbol">+</span> e<span class="sh_symbol">.</span><span class="sh_function">getKeyCode</span><span class="sh_symbol">()</span> <span class="sh_symbol">+</span>  <span class="sh_string">" pressed."</span><span class="sh_symbol">);</span>

        <span class="sh_comment">// ...</span>
</pre>

<p>If we start our program and press some keys we will notice the following output.</p>

<pre>Keystroke 39 pressed.
Keystroke 37 pressed.
Keystroke 40 pressed.
Keystroke 38 pressed.
</pre>

<p>In fact, our keyboard listener works, but our drawing board does not update.</p>

<h3> Drawing Board Repainting</h3>

<p>User interface components usually have the functionality to repaint the component outer face, when needed. For instance, when we press the button, the instance of the class <code>JButton</code> is able to paint the button as if it was pressed, and to paint it normal again afterwards. The drawing board we have implemented does not have a pre-made update functionality; instead, we have to ask our drawing board to paint itself again when needed.</p>

<p>Each subclass of <code>Component</code> has the method <code>public void repaint()</code>, which repaints the component after it is called. We want that our <code>DrawingBoard</code> object would get repainted while the avatar moves. The avatar moves in the class <code>KeyboardListener</code>, and it is logic the repainting would happen there, too.</p>

<p>In order to be repainted, our keyboard listener needs a drawing board reference. Let's modify our class <code>KeyboardListener</code>, so that it would receive as parameter both an <code>Avatar</code> object and the <code>Component</code> object to repaint. We call the <code>repaint</code> method of the <code>Component</code> object after each <code>keyPressed</code> action event.</p>

<pre class="sh_java sh_sourceCode"><span class="sh_preproc">import</span> java<span class="sh_symbol">.</span>awt<span class="sh_symbol">.</span>Component<span class="sh_symbol">;</span>
<span class="sh_preproc">import</span> java<span class="sh_symbol">.</span>awt<span class="sh_symbol">.</span>event<span class="sh_symbol">.</span>KeyEvent<span class="sh_symbol">;</span>
<span class="sh_preproc">import</span> java<span class="sh_symbol">.</span>awt<span class="sh_symbol">.</span>event<span class="sh_symbol">.</span>KeyListener<span class="sh_symbol">;</span>

<span class="sh_keyword">public</span> <span class="sh_keyword">class</span><span class="sh_normal"> </span><span class="sh_classname">KeyboardListener</span> <span class="sh_keyword">implements</span> KeyListener <span class="sh_cbracket">{</span>

    <span class="sh_keyword">private</span> <span class="sh_usertype">Component</span><span class="sh_normal"> </span>component<span class="sh_symbol">;</span>
    <span class="sh_keyword">private</span> <span class="sh_usertype">Avatar</span><span class="sh_normal"> </span>avatar<span class="sh_symbol">;</span>

    <span class="sh_keyword">public</span> <span class="sh_function">KeyboardListener</span><span class="sh_symbol">(</span><span class="sh_usertype">Avatar</span><span class="sh_normal"> </span>avatar<span class="sh_symbol">,</span> <span class="sh_usertype">Component</span><span class="sh_normal"> </span>component<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span>
        <span class="sh_keyword">this</span><span class="sh_symbol">.</span>avatar <span class="sh_symbol">=</span> avatar<span class="sh_symbol">;</span>
        <span class="sh_keyword">this</span><span class="sh_symbol">.</span>component <span class="sh_symbol">=</span> component<span class="sh_symbol">;</span>
    <span class="sh_cbracket">}</span>

    @Override
    <span class="sh_keyword">public</span> <span class="sh_type">void</span> <span class="sh_function">keyPressed</span><span class="sh_symbol">(</span><span class="sh_usertype">KeyEvent</span><span class="sh_normal"> </span>e<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span>
        <span class="sh_keyword">if</span> <span class="sh_symbol">(</span>e<span class="sh_symbol">.</span><span class="sh_function">getKeyCode</span><span class="sh_symbol">()</span> <span class="sh_symbol">==</span> KeyEvent<span class="sh_symbol">.</span>VK_LEFT<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span>
            avatar<span class="sh_symbol">.</span><span class="sh_function">move</span><span class="sh_symbol">(-</span><span class="sh_number">5</span><span class="sh_symbol">,</span> <span class="sh_number">0</span><span class="sh_symbol">);</span>
        <span class="sh_cbracket">}</span> <span class="sh_keyword">else</span> <span class="sh_keyword">if</span> <span class="sh_symbol">(</span>e<span class="sh_symbol">.</span><span class="sh_function">getKeyCode</span><span class="sh_symbol">()</span> <span class="sh_symbol">==</span> KeyEvent<span class="sh_symbol">.</span>VK_RIGHT<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span>
            avatar<span class="sh_symbol">.</span><span class="sh_function">move</span><span class="sh_symbol">(</span><span class="sh_number">5</span><span class="sh_symbol">,</span> <span class="sh_number">0</span><span class="sh_symbol">);</span>
        <span class="sh_cbracket">}</span>

        component<span class="sh_symbol">.</span><span class="sh_function">repaint</span><span class="sh_symbol">();</span>
    <span class="sh_cbracket">}</span>

    @Override
    <span class="sh_keyword">public</span> <span class="sh_type">void</span> <span class="sh_function">keyReleased</span><span class="sh_symbol">(</span><span class="sh_usertype">KeyEvent</span><span class="sh_normal"> </span>e<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span>
    <span class="sh_cbracket">}</span>

    @Override
    <span class="sh_keyword">public</span> <span class="sh_type">void</span> <span class="sh_function">keyTyped</span><span class="sh_symbol">(</span><span class="sh_usertype">KeyEvent</span><span class="sh_normal"> </span>ke<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span>
    <span class="sh_cbracket">}</span>
<span class="sh_cbracket">}</span>
</pre>

<p>Let's also modify the <code>createComponents</code> method of <code>UserInterface</code> and give an instance of <code>DrawingBoard</code> as parameter to our keyboard listener.</p>

<pre class="sh_java sh_sourceCode">    <span class="sh_keyword">private</span> <span class="sh_type">void</span> <span class="sh_function">createComponents</span><span class="sh_symbol">(</span><span class="sh_usertype">Container</span><span class="sh_normal"> </span>container<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span>
        <span class="sh_usertype">DrawingBoard</span><span class="sh_normal"> </span>drawingBoard <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">DrawingBoard</span><span class="sh_symbol">(</span>hahmo<span class="sh_symbol">);</span>
        container<span class="sh_symbol">.</span><span class="sh_function">add</span><span class="sh_symbol">(</span>drawingBoard<span class="sh_symbol">);</span>

        frame<span class="sh_symbol">.</span><span class="sh_function">addKeyListener</span><span class="sh_symbol">(</span><span class="sh_keyword">new</span> <span class="sh_function">KeyboardListener</span><span class="sh_symbol">(</span>avatar<span class="sh_symbol">,</span> drawingBoard<span class="sh_symbol">));</span>
    <span class="sh_cbracket">}</span>
</pre>

<p>Now, our avatar's moves are visible also in the user interface. Whenever the user presses the keyboard, the user interface keyboard listener handles the call. At the end of each call, the <code>repaint</code> method of our drawing board is called, and the drawing board gets repainted.</p>

    <p><img src="https://www.cs.helsinki.fi/group/java/k13/ohja/img-ohja/week5/drawingboard-avatar-movement.png"></p>

<div class="tehtavat">
    <p class="heading" id="e42">Exercise 42: A Moving Figure</p>

<p>We create a program which allows the user to move the figures drawn on a board using their keyboard. Together with the program you find the body of a user interface, which you can modify as your program proceeds.</p>

<p>At first, we create a couple of classes to manage the figures. Later on we will be able to draw the figures to our board. Create all the classes of the program in the package <code>movingfigure</code>.</p>

<p>In this exercise we make use of both inheritance and abstract classes: go back to sections 18.1, 18.2, and 18.5, if you need.</p>

<h4 class="req">Exercise 42.1: Figure: an Abstract Class</h4>

<p>Create the abstract class <code>Figure</code>. Figures have the object variables <code>x</code> and <code>y</code>, which tell the figure position on the board; they also have the method <code>public void move(int dx, int dy)</code>, which moves the figures according to the parameter coordinate movements. For instance, if the position is  (100,100), at the beginning, after calling the method <code>move(10,-50)</code> the position will be (110,50). The class constructor <code>public Figure(int x, int y)</code> has to define the original position of the figure. Additionally, implement also the methods <code>public int getX()</code> and <code>public int getY()</code>.</p>

<p>The class also has to have the abstract method <code>public abstract void draw(Graphics graphics)</code>, which draws the figure on the drawing board. The figure drawing method is implemented in the classes which inherit <code>Figure</code>.</p>

<h4 class="req">Exercise 42.2: Circle</h4>

<p>Create the class <code>Circle</code> which inherits Figure. Circle has a <code>diameter</code>, whose value is defined by the constructor <code>public Circle(int x, int y, int diameter)</code>. The Circle position is stored into the object variables defined in its parent class.
</p>

<p>The circle defines the method <code>draw</code> so that it would draw a circle of the right size, in the place defined by the coordinates, and using the method <code>fillOval</code> of the <code>Graphics</code> object; the first two parameters of the method are taken for the position of the circle. Take example from the relative method in the Avatar example. For more information about the methods of Graphics objects, you can have a look at <a href="http://docs.oracle.com/javase/6/docs/api/java/awt/Graphics.html">Java's API.</a>
</p>

<h4 class="req">Exercise 42.3: Drawing Board</h4>

<p>Create the class <code>DrawingBoard</code> which inherits <code>JPanel</code>; you can take example from the drawing board in the previous exercise, for instance. DrawingBoard receives a <code>Figure</code> object as parameter. Override <code>JPanel</code>'s method <code>protected void paintComponent(Graphics g)</code> so that it first calls the superclass' <code>paintComponent</code> method, and then the <code>draw</code> method of the figure which was assigned to the drawing board.</p>

<p>Modify the class <code>UserInterface</code> so that it would receive a <code>Figure</code> object as constructor parameter. Assign your DrawingBoard to the user interface together with the <code>createComponents(Container container)</code> method, and assign to the drawing board the figure which was given to the user interface as constructor parameter.</p>

<p>Finally, test that the following sample code draws a circle on the screen.</p>

<pre class="sh_java sh_sourceCode">        <span class="sh_usertype">UserInterface</span><span class="sh_normal"> </span>ui <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">UserInterface</span><span class="sh_symbol">(</span><span class="sh_keyword">new</span> <span class="sh_function">Circle</span><span class="sh_symbol">(</span><span class="sh_number">50</span><span class="sh_symbol">,</span> <span class="sh_number">50</span><span class="sh_symbol">,</span> <span class="sh_number">250</span><span class="sh_symbol">));</span>
        SwingUtilities<span class="sh_symbol">.</span><span class="sh_function">invokeLater</span><span class="sh_symbol">(</span>ui<span class="sh_symbol">);</span>
</pre>

    <p><img src="https://www.cs.helsinki.fi/group/java/k13/ohja/img-ohja/week5/moving-circle.png"></p>


        <h4 class="req">Exercise 42.4: Keyboard Listener</h4>

<p>Let's extend our drawing board, so that we could move the figures using our keyboard arrows. Create the class <code>KeyboardListener</code> which implements the interface <code><a href="http://docs.oracle.com/javase/6/docs/api/java/awt/event/KeyListener.html" target="_blank">KeyListener</a></code>. The class <code>KeyboardListener</code> has two constructor parameters: an instance of the class <code>Component</code> and one of the class <code>Figure</code>.</p>

<p>The instance of Component is given to the keyboard listener so that the component would be updated each time the keyboard is pressed. The component is updated with the method call <code>repaint</code>, which is inherited from he class <code>Component</code>. The type of the class DrawingBoard is <code>Component</code>, because <code>Component</code> is the upper class of the class which inherits <code>JPanel</code>.</p>

<p>Implement the method <code>keyPressed(KeyEvent e)</code> of the interface <code>KeyListener</code>; when the user presses the left arrow, the figure moves one point left. Pressing right, the figure moves one point right. Pressing up it moves one point up, and pressing down the figure moves one point down. Note that the y axe grows from the upper side of the window downwards. The arrow key codes are <code>KeyEvent.VK_LEFT</code>, <code>KeyEvent.VK_RIGHT</code>, <code>KeyEvent.VK_UP</code>, and <code>KeyEvent.VK_DOWN</code>. Leave empty the other methods required by the interface <code>KeyListener</code>.</p>

<p>Always call class Component's method <code>repaint</code> in the end of keylistener event.</p>

<p>Add keylistener in the UserInterface's method <code>addListeners</code>. KeyListener must be connected to <code>JFrame</code>-object.</p>


        <h4 class="req">Exercise 42.5: Square and Box</h4>


<p>Let <code>Square</code> and <code>Box</code> inherit the class <code>Figure</code>. Square has the constructor <code>public Square(int x, int y, int sideLength)</code>; the constructor of box is <code>public Box(int x, int y, int width, int height)</code>. Use the method <code>fillRect</code> of a graphic object to draw the figures.</p>

<p>Make sure that squares and boxes are drawn and move right on the DrawingBoard.</p>

<pre class="sh_java sh_sourceCode">        <span class="sh_usertype">UserInterface</span><span class="sh_normal"> </span>ui <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">UserInterface</span><span class="sh_symbol">(</span><span class="sh_keyword">new</span> <span class="sh_function">Square</span><span class="sh_symbol">(</span><span class="sh_number">50</span><span class="sh_symbol">,</span> <span class="sh_number">50</span><span class="sh_symbol">,</span> <span class="sh_number">250</span><span class="sh_symbol">));</span>
        SwingUtilities<span class="sh_symbol">.</span><span class="sh_function">invokeLater</span><span class="sh_symbol">(</span>ui<span class="sh_symbol">);</span>
</pre>

    <p><img src="https://www.cs.helsinki.fi/group/java/k13/ohja/img-ohja/week5/moving-box.png"></p>

<pre class="sh_java sh_sourceCode">        <span class="sh_usertype">UserInterface</span><span class="sh_normal"> </span>ui <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">UserInterface</span><span class="sh_symbol">(</span><span class="sh_keyword">new</span> <span class="sh_function">Box</span><span class="sh_symbol">(</span><span class="sh_number">50</span><span class="sh_symbol">,</span> <span class="sh_number">50</span><span class="sh_symbol">,</span> <span class="sh_number">100</span><span class="sh_symbol">,</span> <span class="sh_number">300</span><span class="sh_symbol">));</span>
        SwingUtilities<span class="sh_symbol">.</span><span class="sh_function">invokeLater</span><span class="sh_symbol">(</span>ui<span class="sh_symbol">);</span>
</pre>

    <p><img src="https://www.cs.helsinki.fi/group/java/k13/ohja/img-ohja/week5/moving-box2.png"></p>

        <h4 class="req">Exercise 42.6: Compound Figure</h4>

        <p>Let <code>CompoundFigure</code> inherit <code>Figure</code>. Compound figure contains other figures which are stored in an ArrayList. CompoundFigure has the method <code>public void add(Figure f)</code>, which adds a new Figure object to the compound figure. Compound figures do not have their own position, and it is not important what values are assigned to x and y coordinates. Compound figures draw themselves by asking their parts to draw themselves; the same thing happens when a compound figure moves. This means that the inherited method <code>move</code> has to be overwritten!</p>

        <p>You can test whether your compound figure moves and is drawn well using the following code:</p>

<pre class="sh_java sh_sourceCode">        <span class="sh_usertype">CompoundFigure</span><span class="sh_normal"> </span>truck <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">CompoundFigure</span><span class="sh_symbol">();</span>

        truck<span class="sh_symbol">.</span><span class="sh_function">add</span><span class="sh_symbol">(</span><span class="sh_keyword">new</span> <span class="sh_function">Box</span><span class="sh_symbol">(</span><span class="sh_number">220</span><span class="sh_symbol">,</span> <span class="sh_number">110</span><span class="sh_symbol">,</span> <span class="sh_number">75</span><span class="sh_symbol">,</span> <span class="sh_number">100</span><span class="sh_symbol">));</span>
        truck<span class="sh_symbol">.</span><span class="sh_function">add</span><span class="sh_symbol">(</span><span class="sh_keyword">new</span> <span class="sh_function">Box</span><span class="sh_symbol">(</span><span class="sh_number">80</span><span class="sh_symbol">,</span> <span class="sh_number">120</span><span class="sh_symbol">,</span> <span class="sh_number">200</span><span class="sh_symbol">,</span> <span class="sh_number">100</span><span class="sh_symbol">));</span>
        truck<span class="sh_symbol">.</span><span class="sh_function">add</span><span class="sh_symbol">(</span><span class="sh_keyword">new</span> <span class="sh_function">Circle</span><span class="sh_symbol">(</span><span class="sh_number">100</span><span class="sh_symbol">,</span> <span class="sh_number">200</span><span class="sh_symbol">,</span> <span class="sh_number">50</span><span class="sh_symbol">));</span>
        truck<span class="sh_symbol">.</span><span class="sh_function">add</span><span class="sh_symbol">(</span><span class="sh_keyword">new</span> <span class="sh_function">Circle</span><span class="sh_symbol">(</span><span class="sh_number">220</span><span class="sh_symbol">,</span> <span class="sh_number">200</span><span class="sh_symbol">,</span> <span class="sh_number">50</span><span class="sh_symbol">));</span>

        <span class="sh_usertype">UserInterface</span><span class="sh_normal"> </span>ui <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">UserInterface</span><span class="sh_symbol">(</span>truck<span class="sh_symbol">);</span>
        SwingUtilities<span class="sh_symbol">.</span><span class="sh_function">invokeLater</span><span class="sh_symbol">(</span>ui<span class="sh_symbol">);</span>
</pre>


    <p><img src="https://www.cs.helsinki.fi/group/java/k13/ohja/img-ohja/week5/moving-car.png"></p>


        <p>Note how the <b>object responsibilities are shared here</b>. Each Figure is in charge of drawing and moving itself. Simple figures all move in the same way. Each simple figure has to manage their own drawing themselves. Compound figures move by asking their parts to move, and the same thing happens when it comes to be drawn. The drawing board knows a Figure object which, in fact, can be whatever simple figure or a compound figure: they are all drawn and moved in the same way. In fact, the drawing board works correctly regardless of the real type of the figure; the drawing board does not have to know the details of the figure. When the drawing board calls the method <code>draw</code> or <code>move</code> of the figure, the method of the real type of the figure is called, thanks to <b>polymorphism</b>.</p>

        <p>It's worth to notice that CompoundFigure can contain whatever Figure object, even another CompoundFigure! The class structure allows for highly complex figure formations, whereas figures move and draw themselves always in the same way.</p>

        <p>The class structure can also be expanded easily; for instance, a compound figure would work without needing changes even if we created new types which inherit Figure (say Triangle, Point, Line, exc.), and the same thing would apply to the drawing board and user interface.</p>

</div>

<h3> Pre-made Application Frameworks</h3>

<p>An application framework is a program which provides a baseline and a set of features to implement a particular application. One way to create an application framework is to create a class which provides pre-made features, so that classes can inherit it and build a particular application. Application frameworks are usually wide, and they are thought for a special purpose, for instance to program games or develop web-applications. Let's quickly get acquainted with a pre-made application library, by greating the application logic of a Game of Life.</p>

<div class="tehtavat">
    <p class="heading" id="e43">Exercise 43: Game of Life</p>

<p>In this exercise, we implement the application logic of a Game of Life, inheriting a pre-made application body.The application body is in a library which has been added to the project singularly, and its source codes are not visible.</p>

<p><b>ATTENTION:</b> your task won't be extremely difficult, but the exercise descriptions may look a bit confusing, at first. Read the instruction carefully, or ask for help if you can't get started. The exercise is definitely worth of your energies, because the result is beautiful!</p>

<p>Game of Life is a simple "population simulator" which was developed by the mathematician John Conway; see <a href="http://en.wikipedia.org/wiki/Conway%27s_Game_of_Life">http://en.wikipedia.org/wiki/Conway%27s_Game_of_Life</a>.</p>

<p>Game of Life rules:</p>
<ul><li>Every living cell dies if they have less than two living neighbours.</li>
<li>Every living cell keeps on living during the following iteration (i.e. turn) if they have two or three living neighbours.</li>
<li>Every living cell dies if they have more than three living neighbours.</li>
<li>Every dead cell is turned back to life if they have exactly three living neighbours.</li>
</ul><p>The abstract class <code>GameOfLifeBoard</code> provides the following functionality</p>
<ul><li><b>public GameOfLifeBoard(int length, int height)</b> creates a game board of the defined dimensions</li>
  <li><b>public boolean[][] getBoard()</b> provides access to the game board, which is a bidimensional table containing boolean values – as you may guess from the method return value! We come back to bidimensional boards later on when needed.</li>
  <li><b>public int getWidth()</b> returns the board width</li>
  <li><b>public int getHeight()</b> returns the board height</li>
  <li><b>public void playTurn()</b> simulates a turn of the game</li>
</ul><p>The class <code>GameOfLifeBoard</code> has also got the following abstract method, <b>which you will have to implement</b>.</p><p>

</p><ul><li><b>public abstract void turnToLiving(int x, int y)</b> animates the cell whose coordinates are (x, y), that is to say it assigns the value <i>true</i> to it. If the coordinates are outside the board, nothing happens.</li>
  <li><b>public abstract void turnToDead(int x, int y)</b> kills the cell whose coordinates are (x, y), that is to say it assigns the value <i>false</i> to it. If the coordinates are outside the board, nothing happens.</li>
  <li><b>public abstract boolean isAlive(int x, int y)</b> tells whether the cell at (x, y) is alive. If the coordinates are outside the board, the method returns <i>false.</i></li>
  <li><b>public abstract void initiateRandomCells(double probabilityForEachCell)</b> initiates all the cells of the board: every cell is alive with a probability of <i>probabilityForEachCell.</i> The probability is a double value between [0, 1]. If a method is called with value 1, all the cells have to be alive. Accordingly, if the probability is 0, all the cells have to be dead.</li>
  <li><b>public abstract int getNumberOfLivingNeighbours(int x, int y)</b> tells the number of living neighbours for the cell at (x, y).</li>
  <li><b>public abstract void manageCell(int x, int y, int livingNeighbours)</b> managese the cell (x, y) according to the rules of the Game of Life.</li>
</ul><h4>Exercise 43.1: GameOfLife implementation, Part 1</h4>

<p>Create the class <code>PersonalBoard</code> into the package <code>game</code>; PersonalBoard inherits the class <code>GameOfLifeBoard</code> which is in the package <code>gameoflife</code>. Note that the package <code>gameoflife</code> is not visible in your project, but it comes together with the class library. In the class <code>PersonalBoard</code>, implement the constructor <code>public PersonalBoard(int width, int height)</code>, which calls the superclass constructor with the given parameters:</p>

<pre class="sh_java sh_sourceCode"><span class="sh_preproc">import</span> gameoflife<span class="sh_symbol">.</span>GameOfLifeBoard<span class="sh_symbol">;</span>

<span class="sh_keyword">public</span> <span class="sh_keyword">class</span><span class="sh_normal"> </span><span class="sh_classname">PersonalBoard</span> <span class="sh_keyword">extends</span> GameOfLifeBoard <span class="sh_cbracket">{</span>

    <span class="sh_keyword">public</span> <span class="sh_function">PersonalBoard</span><span class="sh_symbol">(</span><span class="sh_type">int</span> width<span class="sh_symbol">,</span> <span class="sh_type">int</span> height<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span>
        <span class="sh_keyword">super</span><span class="sh_symbol">(</span>width<span class="sh_symbol">,</span> height<span class="sh_symbol">);</span>
    <span class="sh_cbracket">}</span>

    <span class="sh_comment">// ..</span>
</pre>

<p>You can first replace all the abstract methods with non-abstract ones, which do not do anything particular anyway, so far. However, because the methods are not abstract, this class can create instances, differently than the abstract class GameOfLifeBoard.</p>

<p>Implement the following methods</p>
<ul><li><b>public abstract void turnToLiving(int x, int y)</b> animates the cell whose coordinates are (x, y), that is to say it assigns the value <i>true</i> to it. If the coordinates are outside the board, nothing happens.</li>
  <li><b>public abstract void turnToDead(int x, int y)</b> kills the cell whose coordinates are (x, y), that is to say it assigns the value <i>false</i> to it. If the coordinates are outside the board, nothing happens.</li>
  <li><b>public abstract boolean isAlive(int x, int y)</b> tells whether the cell at (x, y) is alive. If the coordinates are outside the board, the method returns <i>false.</i></li>
</ul><p><b>Hint:</b> You have access to the bidimensional table of the superclass through the superclass method <code>getBoard()</code>. Bidimensional tables are used as normal tables, but they are assigned two indexes. The first index tells

the row

and the second tells

the column. For instance, the following program chunk creates a 10 x 10 table, and prints the value at (3,1).</p>

<pre class="sh_java sh_sourceCode"><span class="sh_type">boolean</span><span class="sh_symbol">[][]</span> values <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_type">boolean</span><span class="sh_symbol">[</span><span class="sh_number">10</span><span class="sh_symbol">][</span><span class="sh_number">10</span><span class="sh_symbol">];</span>
System<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">println</span><span class="sh_symbol">(</span>values<span class="sh_symbol">[</span><span class="sh_number">3</span><span class="sh_symbol">][</span><span class="sh_number">1</span><span class="sh_symbol">]);</span>
</pre>

<p>Accordingly, we can print the value at (x,y) of our PersonalBoard's superclass, in the following way:</p>

<pre class="sh_java sh_sourceCode"><span class="sh_type">boolean</span><span class="sh_symbol">[][]</span> board <span class="sh_symbol">=</span> <span class="sh_function">getBoard</span><span class="sh_symbol">();</span>
System<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">println</span><span class="sh_symbol">(</span>board<span class="sh_symbol">[</span>x<span class="sh_symbol">][</span>y<span class="sh_symbol">]);</span>
</pre>

<p>And an index (x,y) can be assigned a value in the following way:</p>

<pre class="sh_java sh_sourceCode"><span class="sh_type">boolean</span><span class="sh_symbol">[][]</span> board <span class="sh_symbol">=</span> <span class="sh_function">getBoard</span><span class="sh_symbol">();</span>
board<span class="sh_symbol">[</span>x<span class="sh_symbol">][</span>y<span class="sh_symbol">]</span> <span class="sh_symbol">=</span> <span class="sh_keyword">true</span><span class="sh_symbol">;</span>
</pre>

<p>Or straight, using a helping variable:</p>

<pre class="sh_java sh_sourceCode"><span class="sh_function">getBoard</span><span class="sh_symbol">()[</span>x<span class="sh_symbol">][</span>y<span class="sh_symbol">]</span> <span class="sh_symbol">=</span> <span class="sh_keyword">true</span><span class="sh_symbol">;</span>
</pre>


<p>Test your implementation with the following program.</p>
<pre class="sh_java sh_sourceCode"><span class="sh_preproc">package</span> game<span class="sh_symbol">;</span>

<span class="sh_keyword">public</span> <span class="sh_keyword">class</span><span class="sh_normal"> </span><span class="sh_classname">Main</span> <span class="sh_cbracket">{</span>
    <span class="sh_keyword">public</span> <span class="sh_keyword">static</span> <span class="sh_type">void</span> <span class="sh_function">main</span><span class="sh_symbol">(</span>String<span class="sh_symbol">[]</span> args<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span>
        <span class="sh_usertype">PersonalBoard</span><span class="sh_normal"> </span>board <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">PersonalBoard</span><span class="sh_symbol">(</span><span class="sh_number">7</span><span class="sh_symbol">,</span> <span class="sh_number">5</span><span class="sh_symbol">);</span>

        board<span class="sh_symbol">.</span><span class="sh_function">turnToLiving</span><span class="sh_symbol">(</span><span class="sh_number">2</span><span class="sh_symbol">,</span> <span class="sh_number">0</span><span class="sh_symbol">);</span>
        board<span class="sh_symbol">.</span><span class="sh_function">turnToLiving</span><span class="sh_symbol">(</span><span class="sh_number">4</span><span class="sh_symbol">,</span> <span class="sh_number">0</span><span class="sh_symbol">);</span>

        board<span class="sh_symbol">.</span><span class="sh_function">turnToLiving</span><span class="sh_symbol">(</span><span class="sh_number">3</span><span class="sh_symbol">,</span> <span class="sh_number">3</span><span class="sh_symbol">);</span>
        board<span class="sh_symbol">.</span><span class="sh_function">turnToLiving</span><span class="sh_symbol">(</span><span class="sh_number">3</span><span class="sh_symbol">,</span> <span class="sh_number">3</span><span class="sh_symbol">);</span>

        board<span class="sh_symbol">.</span><span class="sh_function">turnToLiving</span><span class="sh_symbol">(</span><span class="sh_number">0</span><span class="sh_symbol">,</span> <span class="sh_number">2</span><span class="sh_symbol">);</span>
        board<span class="sh_symbol">.</span><span class="sh_function">turnToLiving</span><span class="sh_symbol">(</span><span class="sh_number">1</span><span class="sh_symbol">,</span> <span class="sh_number">3</span><span class="sh_symbol">);</span>
        board<span class="sh_symbol">.</span><span class="sh_function">turnToLiving</span><span class="sh_symbol">(</span><span class="sh_number">2</span><span class="sh_symbol">,</span> <span class="sh_number">3</span><span class="sh_symbol">);</span>
        board<span class="sh_symbol">.</span><span class="sh_function">turnToLiving</span><span class="sh_symbol">(</span><span class="sh_number">3</span><span class="sh_symbol">,</span> <span class="sh_number">3</span><span class="sh_symbol">);</span>
        board<span class="sh_symbol">.</span><span class="sh_function">turnToLiving</span><span class="sh_symbol">(</span><span class="sh_number">4</span><span class="sh_symbol">,</span> <span class="sh_number">3</span><span class="sh_symbol">);</span>
        board<span class="sh_symbol">.</span><span class="sh_function">turnToLiving</span><span class="sh_symbol">(</span><span class="sh_number">5</span><span class="sh_symbol">,</span> <span class="sh_number">3</span><span class="sh_symbol">);</span>
        board<span class="sh_symbol">.</span><span class="sh_function">turnToLiving</span><span class="sh_symbol">(</span><span class="sh_number">6</span><span class="sh_symbol">,</span> <span class="sh_number">2</span><span class="sh_symbol">);</span>

        <span class="sh_usertype">GameOfLifeTester</span><span class="sh_normal"> </span>tester <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">GameOfLifeTester</span><span class="sh_symbol">(</span>board<span class="sh_symbol">);</span>
        tester<span class="sh_symbol">.</span><span class="sh_function">play</span><span class="sh_symbol">();</span>
    <span class="sh_cbracket">}</span>
<span class="sh_cbracket">}</span>
</pre>
<p>

The output should look like the following:

</p><pre>Press enter to continue, otherwise quit: &lt;enter&gt;

  X X

X     X
 XXXXX

Press enter to continue, otherwise quit: <font color="red">stop</font>
Thanks!
</pre>
<p>

</p><h4>Exercise 43.2: GameOfLife implementation, Part 2</h4>

<p>Implement the method <b>public abstract void initiateRandomCells(double probabilityForEachCell)</b> initiates all the cells of the board: every cell is alive with a probability of <i>probabilityForEachCell.</i> The probability is a double value between [0, 1]. </p>

<p>Test the method. Given the value 0.0, there should be no cell alive; given the value 1.0, all the cells should be alive (i.e. visible in the form of X characters). With the value 0.5, around fifty precent of the cells should be alive.</p>

<pre class="sh_java sh_sourceCode">        <span class="sh_usertype">PersonalBoard</span><span class="sh_normal"> </span>board <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">PersonalBoard</span><span class="sh_symbol">(</span><span class="sh_number">3</span><span class="sh_symbol">,</span> <span class="sh_number">3</span><span class="sh_symbol">);</span>
        board<span class="sh_symbol">.</span><span class="sh_function">initiateRandomCells</span><span class="sh_symbol">(</span><span class="sh_number">1.0</span><span class="sh_symbol">);</span>

        <span class="sh_usertype">GameOfLifeTester</span><span class="sh_normal"> </span>tester <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">GameOfLifeTester</span><span class="sh_symbol">(</span>board<span class="sh_symbol">);</span>
        tester<span class="sh_symbol">.</span><span class="sh_function">play</span><span class="sh_symbol">();</span>
</pre>

<pre>Press enter to continue, otherwise quit: &lt;enter&gt;

XXX
XXX
XXX
Press enter to continue, otherwise quit: <font color="red">stop</font>
Thanks!
</pre>


<h4>Exercise 43.3: GameOfLife Implementation, part 3</h4>

<p>Implement the method <b>getNumberOfLivingNeighbours(int x, int y),</b> which calculates the number of neighbour cells which are alive. Central cells have eight neighbours, the ones on the side have five, and the ones in the corner have only three. </p>

<p>Test the method with the following sentences (of course, you can create your own test instances!):</p>

<pre class="sh_java sh_sourceCode"><span class="sh_usertype">PersonalBoard</span><span class="sh_normal"> </span>board <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">PersonalBoard</span><span class="sh_symbol">(</span><span class="sh_number">7</span><span class="sh_symbol">,</span> <span class="sh_number">5</span><span class="sh_symbol">);</span>

board<span class="sh_symbol">.</span><span class="sh_function">turnToLiving</span><span class="sh_symbol">(</span><span class="sh_number">0</span><span class="sh_symbol">,</span> <span class="sh_number">1</span><span class="sh_symbol">);</span>
board<span class="sh_symbol">.</span><span class="sh_function">turnToLiving</span><span class="sh_symbol">(</span><span class="sh_number">1</span><span class="sh_symbol">,</span> <span class="sh_number">0</span><span class="sh_symbol">);</span>
board<span class="sh_symbol">.</span><span class="sh_function">turnToLiving</span><span class="sh_symbol">(</span><span class="sh_number">1</span><span class="sh_symbol">,</span> <span class="sh_number">2</span><span class="sh_symbol">);</span>
board<span class="sh_symbol">.</span><span class="sh_function">turnToLiving</span><span class="sh_symbol">(</span><span class="sh_number">2</span><span class="sh_symbol">,</span> <span class="sh_number">2</span><span class="sh_symbol">);</span>
board<span class="sh_symbol">.</span><span class="sh_function">turnToLiving</span><span class="sh_symbol">(</span><span class="sh_number">2</span><span class="sh_symbol">,</span> <span class="sh_number">1</span><span class="sh_symbol">);</span>

System<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">println</span><span class="sh_symbol">(</span><span class="sh_string">"Neighbours alive (0,0): "</span> <span class="sh_symbol">+</span> board<span class="sh_symbol">.</span><span class="sh_function">getNumberOfLivingNeighbours</span><span class="sh_symbol">(</span><span class="sh_number">0</span><span class="sh_symbol">,</span> <span class="sh_number">0</span><span class="sh_symbol">));</span>
System<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">println</span><span class="sh_symbol">(</span><span class="sh_string">"Neighbours alive (1,1): "</span> <span class="sh_symbol">+</span> board<span class="sh_symbol">.</span><span class="sh_function">getNumberOfLivingNeighbours</span><span class="sh_symbol">(</span><span class="sh_number">1</span><span class="sh_symbol">,</span> <span class="sh_number">1</span><span class="sh_symbol">));</span>
</pre>
<p>

The print output should look like the following:
</p><pre>Neighbours alive (0,0): 2
Neighbours alive (1,1): 5
</pre>


<h4>Exercise 43.4: GameOfLife Implementation, Part 4</h4>

<p>Only one method is missing: <b>manageCell(int x, int y, int livingNeighbours)</b>. Game of Life rules were the following:</p>

<ul><li>Every living cell dies if they have less than two living neighbours.</li>
<li>Every living cell keeps on living during the following iteration (i.e. turn) if they have two or three living neighbours.</li>
<li>Every living cell dies if they have more than three living neighbours.</li>
<li>Every dead cell is turned back to life if they have exactly three living neighbours.</li>
</ul><p>Implement the method <code>manageCell(int x, int y, int livingNeighbours)</code> according to the following rules. It's good to program and test one rule at one time!</p>

<p>When you are done with all the rule, you can test the program with the following graphic simulator.</p>

<pre class="sh_java sh_sourceCode"><span class="sh_preproc">package</span> game<span class="sh_symbol">;</span>

<span class="sh_preproc">import</span> gameoflife<span class="sh_symbol">.</span>Simulator<span class="sh_symbol">;</span>

<span class="sh_keyword">public</span> <span class="sh_keyword">class</span><span class="sh_normal"> </span><span class="sh_classname">Main</span> <span class="sh_cbracket">{</span>

    <span class="sh_keyword">public</span> <span class="sh_keyword">static</span> <span class="sh_type">void</span> <span class="sh_function">main</span><span class="sh_symbol">(</span>String<span class="sh_symbol">[]</span> args<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span>
        <span class="sh_usertype">PersonalBoard</span><span class="sh_normal"> </span>board <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">PersonalBoard</span><span class="sh_symbol">(</span><span class="sh_number">100</span><span class="sh_symbol">,</span> <span class="sh_number">100</span><span class="sh_symbol">);</span>
        board<span class="sh_symbol">.</span><span class="sh_function">initiateRandomCells</span><span class="sh_symbol">(</span><span class="sh_number">0.7</span><span class="sh_symbol">);</span>

        <span class="sh_usertype">Simulator</span><span class="sh_normal"> </span>simulator <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">Simulator</span><span class="sh_symbol">(</span>board<span class="sh_symbol">);</span>
        simulator<span class="sh_symbol">.</span><span class="sh_function">simulate</span><span class="sh_symbol">();</span>
    <span class="sh_cbracket">}</span>
<span class="sh_cbracket">}</span>
</pre>


</div>
</div>    </div>


      </div><!-- /inner -->

  </div><!-- /node-326 -->
        </div>


              </div><!-- /inner-inner -->
	  </div><!-- /inner-wrapper -->
    <div class="corner-bottom"><div class="corner-bottom-right corner"></div><div class="corner-bottom-left corner"></div></div>
  </div><!-- /inner -->
</div><!-- /block -->  </div>
</div>
  </div>
</div>
</div>
</div>
                                                                  </div><!-- /content-content -->
                                                              </div><!-- /content-inner-inner -->
                            </div><!-- /content-inner -->
                          </div><!-- /content-region-inner -->
                        </div><!-- /content-region -->

                        <div id="content-bottom" class="content-bottom row nested ">
<div id="content-bottom-inner" class="content-bottom-inner inner clearfix">

<div id="block-block-1" class="block block-block odd first last grid16-16">
  <div class="inner">
    <div class="corner-top"><div class="corner-top-right corner"></div><div class="corner-top-left corner"></div></div>
      	<div class="inner-wrapper">
      <div class="inner-inner">
                <div class="content clearfix">
          <div id="header-top-block">
<p class="rtecenter">
</p>
<p class="rtecenter">
</p>
	</div>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-47575342-3', 'auto');
  ga('set', 'anonymizeIp', true);
  ga('send', 'pageview');

</script>        </div>
      </div><!-- /inner-inner -->
	  </div><!-- /inner-wrapper -->
    <div class="corner-bottom"><div class="corner-bottom-right corner"></div><div class="corner-bottom-left corner"></div></div>
  </div><!-- /inner -->
</div><!-- /block --></div><!-- /content-bottom-inner -->
</div><!-- /content-bottom -->
                      </div><!-- /content-group-inner -->
                    </div><!-- /content-group -->

                                      </div><!-- /main-content-inner -->
                </div><!-- /main-content -->

                              </div><!-- /main-group-inner -->
            </div><!-- /main-group -->
          </div><!-- /main-inner -->
        </div><!-- /main -->
      </div><!-- /main-wrapper -->

      <!-- postscript-bottom row: width = grid_width -->

      <!-- footer row: width = grid_width -->

      <!-- footer-message row: width = grid_width -->
      <div id="footer-message-wrapper" class="footer-message-wrapper full-width">
        <div id="footer-message" class="footer-message row grid16-16">
          <div id="footer-message-inner" class="footer-message-inner inner clearfix">
                              <div id="footer-message-text" class="footer-message-text block">
<div id="footer-message-text-inner" class="footer-message-text-inner inner clearfix">
<br>
</div><!-- /footer-message-text-inner -->
</div><!-- /footer-message-text -->

          </div><!-- /footer-message-inner -->
        </div><!-- /footer-message -->
      </div><!-- /footer-message-wrapper -->

    <!-- /page-inner -->
  <!-- /page -->


</body>
