<head>
  <link href="java.css" rel="stylesheet" type="text/css">
  <!-- Latest compiled and minified CSS -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

  <!-- Optional theme -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">

  <!-- Latest compiled and minified JavaScript -->
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
</head>
<header class="navbar navbar-fixed-top navbar-inverse navbar-default">
  <div class="container-fluid" style="background-color: #20B2AA; padding-left:15%;">
    <nav>
      <div class="navbar-brand" style="color: white">
        Enrole
      </div>
    </nav>
  </div>
</header>
<body id="pid-programming-part2-material-week-9" class="not-front not-logged-in page-node node-type-weekly-tasks no-sidebars full-node panels layout-main sidebars-both-first font-family-lucida font-size-13 grid-type-fluid grid-width-16 fluid-100 container signup2">
  <div id="page" class="page">
    <div id="page-inner" class="page-inner">

      <!-- header-top row: width = grid_width -->

      <!-- header-group row: width = grid_width -->
      <div id="header-group-wrapper" class="header-group-wrapper full-width">
        <div id="header-group" class="header-group row grid16-16">
          <div id="header-group-inner" class="header-group-inner inner clearfix">
                                    <div id="primary-menu" class="primary-menu block">
<div id="primary-menu-inner" class="primary-menu-inner inner clearfix">
    <div class="navigation-wrapper"> <div class="navigation-links left">

      </div>
<div class="navigation-links right">                                     </div>                 </div> </div><!-- /primary-menu-inner -->
</div><!-- /primary-menu -->
          </div><!-- /header-group-inner -->
        </div><!-- /header-group -->
      </div><!-- /header-group-wrapper -->

      <!-- preface-top row: width = grid_width -->

<!--            <div id="preface-top-wrapper" class="preface-top-wrapper full-width">
        <div id="preface-top" class="preface-top row grid16-16">
          <div id="preface-top-inner" class="preface-top-inner inner clearfix">
-->
          </div><!-- /preface-top-inner -->
        </div><!-- /preface-top -->
      <!-- /preface-top-wrapper -->

    <!-- main row: width = grid_width -->
    <div id="main-wrapper" class="main-wrapper full-width">
      <div id="main" class="main row grid16-16">
        <div id="main-inner" class="main-inner inner clearfix">

          <!-- main group: width = grid_width - sidebar_first_width -->
          <div id="main-group" class="main-group row nested grid16-16">
            <div id="main-group-inner" class="main-group-inner inner clearfix">

              <div id="main-content" class="main-content row nested">
                <div id="main-content-inner" class="main-content-inner inner clearfix">
                  <!-- content group: width = grid_width - (sidebar_first_width + sidebar_last_width) -->
                    <div id="content-group" class="content-group row nested " style="width:100%">
                      <div id="content-group-inner" class="content-group-inner inner clearfix">


                        <div id="content-region" class="content-region row nested">
                          <div id="content-region-inner" class="content-region-inner inner clearfix">
                            <a name="main-content-area" id="main-content-area"></a>
                                                        <div id="content-inner" class="content-inner block">
                              <div id="content-inner-inner" class="content-inner-inner inner clearfix">
                                                                                                <div id="content-content" class="content-content">
                                  <div class="panel-flexible panels-flexible-13 clear-block">
<div class="panel-flexible-inside panels-flexible-13-inside">
<div class="panels-flexible-row panels-flexible-row-13-7 panels-flexible-row-first clear-block ">
  <div class="inside panels-flexible-row-inside panels-flexible-row-13-7-inside panels-flexible-row-inside-first clear-block">
<div class="panels-flexible-region panels-flexible-region-13-js_ panels-flexible-region-first panels-flexible-region-last ">
  <div class="inside panels-flexible-region-inside panels-flexible-region-13-js_-inside panels-flexible-region-inside-first panels-flexible-region-inside-last">
<div class="panel-pane pane-custom pane-2 ">
  <div class="inner">
    <div class="corner-top"><div class="corner-top-right corner"></div><div class="corner-top-left corner"></div></div>
  	<div class="inner-wrapper">
      <div class="inner-inner">

            <div class="warning-banner">
                  </div>

                    <div class="pane-content content">
                      <h1 class="title">Object-Oriented Programming with Java, part II</h1>        </div>


              </div><!-- /inner-inner -->
	  </div><!-- /inner-wrapper -->
    <div class="corner-bottom"><div class="corner-bottom-right corner"></div><div class="corner-bottom-left corner"></div></div>
  </div><!-- /inner -->
</div><!-- /block --><div class="panel-region-separator"></div><div class="panel-pane pane-custom pane-3 ">
  <div class="inner">
    <div class="corner-top"><div class="corner-top-right corner"></div><div class="corner-top-left corner"></div></div>
  	<div class="inner-wrapper">
      <div class="inner-inner">



        <div class="pane-content content">
          <link href="/2013-oo-programming/menu.css" media="screen" rel="stylesheet" type="text/css">
<link href="/2013-oo-programming/common-new.css" media="screen, print" rel="stylesheet" type="text/css">
<link href="/2013-oo-programming/sh_style.css" media="screen, print" rel="stylesheet" type="text/css">        </div>


              </div><!-- /inner-inner -->
	  </div><!-- /inner-wrapper -->
    <div class="corner-bottom"><div class="corner-bottom-right corner"></div><div class="corner-bottom-left corner"></div></div>
  </div><!-- /inner -->
</div><!-- /block -->  </div>
</div>
  </div>
</div>
<div class="panels-flexible-row panels-flexible-row-13-4 clear-block js">
  <div class="inside panels-flexible-row-inside panels-flexible-row-13-4-inside clear-block">
<div class="panels-flexible-region panels-flexible-region-13-js_en_ panels-flexible-region-first ">
  <div class="inside panels-flexible-region-inside panels-flexible-region-13-js_en_-inside panels-flexible-region-inside-first">
  </div>
</div>
<div class="panels-flexible-region panels-flexible-region-13-js ">
  <div class="inside panels-flexible-region-inside panels-flexible-region-13-js-inside">
<div class="panel-pane pane-node ">
  <div class="inner">
    <div class="corner-top"><div class="corner-top-right corner"></div><div class="corner-top-left corner"></div></div>
  	<div class="inner-wrapper">
      <div class="inner-inner">



        <div class="pane-content content">

<div id="node-222" class="node odd full-node node-type-page">
  <div class="inner">

        <h2 class="title"><a href="/content/js-en" title=""></a></h2>



    <div class="content clearfix">
      <script type="text/javascript" src="https://www.cs.helsinki.fi/group/java/k13/ohpe/js/bootstrap.min.js"></script>
<script type="text/javascript" src="https://www.cs.helsinki.fi/group/java/k13/ohpe/javascripts/jquery-1.7.1.min.js"></script>
<script type="text/javascript" src="https://www.cs.helsinki.fi/group/java/materiaali/javascripts/exercises-eng-new.js"></script>
<script type="text/javascript" src="https://www.cs.helsinki.fi/group/java/materiaali/javascripts/common-mooc-eng.js"></script>
<script type="text/javascript" src="https://www.cs.helsinki.fi/group/java/k13/ohpe/javascripts/shjs/sh_main.min.js"></script>
<script type="text/javascript" src="https://www.cs.helsinki.fi/group/java/k13/ohpe/javascripts/shjs/sh_java.min.js"></script>



<script type="text/javascript" src="https://www.cs.helsinki.fi/group/java/k13/ohpe/javascripts/jquery.easing.js"></script>

<div id="toc" class="menu" data-first-chapter-index="1" data-first-exercise-index="1">
          <!-- <span id="materiaali_toc" ></span> -->
          <!--div id="tehtavat_toc" ></div-->
          <!-- <span id="tehtavat_toc2" ></span> -->
        </div>    </div>


      </div><!-- /inner -->

  </div><!-- /node-222 -->
        </div>


              </div><!-- /inner-inner -->
	  </div><!-- /inner-wrapper -->
    <div class="corner-bottom"><div class="corner-bottom-right corner"></div><div class="corner-bottom-left corner"></div></div>
  </div><!-- /inner -->
</div><!-- /block -->  </div>
</div>
<div class="panels-flexible-region panels-flexible-region-13-copyright panels-flexible-region-last float-right">
  <div class="inside panels-flexible-region-inside panels-flexible-region-13-copyright-inside panels-flexible-region-inside-last">
<div class="panel-pane pane-custom pane-1 box ">
  <div class="inner">
    <div class="corner-top"><div class="corner-top-right corner"></div><div class="corner-top-left corner"></div></div>
  	<div class="inner-wrapper">
      <div class="inner-inner">



        <div class="pane-content content">
          <p><a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/2.0/"><img alt="Creative Commons License" style="border-width:0; float:right;" src="http://i.creativecommons.org/l/by-nc-sa/2.0/88x31.png"></a><small>This material is licensed under the Creative Commons BY-NC-SA license, which means that you can use it and distribute it freely so long as you do not erase the names of the original authors. If you do changes in the material and want to distribute this altered version of the material, you have to license it with a similar free license. The use of the material for commercial use is prohibited without a separate agreement.</small></p>        </div>


              </div><!-- /inner-inner -->
	  </div><!-- /inner-wrapper -->
    <div class="corner-bottom"><div class="corner-bottom-right corner"></div><div class="corner-bottom-left corner"></div></div>
  </div><!-- /inner -->
</div><!-- /block --><div class="panel-region-separator"></div><div class="panel-pane pane-content-field pane-field-author course-menu ">
  <div class="inner">
    <div class="corner-top"><div class="corner-top-right corner"></div><div class="corner-top-left corner"></div></div>
  	<div class="inner-wrapper">
      <div class="inner-inner">



        <div class="pane-content content">
          <div class="field field-type-text field-field-author">
    <div class="field-items">
            <div class="field-item odd">
                    Authors: Arto Hellas, Matti Luukkainen        </div>
        </div>
</div>
        </div>


              </div><!-- /inner-inner -->
	  </div><!-- /inner-wrapper -->
    <div class="corner-bottom"><div class="corner-bottom-right corner"></div><div class="corner-bottom-left corner"></div></div>
  </div><!-- /inner -->
</div><!-- /block --><div class="panel-region-separator"></div><div class="panel-pane pane-content-field pane-field-translators course-menu ">
  <div class="inner">
    <div class="corner-top"><div class="corner-top-right corner"></div><div class="corner-top-left corner"></div></div>
  	<div class="inner-wrapper">
      <div class="inner-inner">



        <div class="pane-content content">
          <div class="field field-type-text field-field-translators">
    <div class="field-items">
            <div class="field-item odd">
                    Translators: Simone Romeo, Kenny Heinonen        </div>
        </div>
        <div class="field-item odd"><br>The course is maintained by the Agile Education Research Group</div>
</div>
        </div>


              </div><!-- /inner-inner -->
	  </div><!-- /inner-wrapper -->
    <div class="corner-bottom"><div class="corner-bottom-right corner"></div><div class="corner-bottom-left corner"></div></div>
  </div><!-- /inner -->
</div><!-- /block -->  </div>
</div>
  </div>
</div>
<div class="panels-flexible-row panels-flexible-row-13-8 panels-flexible-row-last clear-block js en">
  <div class="inside panels-flexible-row-inside panels-flexible-row-13-8-inside panels-flexible-row-inside-last clear-block">
<div class="panels-flexible-region panels-flexible-region-13-js_en panels-flexible-region-first panels-flexible-region-last ">
  <div class="inside panels-flexible-region-inside panels-flexible-region-13-js_en-inside panels-flexible-region-inside-first panels-flexible-region-inside-last">
<div class="panel-pane pane-node-content box-mooc ">
  <div class="inner">
    <div class="corner-top"><div class="corner-top-right corner"></div><div class="corner-top-left corner"></div></div>
  	<div class="inner-wrapper">
      <div class="inner-inner">



        <div class="pane-content content">

<div id="node-322" class="node even full-node node-type-weekly_tasks">
  <div class="inner">




    <div class="content clearfix">
      <div class="viikkoraja-mooc" id="Week 9" deadline="unlocks when 85% of week 8 done " data-first-chapter-index="42" data-first-exercise-index="124" data-first-week-index="9" data-first-chapter-index-mooc="43" data-first-exercise-index-mooc="17" data-first-week-index-mooc="9" tekija="Arto Vihavainen, Matti Luukkainen">


    <h2 id="43"> Single Responsibility Principle</h2>

    <p>When we design bigger programs, we often reason about what class has to deal with what task. If we delegate the implementation of the whole program to one class, the result is inevitably chaos. A sector of software design, <em>object-oriented design</em>, includes the <em>Single Responsibility Principle</em>, which we should follow.</p>

    <p>The Single Responsibility Principle states that each class should have only one clear role. If the class has one clear role, modifying that role is easy, and only one class will have to be modified. <em>Each class should have only one reason to be modified.</em>.</p>

    <p>Let us focus on the following class <code>Worker</code>, which has methods to calculate his salary and to report his working hours.</p>

    <pre class="sh_java sh_sourceCode"><span class="sh_keyword">public</span> <span class="sh_keyword">class</span><span class="sh_normal"> </span><span class="sh_classname">Worker</span> <span class="sh_cbracket">{</span>
    <span class="sh_comment">// object variables</span>

    <span class="sh_comment">// worker's constructor and methods</span>

    <span class="sh_keyword">public</span> <span class="sh_type">double</span> <span class="sh_function">calculateSalary</span><span class="sh_symbol">()</span> <span class="sh_cbracket">{</span>
        <span class="sh_comment">// the logic concerning salary count</span>
    <span class="sh_cbracket">}</span>

    <span class="sh_keyword">public</span> <span class="sh_usertype">String</span><span class="sh_normal"> </span><span class="sh_function">reportHours</span><span class="sh_symbol">()</span> <span class="sh_cbracket">{</span>
        <span class="sh_comment">// the logic concerning working hours bookkeeping</span>
    <span class="sh_cbracket">}</span>
<span class="sh_cbracket">}</span>
    </pre>

    <p>Even if the examples above do not show the concrete implementations, an alarm should go off. Our <code>Worker</code> class has at least three different responsibilities. It represents a worker, it performes the role of a salary calculator, and the role of a working hour bookkeeping system by reporting working hours. The class above should be split into three: one should represent the worker, another should represent the salary calculator, and the third should deal with time bookkeeping.</p>

    <pre class="sh_java sh_sourceCode"><span class="sh_keyword">public</span> <span class="sh_keyword">class</span><span class="sh_normal"> </span><span class="sh_classname">Worker</span> <span class="sh_cbracket">{</span>
    <span class="sh_comment">// object variables</span>

    <span class="sh_comment">// worker's constructor and methods</span>
<span class="sh_cbracket">}</span>
    </pre>

    <pre class="sh_java sh_sourceCode"><span class="sh_keyword">public</span> <span class="sh_keyword">class</span><span class="sh_normal"> </span><span class="sh_classname">SalaryCalculator</span> <span class="sh_cbracket">{</span>
    <span class="sh_comment">// object variables</span>

    <span class="sh_comment">// methods for salary count</span>

    <span class="sh_keyword">public</span> <span class="sh_type">double</span> <span class="sh_function">calculateSalary</span><span class="sh_symbol">(</span><span class="sh_usertype">Person</span><span class="sh_normal"> </span>person<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span>
        <span class="sh_comment">// salary calculation logic</span>
    <span class="sh_cbracket">}</span>
<span class="sh_cbracket">}</span>
    </pre>


    <pre class="sh_java sh_sourceCode"><span class="sh_keyword">public</span> <span class="sh_keyword">class</span><span class="sh_normal"> </span><span class="sh_classname">TimeBookkeeping</span> <span class="sh_cbracket">{</span>
    <span class="sh_comment">// object variables</span>

    <span class="sh_comment">// methods concerning time bookkeeping</span>

    <span class="sh_keyword">public</span> <span class="sh_usertype">String</span><span class="sh_normal"> </span><span class="sh_function">createHourReport</span><span class="sh_symbol">(</span><span class="sh_usertype">Person</span><span class="sh_normal"> </span>person<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span>
        <span class="sh_comment">// working hours bookeeping logic</span>
    <span class="sh_cbracket">}</span>
<span class="sh_cbracket">}</span>
    </pre>

    <p><em>Each variable, each code raw, each method, each class, and each program should have only one responsibility. Often a "better" program stucture is clear to the programmer only once the program is implemented. This is completely acceptable: even more important it is that we always try to change a program to make it clearer. <strong>Always refactor -- i.e. always improve your program when it is needed!</strong></em></p>


    <h2 id="44"> Organising Classes into Packages</h2>

    <p>When we design and implement bigger programs, the number of classes rapidly grows. When the number of classes grows, remembering their functionality and methods becomes more difficult. Giving sensible names to classes helps to remember their funcitonality. In addition to giving sensible names, it is good to split the source code files into packages according to their functionality, use, and other logical reasons. In fact, the <em>packages</em> are but folders we use to organise our source code files. Directories are often called folders, both in windows and colloqually. We will use the term directory, anyway.</p>

    <p>Programming environments provide made-up tools for package management. So far, we have been creating classes and interfaces only in the <code>default package</code> of the <code>Source Packages</code> partition. In NetBeans, we can create a new package by clicking on <code>Source Packages</code>, and choosing <code>New -&gt; Java Package...</code>. In the created package, we can create classes in the same way as we do in the <code>default package</code>.</p>

    <p>You can read the name of the package that contains a certain class at the beginning of the source code files in the sentence <code>package <em>packageName</em></code> before the other statements. For instance, the below class <code>Implementation</code> is contained in the package <code>library</code>.</p>

    <pre class="sh_java sh_sourceCode"><span class="sh_preproc">package</span> library<span class="sh_symbol">;</span>

<span class="sh_keyword">public</span> <span class="sh_keyword">class</span><span class="sh_normal"> </span><span class="sh_classname">Implementation</span> <span class="sh_cbracket">{</span>

    <span class="sh_keyword">public</span> <span class="sh_keyword">static</span> <span class="sh_type">void</span> <span class="sh_function">main</span><span class="sh_symbol">(</span>String<span class="sh_symbol">[]</span> args<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span>
        System<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">println</span><span class="sh_symbol">(</span><span class="sh_string">"Hello packageworld!"</span><span class="sh_symbol">);</span>
    <span class="sh_cbracket">}</span>
<span class="sh_cbracket">}</span>
    </pre>

    <p>Packages can contain other packages. For instance, the package definition <code>package library.domain</code> means that the package <code>domain</code> is contained in the package <code>library</code>. By placing packages into other packages, we design the hierachy of classes and interfaces. For instance, all Java's classes are located in packages that are contained in the package <code>java</code>. The package name <code>domain</code> is often used to represent the storage location of the classes which deal with concepts specific for the domain. For instance, the class <code>Book</code> could be stored in the package <code>library.domain</code> because it represents a concept specific of the library.</p>

    <pre class="sh_java sh_sourceCode"><span class="sh_preproc">package</span> library<span class="sh_symbol">.</span>domain<span class="sh_symbol">;</span>

<span class="sh_keyword">public</span> <span class="sh_keyword">class</span><span class="sh_normal"> </span><span class="sh_classname">Book</span> <span class="sh_cbracket">{</span>
    <span class="sh_keyword">private</span> <span class="sh_usertype">String</span><span class="sh_normal"> </span>name<span class="sh_symbol">;</span>

    <span class="sh_keyword">public</span> <span class="sh_function">Book</span><span class="sh_symbol">(</span><span class="sh_usertype">String</span><span class="sh_normal"> </span>name<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span>
        <span class="sh_keyword">this</span><span class="sh_symbol">.</span>name <span class="sh_symbol">=</span> name<span class="sh_symbol">;</span>
    <span class="sh_cbracket">}</span>

    <span class="sh_keyword">public</span> <span class="sh_usertype">String</span><span class="sh_normal"> </span><span class="sh_function">getName</span><span class="sh_symbol">()</span> <span class="sh_cbracket">{</span>
        <span class="sh_keyword">return</span> <span class="sh_keyword">this</span><span class="sh_symbol">.</span>name<span class="sh_symbol">;</span>
    <span class="sh_cbracket">}</span>
<span class="sh_cbracket">}</span>
    </pre>

    <p>We can uses the classes stored in our packages through the <code>import</code> statement. For instance, the class <code>Implementation</code>, which is contained in the package <code>library</code> could make use of a class stored in <code>library.domain</code> through the assignment <code>import library.domain.Book</code>.</p>


    <pre class="sh_java sh_sourceCode"><span class="sh_preproc">package</span> library<span class="sh_symbol">;</span>

<span class="sh_preproc">import</span> library<span class="sh_symbol">.</span>domain<span class="sh_symbol">.</span>Book<span class="sh_symbol">;</span>

<span class="sh_keyword">public</span> <span class="sh_keyword">class</span><span class="sh_normal"> </span><span class="sh_classname">Implementation</span> <span class="sh_cbracket">{</span>

    <span class="sh_keyword">public</span> <span class="sh_keyword">static</span> <span class="sh_type">void</span> <span class="sh_function">main</span><span class="sh_symbol">(</span>String<span class="sh_symbol">[]</span> args<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span>
        <span class="sh_usertype">Book</span><span class="sh_normal"> </span>book <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">Book</span><span class="sh_symbol">(</span><span class="sh_string">"The ABC of Packages!"</span><span class="sh_symbol">);</span>
        System<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">println</span><span class="sh_symbol">(</span><span class="sh_string">"Hello packageworld: "</span> <span class="sh_symbol">+</span> book<span class="sh_symbol">.</span><span class="sh_function">getName</span><span class="sh_symbol">());</span>
    <span class="sh_cbracket">}</span>
<span class="sh_cbracket">}</span>
    </pre>

    <pre>Hello packageworld: The ABC of Packages!
    </pre>

    <p>The import statements are defined in our source code file after the package statement but before the class statement. There can be many of them -- for instance, when we want to use different classes. Java's made-up classes are usually stored in <code>java</code> package child packages. Hopefully, the statements which appear at the beginning of our classes -- such as <code>import java.util.ArrayList</code> and <code>import java.util.Scanner;</code> -- are starting to look more meaningful now.</p>

    <p>From now on, in <em>all</em> our exercises we will use packages. Next, we will create our first packages ourselves.</p>

    <div class="tehtavat" id="viikko9">
      <p class="heading" id="e17">Exercise 17: First Packages</p>

        <h4>Exercise 17.1: UI Interface</h4>

        <p>Create the package <code>mooc</code> in your project. We create the functionality of our application inside this package. Add the package <code>ui</code> to your application; at this point, you should have the package <code>mooc.ui</code>. Create a new interface in it, and call it <code>UserInterface</code>.</p>

        <p>The interface <code>UserInterface</code> has to determine the method <code>void update()</code>. </p>

        <h4>Exercise 17.2: Text User Interface</h4>

        <p>Create the class <code>TextUserInterface</code> in the same package; make it implement the interface <code>UserInterface</code>. Implement the method <code>public void update()</code> which is required by the interface <code>UserInterface</code> which <code>TextUserInterface</code> implements: its only duty should be printing the string "<code>Updating the user interface</code>" with a <code>System.out.println</code> method call.</p>

        <h4>Exercise 17.3: Application Logic</h4>

        <p>Create now the package <code>mooc.logic</code>, and add the class <code>ApplicationLogic</code> in it. The application logic API should be the following:</p>

        <p>
        </p><ul><li>the constructor <code>public ApplicationLogic(UserInterface ui)</code></li>. It receives as parameter a class which implements the interface UserInterface. Note: your application logic has to see the interface and therefore to import it; in other words, the line <code>import mooc.ui.UserInterface</code> must appear at the beginning of he file<br><li>the method <code>public void execute(int howManyTimes)</code></li> prints the string "The application logic works" as many times as it is defined by its parameter variable. After each "The application logic works" printout, the code has to call the <code>update()</code> method of the object which implements the interface <code>UserInterface</code> and which was assigned to the constructor as its parameter.<br></ul><p>You can test your application with the following main class.</p>

        <pre class="sh_java sh_sourceCode"><span class="sh_preproc">import</span> mooc<span class="sh_symbol">.</span>logic<span class="sh_symbol">.</span>ApplicationLogic<span class="sh_symbol">;</span>
<span class="sh_preproc">import</span> mooc<span class="sh_symbol">.</span>ui<span class="sh_symbol">.</span>UserInterface<span class="sh_symbol">;</span>
<span class="sh_preproc">import</span> mooc<span class="sh_symbol">.</span>ui<span class="sh_symbol">.</span>TextUserInterface<span class="sh_symbol">;</span>

<span class="sh_keyword">public</span> <span class="sh_keyword">class</span><span class="sh_normal"> </span><span class="sh_classname">Main</span> <span class="sh_cbracket">{</span>

    <span class="sh_keyword">public</span> <span class="sh_keyword">static</span> <span class="sh_type">void</span> <span class="sh_function">main</span><span class="sh_symbol">(</span>String<span class="sh_symbol">[]</span> args<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span>
        <span class="sh_usertype">UserInterface</span><span class="sh_normal"> </span>ui <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">TextUserInterface</span><span class="sh_symbol">();</span>
        <span class="sh_keyword">new</span> <span class="sh_function">ApplicationLogic</span><span class="sh_symbol">(</span>ui<span class="sh_symbol">).</span><span class="sh_function">execute</span><span class="sh_symbol">(</span><span class="sh_number">3</span><span class="sh_symbol">);</span>
    <span class="sh_cbracket">}</span>
<span class="sh_cbracket">}</span>
        </pre>

        <p>The program output should be the following:</p>

        <pre>The application logic works
Updating the user interface
The application logic works
Updating the user interface
The application logic works
Updating the user interface
        </pre>

    </div>

    <h3> A Concrete Directory Construction</h3>

    <p>All the projects which can be seen are stored in your computer <em><a href="http://en.wikipedia.org/wiki/File_system" target="_blank">file system</a></em>. Each project has its own directory (folder) which contains the project directories and files.</p>

    <p>The project directory <code>src</code> contains the program source code. If a class package is a library, it is located in the directory <code>library</code> of the project source code directory <code>src</code>. If you are interested in it, it is possible to have a look at the concrete project structure in NetBeans, by going to the <em>Files</em> tab which is next to the <em>Projects</em> tab. If you can't see the <em>Files</em> tab, you can display it by choosing <em>Files</em> from the <em>Window</em> menu.</p>

    <p>Application development is usually done through the <em>Projects</em> tab, where NetBeans has hidden the project files which the programmer doesn't have to care about.</p>

    <h3> Visibility Definitions and Packages</h3>

    <p>We have already managed to know two visibility definitions. The method and variables with the visibility definition <code>private</code> are visible only inside the class that defines them. They cannot be used outside the class. Differently, the method and variables with visibility definition <code>public</code> are visible for any class.</p>

    <pre class="sh_java sh_sourceCode"><span class="sh_preproc">package</span> library<span class="sh_symbol">.</span>ui<span class="sh_symbol">;</span>

<span class="sh_keyword">public</span> <span class="sh_keyword">class</span><span class="sh_normal"> </span><span class="sh_classname">UserInterface</span> <span class="sh_cbracket">{</span>
    <span class="sh_keyword">private</span> <span class="sh_usertype">Scanner</span><span class="sh_normal"> </span>reader<span class="sh_symbol">;</span>

    <span class="sh_keyword">public</span> <span class="sh_function">UserInterface</span><span class="sh_symbol">(</span><span class="sh_usertype">Scanner</span><span class="sh_normal"> </span>reader<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span>
        <span class="sh_keyword">this</span><span class="sh_symbol">.</span>reader <span class="sh_symbol">=</span> reader<span class="sh_symbol">;</span>
    <span class="sh_cbracket">}</span>

    <span class="sh_keyword">public</span> <span class="sh_type">void</span> <span class="sh_function">start</span><span class="sh_symbol">()</span> <span class="sh_cbracket">{</span>
        <span class="sh_function">printTitle</span><span class="sh_symbol">();</span>

        <span class="sh_comment">// more functionality</span>
    <span class="sh_cbracket">}</span>

    <span class="sh_keyword">private</span> <span class="sh_type">void</span> <span class="sh_function">printTitle</span><span class="sh_symbol">()</span> <span class="sh_cbracket">{</span>
        System<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">println</span><span class="sh_symbol">(</span><span class="sh_string">"***********"</span><span class="sh_symbol">);</span>
        System<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">println</span><span class="sh_symbol">(</span><span class="sh_string">"* LIBRARY *"</span><span class="sh_symbol">);</span>
        System<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">println</span><span class="sh_symbol">(</span><span class="sh_string">"***********"</span><span class="sh_symbol">);</span>
    <span class="sh_cbracket">}</span>
<span class="sh_cbracket">}</span>
    </pre>

    <p>The object constructor and <code>start</code> method of the above class <code>UserInterface</code> can be called from whatever program. The method <code>printTitle</code> and the variable <code>reader</code> can be used only inside their class.</p>

    <p>When we want to assign package visibility to a variable or a method, we do not need to use any prefix. We can modify the example above assigning package visibility to the method <code>printTitle</code>.</p>

    <pre class="sh_java sh_sourceCode"><span class="sh_preproc">package</span> library<span class="sh_symbol">.</span>ui<span class="sh_symbol">;</span>

<span class="sh_keyword">public</span> <span class="sh_keyword">class</span><span class="sh_normal"> </span><span class="sh_classname">UserInterface</span> <span class="sh_cbracket">{</span>
    <span class="sh_keyword">private</span> <span class="sh_usertype">Scanner</span><span class="sh_normal"> </span>reader<span class="sh_symbol">;</span>

    <span class="sh_keyword">public</span> <span class="sh_function">UserInterface</span><span class="sh_symbol">(</span><span class="sh_usertype">Scanner</span><span class="sh_normal"> </span>reader<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span>
        <span class="sh_keyword">this</span><span class="sh_symbol">.</span>reader <span class="sh_symbol">=</span> reader<span class="sh_symbol">;</span>
    <span class="sh_cbracket">}</span>

    <span class="sh_keyword">public</span> <span class="sh_type">void</span> <span class="sh_function">start</span><span class="sh_symbol">()</span> <span class="sh_cbracket">{</span>
        <span class="sh_function">printTitle</span><span class="sh_symbol">();</span>

        <span class="sh_comment">// more functionality</span>
    <span class="sh_cbracket">}</span>

    <span class="sh_type">void</span> <span class="sh_function">printTitle</span><span class="sh_symbol">()</span> <span class="sh_cbracket">{</span>
        System<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">println</span><span class="sh_symbol">(</span><span class="sh_string">"***********"</span><span class="sh_symbol">);</span>
        System<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">println</span><span class="sh_symbol">(</span><span class="sh_string">"* Library *"</span><span class="sh_symbol">);</span>
        System<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">println</span><span class="sh_symbol">(</span><span class="sh_string">"***********"</span><span class="sh_symbol">);</span>
    <span class="sh_cbracket">}</span>
<span class="sh_cbracket">}</span>
    </pre>

    <p>Now, the classes <em>inside the same package</em> can use the method <code>printTitle</code>.

    </p><pre class="sh_java sh_sourceCode"><span class="sh_preproc">package</span> library<span class="sh_symbol">.</span>ui<span class="sh_symbol">;</span>

<span class="sh_preproc">import</span> java<span class="sh_symbol">.</span>util<span class="sh_symbol">.</span>Scanner<span class="sh_symbol">;</span>

<span class="sh_keyword">public</span> <span class="sh_keyword">class</span><span class="sh_normal"> </span><span class="sh_classname">Main</span> <span class="sh_cbracket">{</span>

    <span class="sh_keyword">public</span> <span class="sh_keyword">static</span> <span class="sh_type">void</span> <span class="sh_function">main</span><span class="sh_symbol">(</span>String<span class="sh_symbol">[]</span> args<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span>
        <span class="sh_usertype">Scanner</span><span class="sh_normal"> </span>reader <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">Scanner</span><span class="sh_symbol">(</span>System<span class="sh_symbol">.</span>in<span class="sh_symbol">);</span>
        <span class="sh_usertype">UserInterface</span><span class="sh_normal"> </span>userInterface <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">UserInterface</span><span class="sh_symbol">(</span>reader<span class="sh_symbol">);</span>

        userInterface<span class="sh_symbol">.</span><span class="sh_function">printTitle</span><span class="sh_symbol">();</span> <span class="sh_comment">// it works!</span>
    <span class="sh_cbracket">}</span>
<span class="sh_cbracket">}</span>
    </pre>

    <p>If the class is in a different package, the method <code>printTitle</code> can't be used.</p>

    <pre class="sh_java sh_sourceCode"><span class="sh_preproc">package</span> library<span class="sh_symbol">;</span>

<span class="sh_preproc">import</span> java<span class="sh_symbol">.</span>util<span class="sh_symbol">.</span>Scanner<span class="sh_symbol">;</span>
<span class="sh_preproc">import</span> library<span class="sh_symbol">.</span>ui<span class="sh_symbol">.</span>UserInterface<span class="sh_symbol">;</span>

<span class="sh_keyword">public</span> <span class="sh_keyword">class</span><span class="sh_normal"> </span><span class="sh_classname">Main</span> <span class="sh_cbracket">{</span>

    <span class="sh_keyword">public</span> <span class="sh_keyword">static</span> <span class="sh_type">void</span> <span class="sh_function">main</span><span class="sh_symbol">(</span>String<span class="sh_symbol">[]</span> args<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span>
        <span class="sh_usertype">Scanner</span><span class="sh_normal"> </span>reader <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">Scanner</span><span class="sh_symbol">(</span>System<span class="sh_symbol">.</span>in<span class="sh_symbol">);</span>
        <span class="sh_usertype">UserInterface</span><span class="sh_normal"> </span>userInterface <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">UserInterface</span><span class="sh_symbol">(</span>reader<span class="sh_symbol">);</span>

        userInterface<span class="sh_symbol">.</span><span class="sh_function">printTitle</span><span class="sh_symbol">();</span> <span class="sh_comment">// it doesn't work  !</span>
    <span class="sh_cbracket">}</span>
<span class="sh_cbracket">}</span>
    </pre>

    <h2 id="45"> Many Interfaces, and Interface Flexibility</h2>

    <p>Last week we were introduced to interfaces. An interface defines one or more methods which have to be implemented in the class which implements the interface. The interfaces can be stored into packages like any other class. For instance, the interface <code>Identifiable</code> below is located in the package <code>application.domain</code>, and it defines that the classes which implement it have to implement the method <code>public String getID()</code>.</p>

    <pre class="sh_java sh_sourceCode"><span class="sh_preproc">package</span> application<span class="sh_symbol">.</span>domain<span class="sh_symbol">;</span>

<span class="sh_keyword">public</span> <span class="sh_keyword">interface</span><span class="sh_normal"> </span><span class="sh_classname">Identifiable</span> <span class="sh_cbracket">{</span>
    <span class="sh_usertype">String</span><span class="sh_normal"> </span><span class="sh_function">getID</span><span class="sh_symbol">();</span>
<span class="sh_cbracket">}</span>
    </pre>

    <p>The class makes use of the interface through the keyword <code>implements</code>. The class <code>Person</code>, which implements the <code>Idenfifiable</code> interface. The <code>getID</code>of Person class always returns the person ID.</p>

    <pre class="sh_java sh_sourceCode"><span class="sh_preproc">package</span> application<span class="sh_symbol">.</span>domain<span class="sh_symbol">;</span>

<span class="sh_keyword">public</span> <span class="sh_keyword">class</span><span class="sh_normal"> </span><span class="sh_classname">Person</span> <span class="sh_keyword">implements</span> Identifiable <span class="sh_cbracket">{</span>
    <span class="sh_keyword">private</span> <span class="sh_usertype">String</span><span class="sh_normal"> </span>name<span class="sh_symbol">;</span>
    <span class="sh_keyword">private</span> <span class="sh_usertype">String</span><span class="sh_normal"> </span>id<span class="sh_symbol">;</span>

    <span class="sh_keyword">public</span> <span class="sh_function">Person</span><span class="sh_symbol">(</span><span class="sh_usertype">String</span><span class="sh_normal"> </span>name<span class="sh_symbol">,</span> <span class="sh_usertype">String</span><span class="sh_normal"> </span>id<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span>
        <span class="sh_keyword">this</span><span class="sh_symbol">.</span>name <span class="sh_symbol">=</span> name<span class="sh_symbol">;</span>
        <span class="sh_keyword">this</span><span class="sh_symbol">.</span>id <span class="sh_symbol">=</span> id<span class="sh_symbol">;</span>
    <span class="sh_cbracket">}</span>

    <span class="sh_keyword">public</span> <span class="sh_usertype">String</span><span class="sh_normal"> </span><span class="sh_function">getName</span><span class="sh_symbol">()</span> <span class="sh_cbracket">{</span>
        <span class="sh_keyword">return</span> <span class="sh_keyword">this</span><span class="sh_symbol">.</span>name<span class="sh_symbol">;</span>
    <span class="sh_cbracket">}</span>

    <span class="sh_keyword">public</span> <span class="sh_usertype">String</span><span class="sh_normal"> </span><span class="sh_function">getPersonID</span><span class="sh_symbol">()</span> <span class="sh_cbracket">{</span>
        <span class="sh_keyword">return</span> <span class="sh_keyword">this</span><span class="sh_symbol">.</span>id<span class="sh_symbol">;</span>
    <span class="sh_cbracket">}</span>

    @Override
    <span class="sh_keyword">public</span> <span class="sh_usertype">String</span><span class="sh_normal"> </span><span class="sh_function">getID</span><span class="sh_symbol">()</span> <span class="sh_cbracket">{</span>
        <span class="sh_keyword">return</span> <span class="sh_function">getPersonID</span><span class="sh_symbol">();</span>
    <span class="sh_cbracket">}</span>

    @Override
    <span class="sh_keyword">public</span> <span class="sh_usertype">String</span><span class="sh_normal"> </span><span class="sh_function">toString</span><span class="sh_symbol">()</span><span class="sh_cbracket">{</span>
        <span class="sh_keyword">return</span> <span class="sh_keyword">this</span><span class="sh_symbol">.</span>name <span class="sh_symbol">+</span> <span class="sh_string">" ID: "</span> <span class="sh_symbol">+</span><span class="sh_keyword">this</span><span class="sh_symbol">.</span>id<span class="sh_symbol">;</span>
    <span class="sh_cbracket">}</span>
<span class="sh_cbracket">}</span>
    </pre>


    <p>An interface strength is that interfaces are also <em>types</em>. All the objects which are created from classes that implement an interface also have that interface's type. This effictively helps us to build our applications.</p>

    <p>We create the class <code>Register</code>, which we can use to search for people against their names. In addition to retrieve single people, <code>Register</code> provides a method to retrieve a list with all the people.</p>

    <pre class="sh_java sh_sourceCode"><span class="sh_keyword">public</span> <span class="sh_keyword">class</span><span class="sh_normal"> </span><span class="sh_classname">Register</span> <span class="sh_cbracket">{</span>
    <span class="sh_keyword">private</span> <span class="sh_usertype">HashMap&lt;String, Identifiable&gt;</span><span class="sh_normal"> </span>registered<span class="sh_symbol">;</span>

    <span class="sh_keyword">public</span> <span class="sh_function">Register</span><span class="sh_symbol">()</span> <span class="sh_cbracket">{</span>
        <span class="sh_keyword">this</span><span class="sh_symbol">.</span>registered <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> HashMap<span class="sh_symbol">&lt;</span>String<span class="sh_symbol">,</span> Identifiable<span class="sh_symbol">&gt;();</span>
    <span class="sh_cbracket">}</span>

    <span class="sh_keyword">public</span> <span class="sh_type">void</span> <span class="sh_function">add</span><span class="sh_symbol">(</span><span class="sh_usertype">Identifiable</span><span class="sh_normal"> </span>toBeAdded<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span>
        <span class="sh_keyword">this</span><span class="sh_symbol">.</span>registered<span class="sh_symbol">.</span><span class="sh_function">put</span><span class="sh_symbol">(</span>toBeAdded<span class="sh_symbol">.</span><span class="sh_function">getID</span><span class="sh_symbol">(),</span> toBeAdded<span class="sh_symbol">);</span>
    <span class="sh_cbracket">}</span>

    <span class="sh_keyword">public</span> <span class="sh_usertype">Identifiable</span><span class="sh_normal"> </span><span class="sh_function">get</span><span class="sh_symbol">(</span><span class="sh_usertype">String</span><span class="sh_normal"> </span>id<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span>
        <span class="sh_keyword">return</span> <span class="sh_keyword">this</span><span class="sh_symbol">.</span>registered<span class="sh_symbol">.</span><span class="sh_function">get</span><span class="sh_symbol">(</span>id<span class="sh_symbol">);</span>
    <span class="sh_cbracket">}</span>

    <span class="sh_keyword">public</span> <span class="sh_usertype">List&lt;Identifiable&gt;</span><span class="sh_normal"> </span><span class="sh_function">getAll</span><span class="sh_symbol">()</span> <span class="sh_cbracket">{</span>
        <span class="sh_keyword">return</span> <span class="sh_keyword">new</span> ArrayList<span class="sh_symbol">&lt;</span>Identifiable<span class="sh_symbol">&gt;(</span>registered<span class="sh_symbol">.</span><span class="sh_function">values</span><span class="sh_symbol">());</span>
    <span class="sh_cbracket">}</span>
<span class="sh_cbracket">}</span>
    </pre>

    <p>Using the register is easy.</p>

    <pre class="sh_java sh_sourceCode"><span class="sh_usertype">Register</span><span class="sh_normal"> </span>personnel <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">Register</span><span class="sh_symbol">();</span>
personnel<span class="sh_symbol">.</span><span class="sh_function">add</span><span class="sh_symbol">(</span> <span class="sh_keyword">new</span> <span class="sh_function">Person</span><span class="sh_symbol">(</span><span class="sh_string">"Pekka"</span><span class="sh_symbol">,</span> <span class="sh_string">"221078-123X"</span><span class="sh_symbol">)</span> <span class="sh_symbol">);</span>
personnel<span class="sh_symbol">.</span><span class="sh_function">add</span><span class="sh_symbol">(</span> <span class="sh_keyword">new</span> <span class="sh_function">Person</span><span class="sh_symbol">(</span><span class="sh_string">"Jukka"</span><span class="sh_symbol">,</span> <span class="sh_string">"110956-326B"</span><span class="sh_symbol">)</span> <span class="sh_symbol">);</span>

System<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">println</span><span class="sh_symbol">(</span> personnel<span class="sh_symbol">.</span><span class="sh_function">get</span><span class="sh_symbol">(</span><span class="sh_string">"280283-111A"</span><span class="sh_symbol">)</span> <span class="sh_symbol">);</span>

<span class="sh_usertype">Person</span><span class="sh_normal"> </span>found <span class="sh_symbol">=</span> <span class="sh_symbol">(</span>Person<span class="sh_symbol">)</span> personnel<span class="sh_symbol">.</span><span class="sh_function">get</span><span class="sh_symbol">(</span><span class="sh_string">"110956-326B"</span><span class="sh_symbol">);</span>
System<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">println</span><span class="sh_symbol">(</span> found<span class="sh_symbol">.</span><span class="sh_function">getName</span><span class="sh_symbol">()</span> <span class="sh_symbol">);</span>
    </pre>

    <p>Because the people are recorded in the register as <code>Identifiable</code>, we have to change back their type if we want to deal with people through those methods which are not defined in the interface. This is what happens in the last two lines.</p>

    <p>What about if we wanted an operation which returns the people recorded in our register sorted according to their ID?</p>

    <p>One class can implement various different interfaces, and our <code>Person</code> class can implement <code>Comparable</code> in addition to <code>Identifiable</code>. When we implement various different interfaces, we separate them with a comma (<code>public class ... implements <em>FirstInterface</em>, <em>SecondInterface</em> ...</code>). When we implement many interfaces, we have to implement all the methods required by all the interfaces. Below, we implement the interface <code>Comparable</code> in the class <code>Person</code>.</p>

    <pre class="sh_java sh_sourceCode"><span class="sh_preproc">package</span> application<span class="sh_symbol">.</span>domain<span class="sh_symbol">;</span>

<span class="sh_keyword">public</span> <span class="sh_keyword">class</span><span class="sh_normal"> </span><span class="sh_classname">Person</span> <span class="sh_keyword">implements</span> Identifiable<span class="sh_symbol">,</span> Comparable<span class="sh_symbol">&lt;</span>Person<span class="sh_symbol">&gt;</span> <span class="sh_cbracket">{</span>
    <span class="sh_keyword">private</span> <span class="sh_usertype">String</span><span class="sh_normal"> </span>name<span class="sh_symbol">;</span>
    <span class="sh_keyword">private</span> <span class="sh_usertype">String</span><span class="sh_normal"> </span>id<span class="sh_symbol">;</span>

    <span class="sh_keyword">public</span> <span class="sh_function">Person</span><span class="sh_symbol">(</span><span class="sh_usertype">String</span><span class="sh_normal"> </span>name<span class="sh_symbol">,</span> <span class="sh_usertype">String</span><span class="sh_normal"> </span>id<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span>
        <span class="sh_keyword">this</span><span class="sh_symbol">.</span>name <span class="sh_symbol">=</span> name<span class="sh_symbol">;</span>
        <span class="sh_keyword">this</span><span class="sh_symbol">.</span>id <span class="sh_symbol">=</span> id<span class="sh_symbol">;</span>
    <span class="sh_cbracket">}</span>

    <span class="sh_keyword">public</span> <span class="sh_usertype">String</span><span class="sh_normal"> </span><span class="sh_function">getName</span><span class="sh_symbol">()</span> <span class="sh_cbracket">{</span>
        <span class="sh_keyword">return</span> <span class="sh_keyword">this</span><span class="sh_symbol">.</span>name<span class="sh_symbol">;</span>
    <span class="sh_cbracket">}</span>

    <span class="sh_keyword">public</span> <span class="sh_usertype">String</span><span class="sh_normal"> </span><span class="sh_function">getPersonID</span><span class="sh_symbol">()</span> <span class="sh_cbracket">{</span>
        <span class="sh_keyword">return</span> <span class="sh_keyword">this</span><span class="sh_symbol">.</span>id<span class="sh_symbol">;</span>
    <span class="sh_cbracket">}</span>

    @Override
    <span class="sh_keyword">public</span> <span class="sh_usertype">String</span><span class="sh_normal"> </span><span class="sh_function">getID</span><span class="sh_symbol">()</span> <span class="sh_cbracket">{</span>
        <span class="sh_keyword">return</span> <span class="sh_function">getPersonID</span><span class="sh_symbol">();</span>
    <span class="sh_cbracket">}</span>

    @Override
    <span class="sh_keyword">public</span> <span class="sh_type">int</span> <span class="sh_function">compareTo</span><span class="sh_symbol">(</span><span class="sh_usertype">Person</span><span class="sh_normal"> </span>another<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span>
        <span class="sh_keyword">return</span> <span class="sh_keyword">this</span><span class="sh_symbol">.</span><span class="sh_function">getID</span><span class="sh_symbol">().</span><span class="sh_function">compareTo</span><span class="sh_symbol">(</span>another<span class="sh_symbol">.</span><span class="sh_function">getID</span><span class="sh_symbol">());</span>
    <span class="sh_cbracket">}</span>
<span class="sh_cbracket">}</span>
    </pre>

    <p>Now, we can add to the register method sortAndGetEverything:</p>

    <pre class="sh_java sh_sourceCode">    <span class="sh_keyword">public</span> <span class="sh_usertype">List&lt;Identifiable&gt;</span><span class="sh_normal"> </span><span class="sh_function">sortAndGetEverything</span><span class="sh_symbol">()</span> <span class="sh_cbracket">{</span>
        <span class="sh_usertype">ArrayList&lt;Identifiable&gt;</span><span class="sh_normal"> </span>all <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> ArrayList<span class="sh_symbol">&lt;</span>Identifiable<span class="sh_symbol">&gt;(</span>registered<span class="sh_symbol">.</span><span class="sh_function">values</span><span class="sh_symbol">());</span>
        Collections<span class="sh_symbol">.</span><span class="sh_function">sort</span><span class="sh_symbol">(</span>all<span class="sh_symbol">);</span>
        <span class="sh_keyword">return</span> all<span class="sh_symbol">;</span>
    <span class="sh_cbracket">}</span>
    </pre>

    <p>However, we notice that our solution does not work. Because the people are recorded into the register as if their type was <code>Identifiable</code>, Person has to implement the interface <code>Comparable&lt;Identifiable&gt;</code> so that our register could sort people with its method <code>Collections.sort()</code>. This means we have to modify Person's interface:</p>

    <pre class="sh_java sh_sourceCode"><span class="sh_keyword">public</span> <span class="sh_keyword">class</span><span class="sh_normal"> </span><span class="sh_classname">Person</span> <span class="sh_keyword">implements</span> Identifiable<span class="sh_symbol">,</span> Comparable<span class="sh_symbol">&lt;</span>Identifiable<span class="sh_symbol">&gt;</span> <span class="sh_cbracket">{</span>
    <span class="sh_comment">// ...</span>

    @Override
    <span class="sh_keyword">public</span> <span class="sh_type">int</span> <span class="sh_function">compareTo</span><span class="sh_symbol">(</span><span class="sh_usertype">Identifiable</span><span class="sh_normal"> </span>another<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span>
        <span class="sh_keyword">return</span> <span class="sh_keyword">this</span><span class="sh_symbol">.</span><span class="sh_function">getID</span><span class="sh_symbol">().</span><span class="sh_function">compareTo</span><span class="sh_symbol">(</span>another<span class="sh_symbol">.</span><span class="sh_function">getID</span><span class="sh_symbol">());</span>
    <span class="sh_cbracket">}</span>
<span class="sh_cbracket">}</span>
    </pre>

    <p>Now our solution works!</p>

    <p>Our Register is unaware of the real type of the objects we record. We can use the class Register to record objects of different types than Person, as long as the object class implements the interface <code>Identifiable</code>. For instance, below we use the register to manage shop sales:</p>

    <pre class="sh_java sh_sourceCode"><span class="sh_keyword">public</span> <span class="sh_keyword">class</span><span class="sh_normal"> </span><span class="sh_classname">Sale</span> <span class="sh_keyword">implements</span> Identifiable <span class="sh_cbracket">{</span>
    <span class="sh_keyword">private</span> <span class="sh_usertype">String</span><span class="sh_normal"> </span>name<span class="sh_symbol">;</span>
    <span class="sh_keyword">private</span> <span class="sh_usertype">String</span><span class="sh_normal"> </span>barcode<span class="sh_symbol">;</span>
    <span class="sh_keyword">private</span> <span class="sh_type">int</span> stockBalance<span class="sh_symbol">;</span>
    <span class="sh_keyword">private</span> <span class="sh_type">int</span> price<span class="sh_symbol">;</span>

    <span class="sh_keyword">public</span> <span class="sh_function">Sale</span><span class="sh_symbol">(</span><span class="sh_usertype">String</span><span class="sh_normal"> </span>name<span class="sh_symbol">,</span> <span class="sh_usertype">String</span><span class="sh_normal"> </span>barcode<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span>
        <span class="sh_keyword">this</span><span class="sh_symbol">.</span>name <span class="sh_symbol">=</span> name<span class="sh_symbol">;</span>
        <span class="sh_keyword">this</span><span class="sh_symbol">.</span>barcode <span class="sh_symbol">=</span> barcode<span class="sh_symbol">;</span>
    <span class="sh_cbracket">}</span>

    <span class="sh_keyword">public</span> <span class="sh_usertype">String</span><span class="sh_normal"> </span><span class="sh_function">getID</span><span class="sh_symbol">()</span> <span class="sh_cbracket">{</span>
        <span class="sh_keyword">return</span> barcode<span class="sh_symbol">;</span>
    <span class="sh_cbracket">}</span>

    <span class="sh_comment">// ...</span>
<span class="sh_cbracket">}</span>

<span class="sh_usertype">Register</span><span class="sh_normal"> </span>products <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">Register</span><span class="sh_symbol">();</span>
products<span class="sh_symbol">.</span><span class="sh_function">add</span><span class="sh_symbol">(</span> <span class="sh_keyword">new</span> <span class="sh_function">Product</span><span class="sh_symbol">(</span><span class="sh_string">"milk"</span><span class="sh_symbol">,</span> <span class="sh_string">"11111111"</span><span class="sh_symbol">)</span> <span class="sh_symbol">);</span>
products<span class="sh_symbol">.</span><span class="sh_function">add</span><span class="sh_symbol">(</span> <span class="sh_keyword">new</span> <span class="sh_function">Product</span><span class="sh_symbol">(</span><span class="sh_string">"yogurt"</span><span class="sh_symbol">,</span> <span class="sh_string">"11111112"</span><span class="sh_symbol">)</span> <span class="sh_symbol">);</span>
products<span class="sh_symbol">.</span><span class="sh_function">add</span><span class="sh_symbol">(</span> <span class="sh_keyword">new</span> <span class="sh_function">Product</span><span class="sh_symbol">(</span><span class="sh_string">"cheese"</span><span class="sh_symbol">,</span> <span class="sh_string">"11111113"</span><span class="sh_symbol">)</span> <span class="sh_symbol">);</span>

System<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">println</span><span class="sh_symbol">(</span> products<span class="sh_symbol">.</span><span class="sh_function">get</span><span class="sh_symbol">(</span><span class="sh_string">"99999999"</span><span class="sh_symbol">)</span> <span class="sh_symbol">);</span>

<span class="sh_usertype">Product</span><span class="sh_normal"> </span>product <span class="sh_symbol">=</span> <span class="sh_symbol">(</span>Product<span class="sh_symbol">)</span>products<span class="sh_symbol">.</span><span class="sh_function">get</span><span class="sh_symbol">(</span><span class="sh_string">"11111112"</span><span class="sh_symbol">);</span>
product<span class="sh_symbol">.</span><span class="sh_function">increaseStock</span><span class="sh_symbol">(</span><span class="sh_number">100</span><span class="sh_symbol">);</span>
product<span class="sh_symbol">.</span><span class="sh_function">changePrice</span><span class="sh_symbol">(</span><span class="sh_number">23</span><span class="sh_symbol">);</span>
    </pre>

    <p>The class <code>Register</code> is quite universal now that it is not dependent on concrete classes. Whatever class which implements <code>Identifiable</code> is compatible with Register. However, the method <code>sortAndGetEverything</code> can only work if we implement the interface Comparable&lt;Identifiable&gt;.</p>


    <!--
    <p>We create now the class <code>PersonRegister</code> which returns people using the interface <code>Identifiable</code>. In addition to retrieve individuals, <code>PersonRegister</code> provides a method to return a list with all the people.</p>

<pre class="sh_java">
public class PersonRegister {
    private HashMap&lt;String, Person&gt; people;

    public PersonRegister(HashMap&lt;String, Person&gt; people) {
        this.people = people;
    }

    public void addPerson(Person person) {
        this.people.put(person.getID(), person);
    }

    public void getPersonByID(Identifiable identifiable) {
        this.people.get(identifiable.getID());
    }

    public List&lt;Person&gt; getPerson() {
        return new ArrayList&lt;Person&gt;(people.values());
    }
}
</pre>

    <p>What about if we wanted to order our list in alphabetic order?</p>


    <p>One class can implement various different interfaces; in addition to <code>Identifiable</code> the class <code>Person</code> can implement the interface we saw last week, <code>Comparable</code>. We can implement different interfaces by separating their names with a comma (<code>public class ... implements <em>FirstInterface</em>, <em>SecondInterface</em> ...</code>). When we implement many interfaces, we also have to implement all the methods they require. In the following example, <code>Person</code> implements the interface <code>Comparable</code>.</p>

<pre class="sh_java">
package application.domain;

public class Person implements Identifiable, Comparable&lt;Person&gt; {
    private String name;
    private String id;

    public Person(String name, String id) {
        this.name = name;
        this.id = id;
    }

    public String getName() {
        return this.name;
    }

    public String getPersonID() {
        return this.id;
    }

    @Override
    public String getID() {
        return getPersonID();
    }

    @Override
    public int compareTo(Person another) {
        return this.name.compareTo(another.getName());
    }
}
</pre>

    <p>Now we can extend our the List method of PersonRegister in the following way:</p>

<pre class="sh_java">
    public List&lt;Person&gt; getPerson() {
        ArrayList&lt;Person&gt; people = new ArrayList&lt;Person&gt;(people.values());
        Collections.sort(people);
        return people;
    }
</pre>

-->
    <!--

    <h3>Check-out Example</h3>

    <p>In this section, we can reason about the product identification operations of a shop check-out. We can suppose that the products have a barcode, a name, and a price. A <code>Product</code> object implements the already defined interface <code>Identifiable</code>.</p>

<pre class="sh_java">
package application.domain;

public class Tuote implements Identifiable {
    private String barcode;
    private String name;
    private int price;

    public Tuote(String barcode, String name, int price) {
        this.barcode = barcode;
        this.name = name;
        this.price = price;
    }

    public String getName() {
        return this.name;
    }

    public int getPrice() {
        return this.price;
    }

    @Override
    public String getID() {
        return this.barcode;
    }
}
</pre>

    <p>Below, we implement <code>BarcodeReader</code> which reads objects and turns them into products. The barcode reader has to identify products thanks to the interface <code>Identifiable</code>. We can implement the class <code>BarcodeReader</code> so that it will include a HashMap, which retrieves products against their ID. The BarcodeReader is a part of our application logic, and we store it into the package <code>application.logic</code>.</p>

<pre class="sh_java">
package application.logic;

public class BarcodeReader {
    private HashMap&lt;String, Product&gt; products;

    public BarcodeReader(HashMap&lt;String, Product&gt; products) {
        this.products = products;
    }

    public Product identify(Identifiable identifiable) {
        return this.products.get(identifiable.getID());
    }
}
</pre>

    <p>A BarcodeReader object returns a <code>Product</code> object if the barcode is found in the BarcodeReader HashMap. In the following example, we create a check-out which uses the barcode reader to add products to the purchase list. The class has the method <code>public void buy</code> which is given an instance of <code>Identifiable</code> as parameter. The purchase adds to the purchase list the objects which are recognised by the barcode reader. If an object is not recognised, nothing happens. The method <code>printPurchases</code> prints the name of the purchased products.</p>

<pre class="sh_java">
package application.domain;

public class Cashout {
    private BarcodeReader reader;
    private List&lt;Product&gt; products;

    public Cashout(BarcodeReader barcodeReader) {
        this.reader = barcodeReader;
        this.products = new ArrayList&lt;Product&gt;();
    }

    public void buy(Identifiable identifiable) {
        Product identified = this.reader.identify(identifiable);
        if (identified == null) {
            return;
        }

        this.products.add(identified);
    }

    public void printPurchases() {
        for(Product product: this.products) {
            System.out.println(product.getName());
        }
    }
}
</pre>

    <p>At this point we notice that it is extremely unconvenient to read products if they are printed in succession according to when they were added. We modify the output so that it will list the products in aplphabetic order. We add the interface <code>Comparable</code> to <code>Product</code> to sort our products in alphabetic order.</p>

<pre class="sh_java">
package application.domain;

public class Product implements Identifiable, Comparable&lt;Product&gt; {
    private String barcode;
    private String name;
    private int price;

    public Tuote(String barcode, String name, int price) {
        this.barcode = barcode;
        this.name = name;
        this.price = price;
    }

    public String getName() {
        return this.name;
    }

    public int getPrice() {
        return this.price;
    }

    @Override
    public String getID() {
        return this.barcode;
    }

    @Override
    public int compareTo(Product product) {
        return this.name.compareTo(product.getName());
    }
}
</pre>

    <p>We can still modify our cashout implementation so that our products are sorted if need be. Notice that the products only have to be sorted when products <em>are purchased</em>. A purchase is possibly the only situation where the order of the products in the list can change. If we do so, the purchases are always sorted when we call the method <code>printPurchases</code>.</p>

<pre class="sh_java">
package application.domain;

public class Checkout {
    private BarcodeReder reader;
    private List&lt;Product&gt; products;

    public Kassa( BarcodeReder BarcodeReader) {
        this.reader = BarcodeReader;
        this.products = new ArrayList&lt;Product&gt;();
    }

    public void buy(Identifiable identifiable) {
        Tuote identified = this.reader.identify(identifiable);
        if (identified == null) {
            return;
        }

        this.products.add(identified);
        Collections.sort(this.products);
    }

    public void printPurchases() {
        for(Product product: this.products) {
            System.out.println(product.getName());
        }
    }
}
</pre>

-->

    <div>
      <big><big><b>NetBeans Tips</b></big></big>

      <ul><!-- TODO --><li>All NetBeans tips can be found <a href="http://mooc.fi/courses/general/programming/#netbeans-tips">here</a> </li>
        <p>

        </p><li> <b>Implement all abstract methods</b>

        <p>
        Let us suppose that your program contains the interface <code>Interface</code>, and you are building the class <code>Class</code> which implements the interface. It will be annoying to write the declaration raws of all the interface methods.
        </p>

        <p>However it is possible to ask NetBeans to fill in the method bodies automatically. When you have defined the interface a class should implement, i.e. when you have written</p>

        <pre class="sh_java sh_sourceCode"><span class="sh_keyword">public</span> <span class="sh_keyword">class</span><span class="sh_normal"> </span><span class="sh_classname">Class</span> <span class="sh_keyword">implements</span> Interface <span class="sh_cbracket">{</span>
<span class="sh_cbracket">}</span>
        </pre>

        <p>NetBeans paints the class name red. If you go to lamp icon on the left corner of the raw, click, and choose <em>Implement all abstract methods</em>, the method bodies will appear in your code!</p>

        </li>

        <li> <b>Clean and Build</b>

        <p>
        Sometimes, NetBeans may get confused and try to run a code version without noticing all the corrected changes made to it. Usually you notice it because something "strange" happens. Usually, you can fix the problem by using <em>Clean and build</em> operation. The operation is found in the Run menu, and you can execute it also by clicking on the <em>brush and hammer</em> symbol. Clean and build deletes the translated versions of the code and generates a new translation.
        </p>

        </li>
      </ul></div>

    <div class="tehtavat">
      <p class="heading" id="e18">Exercise 18: Moving</p>

        <p>Before moving, you pack your things and put them into boxes trying to keep the number of boxes needed as small as possible. In this exercise we simulate packing things into boxes. Each thing has a volume, and boxes have got a maximum capacity.</p>


        <h4>Exercise 18.1: Things and Items</h4>

        <p>The removers will later on move your things to a track (which is not implemented here); therefore, we first implement the interface <code>Thing</code>, which represents all things and boxes.</p>

        <p>The Thing interface has to determine the method <code>int getVolume()</code>, which is needed to understand the size of a thing. Implement the interface <code>Thing</code> in the package <code>moving.domain</code>.</p>

        <p>Next, implement the class <code>Item</code> in the package <code>moving.domain</code>. The class receives the item name (String) and volume (int) as parameter. The class has to implement the interface <code>Thing</code>.</p>

        <p>Add the method <code>public String getName()</code> to <code>Item</code>, and replace the method <code>public String toString()</code> so that it returns strings which follow the pattern "<code>name (volume dm^3)</code>". Item should now work like the following</p>

        <pre class="sh_java sh_sourceCode">    <span class="sh_usertype">Thing</span><span class="sh_normal"> </span>item <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">Item</span><span class="sh_symbol">(</span><span class="sh_string">"toothbrash"</span><span class="sh_symbol">,</span> <span class="sh_number">2</span><span class="sh_symbol">);</span>
    System<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">println</span><span class="sh_symbol">(</span>item<span class="sh_symbol">);</span>
        </pre>

        <pre>toothbrash (2 dm^3)
        </pre>

        <h4>Exercise 18.2: Comparable Item</h4>

        <p>When we pack our items into boxes, we want to start in order from the first items. Implement the interface <code>Comparable</code> in the class <code>Item</code>; the item <em>natural order</em> must be ascending against volume. When you have implemented the interface <code>Comparable</code>, the <code>sort</code> method of class <code>Collection</code> has to work in the following way:.</p>


        <pre class="sh_java sh_sourceCode">    <span class="sh_usertype">List&lt;Item&gt;</span><span class="sh_normal"> </span>items <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> ArrayList<span class="sh_symbol">&lt;</span>Item<span class="sh_symbol">&gt;();</span>
    items<span class="sh_symbol">.</span><span class="sh_function">add</span><span class="sh_symbol">(</span><span class="sh_keyword">new</span> <span class="sh_function">Item</span><span class="sh_symbol">(</span><span class="sh_string">"passport"</span><span class="sh_symbol">,</span> <span class="sh_number">2</span><span class="sh_symbol">));</span>
    items<span class="sh_symbol">.</span><span class="sh_function">add</span><span class="sh_symbol">(</span><span class="sh_keyword">new</span> <span class="sh_function">Item</span><span class="sh_symbol">(</span><span class="sh_string">"toothbrash"</span><span class="sh_symbol">,</span> <span class="sh_number">1</span><span class="sh_symbol">));</span>
    items<span class="sh_symbol">.</span><span class="sh_function">add</span><span class="sh_symbol">(</span><span class="sh_keyword">new</span> <span class="sh_function">Item</span><span class="sh_symbol">(</span><span class="sh_string">"circular saw"</span><span class="sh_symbol">,</span> <span class="sh_number">100</span><span class="sh_symbol">));</span>

    Collections<span class="sh_symbol">.</span><span class="sh_function">sort</span><span class="sh_symbol">(</span>items<span class="sh_symbol">);</span>
    System<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">println</span><span class="sh_symbol">(</span>items<span class="sh_symbol">);</span>
        </pre>

        <pre>[toothbrash (1 dm^3), passport (2 dm^3), circular saw (100 dm^3)]
        </pre>

        <h4>Exercise 18.3: Moving Box</h4>

        <p>Implement now the class <code>Box</code> in the package <code>moving.domain</code>. At first, implement the following method for your Box:</p>

        <p>
        </p><ul><li>the constructor <code>public Box(int maximumCapacity)</code></li> receives the box maximum capacity as parameter;<br><li>the method <code>public boolean addThing(Thing thing)</code></li> adds an item which implements the interface <code>Thing</code> to the box. If it does not fit in the box, the method returns <code>false</code>, otherwise <code>true</code>. The box must store the things into a list.<br></ul><p>Also, make your <code>Box</code> implement the <code>Thing</code> interface. The method <code>getVolume</code> has to return the current volume of the things inside the box.</p>

        <h4>Exercise 18.4: Packing Items</h4>

        <p>Implement the class <code>Packer</code> in the package <code>moving.logic</code>. The constructor of the class <code>Packer</code> is given the parameter <code>int boxesVolume</code>, which determines how big boxes the packer should use.</p>

        <p>Afterwards, implement the method <code>public List&lt;Box&gt; packThings(List&lt;Thing&gt; things)</code>, which packs things into boxes.</p>

        <p>The method should move all the things in the parameter list into boxes, and these boxes should be contained by the list the method returns. You don't need to pay attention to such situations where the things are bigger than the boxes used by the packer. The tests do not check the way the packer makes use of the moving boxes.</p>

        <p>The example below shows how our packer should work:</p>

        <pre class="sh_java sh_sourceCode">    <span class="sh_comment">// the things we want to pack</span>
    <span class="sh_usertype">List&lt;Thing&gt;</span><span class="sh_normal"> </span>things <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> ArrayList<span class="sh_symbol">&lt;</span>Thing<span class="sh_symbol">&gt;();</span>
    things<span class="sh_symbol">.</span><span class="sh_function">add</span><span class="sh_symbol">(</span><span class="sh_keyword">new</span> <span class="sh_function">Item</span><span class="sh_symbol">(</span><span class="sh_string">"passport"</span><span class="sh_symbol">,</span> <span class="sh_number">2</span><span class="sh_symbol">));</span>
    things<span class="sh_symbol">.</span><span class="sh_function">add</span><span class="sh_symbol">(</span><span class="sh_keyword">new</span> <span class="sh_function">Item</span><span class="sh_symbol">(</span><span class="sh_string">"toothbrash"</span><span class="sh_symbol">,</span> <span class="sh_number">1</span><span class="sh_symbol">));</span>
    things<span class="sh_symbol">.</span><span class="sh_function">add</span><span class="sh_symbol">(</span><span class="sh_keyword">new</span> <span class="sh_function">Item</span><span class="sh_symbol">(</span><span class="sh_string">"book"</span><span class="sh_symbol">,</span> <span class="sh_number">4</span><span class="sh_symbol">));</span>
    things<span class="sh_symbol">.</span><span class="sh_function">add</span><span class="sh_symbol">(</span><span class="sh_keyword">new</span> <span class="sh_function">Item</span><span class="sh_symbol">(</span><span class="sh_string">"circular saw"</span><span class="sh_symbol">,</span> <span class="sh_number">8</span><span class="sh_symbol">));</span>

    <span class="sh_comment">// we create a packer which uses boxes whose valume is 10</span>
    <span class="sh_usertype">Packer</span><span class="sh_normal"> </span>packer <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">Packer</span><span class="sh_symbol">(</span><span class="sh_number">10</span><span class="sh_symbol">);</span>

    <span class="sh_comment">// we ask our packer to pack things into boxes</span>
    <span class="sh_usertype">List&lt;Box&gt;</span><span class="sh_normal"> </span>boxes <span class="sh_symbol">=</span> packer<span class="sh_symbol">.</span><span class="sh_function">packThings</span><span class="sh_symbol">(</span> things <span class="sh_symbol">);</span>

    System<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">println</span><span class="sh_symbol">(</span><span class="sh_string">"number of boxes: "</span><span class="sh_symbol">+</span>boxes<span class="sh_symbol">.</span><span class="sh_function">size</span><span class="sh_symbol">());</span>

    <span class="sh_keyword">for</span> <span class="sh_symbol">(</span><span class="sh_usertype">Box</span><span class="sh_normal"> </span>box <span class="sh_symbol">:</span> boxes<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span>
        System<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">println</span><span class="sh_symbol">(</span><span class="sh_string">"  things in the box: "</span><span class="sh_symbol">+</span>box<span class="sh_symbol">.</span><span class="sh_function">getVolume</span><span class="sh_symbol">()+</span><span class="sh_string">" dm^3"</span><span class="sh_symbol">);</span>
    <span class="sh_cbracket">}</span>
        </pre>

        <p>Prints:</p>

        <pre>number of boxes: 2
  things in the box: 7 dm^3
  things in the box: 8 dm^3
        </pre>

        <p>The packer has packed the things into two boxes, the first box has the firts three things, whose total volume was 7, and the last thing in the list -- the circular saw, whose volume was 8 -- has gone to the third box. The tests do not set a limit to the number of boxes used by the packer; each thing could have been packed into a different box, and the output would have been:</p>

        <pre>number of boxes: 4
  things in the box: 2 dm^3
  things in the box: 1 dm^3
  things in the box: 4 dm^3
  things in the box: 8 dm^3
        </pre>

        <p><strong>Note:</strong> to help testing, it would be convinient to create a toString method for the class <code>Box</code>, for instance; this would help printing the content of the box.</p>

        <!--

  <h4>Tehokkaampi pakkaaminen</h4>

  <p>Alla on kuvattu eräs hieman tehokkaampi pakkaustapa <em>pseudokoodina</em>, eli ohjelmointikielen tapaisena koodina. Pseudokoodia käytetään muun muassa ohjelmointikieliriippumattomaan algoritmien eli ohjelmien kuvaamiseen.</p>

<pre>
pakkaaEsineet( esineet ):
    jarjesta( esineet )

    laatikot = [] // huom, kannattaa käyttää ArrayListiä

    while esineet is not empty:
        Muuttolaatikko pakattu = pakkaaLaatikko( esineet )
        laatikot.add( pakattu )

    return laatikot

pakkaaLaatikko( esineet ):
    Muuttolaatikko laatikko = new Muuttolaatikko

    lisaaSuuria( esineet, laatikko )
    lisaaPienia( esineet, laatikko )

    return laatikko

lisaaSuuria( esineet, laatikko ):
    while esineet is not empty:
        esine = suurin( esineet )

        if lisaa ( laatikko, esine ) == false:
            return

lisaaPienia(List esineet, Muuttolaatikko laatikko):
    while esineet is not empty:
        esine = pienin( esineet )

        if lisaa ( laatikko, esine ) == false:
            return
</pre>

  <p>Muokkaa luokkaa <code>Pakkaaja</code> siten, että se toimii samoin tai paremmin kuin yllä kuvattu lähestymistapa.</p>

  <p>Metodissa <code>pakkaaEsineet</code> pakataan muuttolaatikoita niin pitkään kun <code>esineet</code>-listalla on esineitä. Muuttolaatikkoa pakattaessa algoritmi lisää laukkuun ensiksi niin paljon suurimpia esineitä kuin laatikkoon mahtuu. Kun laatikkoon ei enää mahdu suurimpia esineitä, aletaan täyttämään sitä pienimmillä esineillä.</p>

  <p>Toteutuksesta: Kun esineesi ovat järjestyksessä, suurin tavara löytyy indeksistä <code>esinelistan koko - 1</code>, pienin tavara löytyy indeksistä <code>0</code>. Älä käytä tässä <code>Collections.min</code> ja <code>Collections.max</code>-metodeja, sillä ne eivät osaa arvata että <code>ArrayList</code>-lista on jo järjestyksessä.</p>

  <p>Poista esineitä <code>esineet</code>-listalta sitä mukaa kun niitä on lisätty muuttolaatikoihin. Sinun ei tarvitse varautua tilanteisiin joissa esineet ovat suurempia kuin muuttolaatikko.</p>

  <p><em>Huom!</em> Saadaksesi pisteen tästä viimeisestä tehtävästä algoritmisi tulee toimia <em>vähintään</em> yhtä hyvin kuin yllä kuvattu algoritmi. Hyvyydellä tarkoitetaan sitä, että pakkaukseen kulunut aika tulee olla vähintään yhtä pieni kuin pseudokoodiratkaisun. Muuttolaatikkojen määrän tulee myös olla vähintään yhtä pieni.</p>

  <p>Voit käyttää seuraavaa metodia satunnaisten esineiden luomiseen.</p>

<pre class="sh_java">
    public static List&lt;Esine&gt; luoEsineet(int kpl, int maxTilavuus) {
        Random rand = new Random();

        List&lt;Esine&gt; esineet = new ArrayList&lt;Esine&gt;();
        for (int i = 0; i &lt; kpl; i++) {
            esineet.add(new Esine("hammasharja", 1 + rand.nextInt(maxTilavuus)));
        }

        return esineet;
    }
</pre>

  <p>Yllä kuvatulla algoritmilla pakkaamisen pitäisi toimia nopeasti jopa 100000 esinettä sisältävillä listoilla. Voit testata pakkaajasi nopeutta esimerkiksi seuraavasti:</p>

<pre class="sh_java">
        List&lt;Esine&gt esineet = luoEsineet(100000, 10);
        Pakkaaja pakkaaja = new Pakkaaja(50);

        long start = System.nanoTime();
        List&lt;Muuttolaatikko&gt laatikot = pakkaaja.pakkaaEsineet(esineet);
        long kulunutAika = ((System.nanoTime() - start) / 1000000);

        System.out.println("Pakkaukseen kului " + kulunutAika + " ms.");
        System.out.println("Tarvittiin " + laatikot.size() + " laatikkoa.");
</pre>

-->
    </div>

    <h2 id="46"> Exceptions</h2>

    <p>Exceptions are such situations where the program executions is different from our expectations. For instance, the program may have called a method of a <em>null</em> reference, in which case the user is <em>thrown</em> a <code>NullPointerException</code>. If we try to retrieve a index outside a table, the user is thrown a <code>IndexOutOfBoundsException</code>. All of them are a type of <code>Exception</code>.</p>

    <p>We deal with exception using the block <code>try { } catch (Exception e) { }</code>. The code contained within the brackets which follows the keyword <code>try</code> can <em>possibly</em> go through an exception. The keyword the code within the brackets which follow the keyword <code>catch</code> defines what should happen when the try-code throws an exception. We also define the type of the exception we want to catch (<code>catch (Exception e)</code>).</p>

    <pre class="sh_java sh_sourceCode">    <span class="sh_keyword">try</span> <span class="sh_cbracket">{</span>
        <span class="sh_comment">// code which can throw an exception</span>
    <span class="sh_cbracket">}</span> <span class="sh_keyword">catch</span> <span class="sh_symbol">(</span><span class="sh_usertype">Exception</span><span class="sh_normal"> </span>e<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span>
        <span class="sh_comment">// code which is executed in case of exception</span>
    <span class="sh_cbracket">}</span>
    </pre>

    <p>The <code><a href="http://docs.oracle.com/javase/6/docs/api/java/lang/Integer.html#parseInt(java.lang.String)" target="_blank">parseInt</a></code> method of class <code>Integer</code> which turns a string into a number can throw a <code>NumberFormatException</code> if its string parameter cannot be turned into a number. Now we implement a program which tries to turn into a number a user input string.</p>

    <pre class="sh_java sh_sourceCode">    <span class="sh_usertype">Scanner</span><span class="sh_normal"> </span>reader <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">Scanner</span><span class="sh_symbol">(</span>System<span class="sh_symbol">.</span>in<span class="sh_symbol">);</span>
    System<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">print</span><span class="sh_symbol">(</span><span class="sh_string">"Write a number: "</span><span class="sh_symbol">);</span>

    <span class="sh_type">int</span> num <span class="sh_symbol">=</span> Integer<span class="sh_symbol">.</span><span class="sh_function">parseInt</span><span class="sh_symbol">(</span>reader<span class="sh_symbol">.</span><span class="sh_function">nextLine</span><span class="sh_symbol">());</span>
    </pre>

    <pre>Write a number: <font color="red">tatti</font>
<font color="red">Exception in thread "..." java.lang.NumberFormatException: For input string: "tatti"</font>
    </pre>

    <p>The program above throws an exception because the user digits an erroneous number. The program execution ends up with a malfunction, and it cannot continue. We add an exception management statement to our program. The call, which may throw an exception is written into the <code>try</code> block, and the action which takes place in case of exception is written into the <code>catch</code> block.</p>

    <pre class="sh_java sh_sourceCode">    <span class="sh_usertype">Scanner</span><span class="sh_normal"> </span>reader <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">Scanner</span><span class="sh_symbol">(</span>System<span class="sh_symbol">.</span>in<span class="sh_symbol">);</span>

    System<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">print</span><span class="sh_symbol">(</span><span class="sh_string">"Write a number: "</span><span class="sh_symbol">);</span>

    <span class="sh_keyword">try</span> <span class="sh_cbracket">{</span>
        <span class="sh_type">int</span> num <span class="sh_symbol">=</span> Integer<span class="sh_symbol">.</span><span class="sh_function">parseInt</span><span class="sh_symbol">(</span>reader<span class="sh_symbol">.</span><span class="sh_function">nextLine</span><span class="sh_symbol">());</span>
    <span class="sh_cbracket">}</span> <span class="sh_keyword">catch</span> <span class="sh_symbol">(</span><span class="sh_usertype">Exception</span><span class="sh_normal"> </span>e<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span>
        System<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">println</span><span class="sh_symbol">(</span><span class="sh_string">"You haven't written a proper number."</span><span class="sh_symbol">);</span>
    <span class="sh_cbracket">}</span>
    </pre>

    <pre>Write number: <font color="red">5</font>
    </pre>

    <pre>Write number: <font color="red">oh no!</font>
You haven't written a proper number.
    </pre>

    <p>In case of exception, we move from the chunk of code defined by the <code>try</code> keyword to the <code>catch</code> chunk. Let's see this by adding a print statement after the <code>Integer.parseInt</code> line in the <code>try</code> chunk.</p>

    <pre class="sh_java sh_sourceCode">    <span class="sh_usertype">Scanner</span><span class="sh_normal"> </span>reader <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">Scanner</span><span class="sh_symbol">(</span>System<span class="sh_symbol">.</span>in<span class="sh_symbol">);</span>

    System<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">print</span><span class="sh_symbol">(</span><span class="sh_string">"Write a number: "</span><span class="sh_symbol">);</span>

    <span class="sh_keyword">try</span> <span class="sh_cbracket">{</span>
        <span class="sh_type">int</span> num <span class="sh_symbol">=</span> Integer<span class="sh_symbol">.</span><span class="sh_function">parseInt</span><span class="sh_symbol">(</span>reader<span class="sh_symbol">.</span><span class="sh_function">nextLine</span><span class="sh_symbol">());</span>
        System<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">println</span><span class="sh_symbol">(</span><span class="sh_string">"Looks good!"</span><span class="sh_symbol">);</span>
    <span class="sh_cbracket">}</span> <span class="sh_keyword">catch</span> <span class="sh_symbol">(</span><span class="sh_usertype">Exception</span><span class="sh_normal"> </span>e<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span>
        System<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">println</span><span class="sh_symbol">(</span><span class="sh_string">"You haven't written a proper number."</span><span class="sh_symbol">);</span>
    <span class="sh_cbracket">}</span>
    </pre>


    <pre>Write a number: <font color="red">5</font>
Looks good!
    </pre>

    <pre>Write a number: <font color="red">I won't!</font>
you haven't written a proper number.
    </pre>

    <p>String <code>I won't!</code> is given as parameter to the method <code>Integer.parseInt</code>, which throws an exception if the String parameter can't be changed into a number. Note that the code in the <code>catch</code> chunk is executed <em>only</em> in case of exception -- otherwise the program do not arrive till there.</p>

    <p>Let's make something more useful out of our number translator: let's do a method which keeps on asking to type a number till the user does it. The user can return <em>only</em> if they have typed the right number.</p>

    <pre class="sh_java sh_sourceCode"><span class="sh_keyword">public</span> <span class="sh_type">int</span> <span class="sh_function">readNumber</span><span class="sh_symbol">(</span><span class="sh_usertype">Scanner</span><span class="sh_normal"> </span>reader<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span>
    <span class="sh_keyword">while</span> <span class="sh_symbol">(</span><span class="sh_keyword">true</span><span class="sh_symbol">)</span> <span class="sh_cbracket">{</span>
        System<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">print</span><span class="sh_symbol">(</span><span class="sh_string">"Write a number: "</span><span class="sh_symbol">);</span>

        <span class="sh_keyword">try</span> <span class="sh_cbracket">{</span>
            <span class="sh_type">int</span> num <span class="sh_symbol">=</span> Integer<span class="sh_symbol">.</span><span class="sh_function">parseInt</span><span class="sh_symbol">(</span>reader<span class="sh_symbol">.</span><span class="sh_function">nextLine</span><span class="sh_symbol">());</span>
            <span class="sh_keyword">return</span> num<span class="sh_symbol">;</span>
        <span class="sh_cbracket">}</span> <span class="sh_keyword">catch</span> <span class="sh_symbol">(</span><span class="sh_usertype">Exception</span><span class="sh_normal"> </span>e<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span>
            System<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">println</span><span class="sh_symbol">(</span><span class="sh_string">"You haven't written a proper number."</span><span class="sh_symbol">);</span>
        <span class="sh_cbracket">}</span>
    <span class="sh_cbracket">}</span>
<span class="sh_cbracket">}</span>
    </pre>

    <p>The method <code>readNumber</code> could work in the following way:</p>

    <pre>Write a number: <font color="red">I won't!</font>
You haven't written a proper number.
Write a number: <font color="red">Matti has a mushroom on his door.</font>
You haven't written a proper number.
Write a number: <font color="red">43</font>

    </pre>


    <h3>Throwing Exceptions</h3>

    <p>Methods and constructors can <em>throw</em> exceptions. So far, there are two kinds of exceptions which can be thrown. There are the ones which have to be handled, and the ones which don't have to be dealt with. When we have to handle the exceptions, we do it either in a <code>try-catch</code> chunk, or <em>throwing them from a <code>method</code></em>. </p>

  <p>In the clock exercise of Introduction to Programming, we explained that we can stop our program of one second, by calling the method <code>Thread.sleep(1000)</code>. The method may throw an exception, which we <em>must</em> deal with. In fact, we handle the exception using the <code>try-catch</code> sentence; in the following example we skip the exception, and we leave empty the <code>catch</code> chunk.</p>

  <pre class="sh_java sh_sourceCode">    <span class="sh_keyword">try</span> <span class="sh_cbracket">{</span>
        <span class="sh_comment">// we sleep for 1000 milliseconds</span>
        Thread<span class="sh_symbol">.</span><span class="sh_function">sleep</span><span class="sh_symbol">(</span><span class="sh_number">1000</span><span class="sh_symbol">);</span>
    <span class="sh_cbracket">}</span> <span class="sh_keyword">catch</span> <span class="sh_symbol">(</span><span class="sh_usertype">Exception</span><span class="sh_normal"> </span>e<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span>
        <span class="sh_comment">// In case of exception, we do not do anything.</span>
    <span class="sh_cbracket">}</span>
  </pre>

  <p>It is also possible to avoid handling the exceptions in a method, and <em>delegate the responsibility</em> to the method caller. We delegate the responsibility of a method by using the statement <code>throws Exception</code>.</p>

  <pre class="sh_java sh_sourceCode">    <span class="sh_keyword">public</span> <span class="sh_type">void</span> <span class="sh_function">sleep</span><span class="sh_symbol">(</span><span class="sh_type">int</span> sec<span class="sh_symbol">)</span> <strong><span class="sh_keyword">throws</span> Exception</strong> <span class="sh_cbracket">{</span>
        Thread<span class="sh_symbol">.</span><span class="sh_function">sleep</span><span class="sh_symbol">(</span>sec <span class="sh_symbol">*</span> <span class="sh_number">1000</span><span class="sh_symbol">);</span>   <span class="sh_comment">// now we don't need the try-catch block</span>
    <span class="sh_cbracket">}</span>
  </pre>

  <p>The <code>sleep</code> method is called in another method. Now, this other method can either handle the exception in a <code>try-catch</code> block or delegate the responsibility forward. Sometimes, we delegate the responsibility of handling an exception, till the very end, and even the <code>main</code> method delegates it:</p>
  <pre class="sh_java sh_sourceCode"><span class="sh_keyword">public</span> <span class="sh_keyword">class</span><span class="sh_normal"> </span><span class="sh_classname">Main</span> <span class="sh_cbracket">{</span>
   <span class="sh_keyword">public</span> <span class="sh_keyword">static</span> <span class="sh_type">void</span> <span class="sh_function">main</span><span class="sh_symbol">(</span>String<span class="sh_symbol">[]</span> args<span class="sh_symbol">)</span> <span class="sh_keyword">throws</span> Exception <span class="sh_cbracket">{</span>
       <span class="sh_comment">// ...</span>
   <span class="sh_cbracket">}</span>
<span class="sh_cbracket">}</span>
  </pre>

  <p>In such cases, the exception ends up in Java's virtual machine, which interrupts the program in case there is an error which causes the problem.</p>

  <p>There are some exceptions which the programmer does not always have to address, such as the <code>NumberFormatException</code> which is thrown by <code>Integer.parseInt</code>. Also the <code>RuntimeException</code>s do not always require to be addressed; next week we will go back to <em>why</em> variables can have more than one type.</p>

  <p>We can throw an exception ourself from the source code using the <code>throw</code> statement. For instance, if we want to throw an exception which was created in the class <code>NumberFormatException</code>, we could use the statement <code>throw new NumberFormatException()</code>.</p>

  <p>Another exception which hasn't got to be addressed is <code>IllegalArgumentException</code>. With <code>IllegalArgumentException</code> we know that a method or a constructor has received an <em>illegal</em> value as parameter. For instance, we use the IllegalArgumentException when we want to make sure that a parameter has received particular values. We create the class <code>Grade</code> whose constructor has a integer parameter: the grade.</p>

  <pre class="sh_java sh_sourceCode"><span class="sh_keyword">public</span> <span class="sh_keyword">class</span><span class="sh_normal"> </span><span class="sh_classname">Grade</span> <span class="sh_cbracket">{</span>
    <span class="sh_keyword">private</span> <span class="sh_type">int</span> grade<span class="sh_symbol">;</span>

    <span class="sh_keyword">public</span> <span class="sh_function">Grade</span><span class="sh_symbol">(</span><span class="sh_type">int</span> grade<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span>
        <span class="sh_keyword">this</span><span class="sh_symbol">.</span>grade <span class="sh_symbol">=</span> grade<span class="sh_symbol">;</span>
    <span class="sh_cbracket">}</span>

    <span class="sh_keyword">public</span> <span class="sh_type">int</span> <span class="sh_function">getGrade</span><span class="sh_symbol">()</span> <span class="sh_cbracket">{</span>
        <span class="sh_keyword">return</span> <span class="sh_keyword">this</span><span class="sh_symbol">.</span>grade<span class="sh_symbol">;</span>
    <span class="sh_cbracket">}</span>
<span class="sh_cbracket">}</span>
  </pre>

  <p>Next, we want to validate the value of the constructor parameter of our Grade class. The grades in Finland are from 0 to 5. If the grade is something else, we want to <em>throw an exception</em>. We can add an if statement to our <code>Grade</code> class constructor, which checks whether the grade is outside range 0-5. If so, we throw an <code>IllegalArgumentException</code> telling <code>throw new IllegalArgumentException("The grade has to be between 0-5");</code>.</p>

  <pre class="sh_java sh_sourceCode"><span class="sh_keyword">public</span> <span class="sh_keyword">class</span><span class="sh_normal"> </span><span class="sh_classname">Grade</span> <span class="sh_cbracket">{</span>
    <span class="sh_keyword">private</span> <span class="sh_type">int</span> grade<span class="sh_symbol">;</span>

    <span class="sh_keyword">public</span> <span class="sh_function">Grade</span><span class="sh_symbol">(</span><span class="sh_type">int</span> grade<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span>
        <span class="sh_keyword">if</span> <span class="sh_symbol">(</span>grade <span class="sh_symbol">&lt;</span> <span class="sh_number">0</span> <span class="sh_symbol">||</span> grade <span class="sh_symbol">&gt;</span> <span class="sh_number">5</span><span class="sh_symbol">)</span> <span class="sh_cbracket">{</span>
            <span class="sh_keyword">throw</span> <span class="sh_keyword">new</span> <span class="sh_function">IllegalArgumentException</span><span class="sh_symbol">(</span><span class="sh_string">"The grade has to be between 0-5"</span><span class="sh_symbol">);</span>
        <span class="sh_cbracket">}</span>
        <span class="sh_keyword">this</span><span class="sh_symbol">.</span>grade <span class="sh_symbol">=</span> grade<span class="sh_symbol">;</span>
    <span class="sh_cbracket">}</span>

    <span class="sh_keyword">public</span> <span class="sh_type">int</span> <span class="sh_function">getGrade</span><span class="sh_symbol">()</span> <span class="sh_cbracket">{</span>
        <span class="sh_keyword">return</span> <span class="sh_keyword">this</span><span class="sh_symbol">.</span>grade<span class="sh_symbol">;</span>
    <span class="sh_cbracket">}</span>
<span class="sh_cbracket">}</span>
  </pre>

  <pre class="sh_java sh_sourceCode">    <span class="sh_usertype">Grade</span><span class="sh_normal"> </span>grade <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">Grade</span><span class="sh_symbol">(</span><span class="sh_number">3</span><span class="sh_symbol">);</span>
    System<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">println</span><span class="sh_symbol">(</span>grade<span class="sh_symbol">.</span><span class="sh_function">getGrade</span><span class="sh_symbol">());</span>

    <span class="sh_usertype">Grade</span><span class="sh_normal"> </span>wrongGrade <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">Grade</span><span class="sh_symbol">(</span><span class="sh_number">22</span><span class="sh_symbol">);</span>
    <span class="sh_comment">// it causes an exception, we don't continue</span>
  </pre>

  <pre>3
Exception in thread "..." java.lang.IllegalArgumentException: The grade has to be between 0-5
  </pre>


  <div class="tehtavat">
    <p class="heading" id="e19">Exercise 19: Method Argument Validation</p>

      <p>Let's train method argument validation with the help of the <code>IllegalArgumentException</code>. The excercise layout shows two classes <code>Person</code> and <code>Calculator</code>. Change the class in the following way:</p>

      <h4>Exercise 19.1: Person Validation</h4>

      <p>The constructor of <code>Person</code> has to make sure its parameter's Name variable is not null, empty, or longer than 40 characters. The age has also to be between 0-120. If one of the conditions above are not satisfied, the constructor has to throw an <code>IllegalArgumentException</code>.</p>

      <h4>Exercise 19.2: Calculator Validation</h4>

      <p>The <code>Calculator</code> methods have to be changed in the following way: the method <code>multiplication</code> has to work only if its parameter is not negative (greater than or equal to 0). The method <code>binomialCoefficient</code> has to work only if the parameters are not negative and the size of a subset is smaller than the set's size. If one of the methods receives invalid arguments when they are called, they have to throw a <code>IllegalArgumentException</code>.</p>
    <p class="heading" id="e20">Exercise 20: Sensors and Temperature Measurement</p>

      <p>All the code in our application has to be placed into the package <code>application</code>.</p>

      <p>We have got the following interface available for our use:</p>

      <pre class="sh_java sh_sourceCode"><span class="sh_keyword">public</span> <span class="sh_keyword">interface</span><span class="sh_normal"> </span><span class="sh_classname">Sensor</span> <span class="sh_cbracket">{</span>
    <span class="sh_type">boolean</span> <span class="sh_function">isOn</span><span class="sh_symbol">();</span>  <span class="sh_comment">// returns true if the sensor is on</span>
    <span class="sh_type">void</span> <span class="sh_function">on</span><span class="sh_symbol">();</span>       <span class="sh_comment">// switches the sensor on</span>
    <span class="sh_type">void</span> <span class="sh_function">off</span><span class="sh_symbol">();</span>      <span class="sh_comment">// switches the sensor off</span>
    <span class="sh_type">int</span> <span class="sh_function">measure</span><span class="sh_symbol">();</span>   <span class="sh_comment">// returns the sensor reading if the sensor is on</span>
                     <span class="sh_comment">// if the sensor is off, it throws an IllegalStateException</span>
<span class="sh_cbracket">}</span>
      </pre>

      <h4>Exercise 20.1: Constant Sensor</h4>

      <p>Create the class <code>Constant Sensor</code> which implements the interface <code>Sensor</code>.</p>

      <p>The constant sensor is online all the time. The methods on() and off() do not do anything. The constant sensor has a constructor with an int parameter. The <code>measure</code> method call returns the number received as constructor parameter.</p>

      <p>For instance:</p>

      <pre class="sh_java sh_sourceCode"><span class="sh_keyword">public</span> <span class="sh_keyword">static</span> <span class="sh_type">void</span> <span class="sh_function">main</span><span class="sh_symbol">(</span>String<span class="sh_symbol">[]</span> args<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span>
  <span class="sh_usertype">ConstantSensor</span><span class="sh_normal"> </span>ten <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">ConstantSensor</span><span class="sh_symbol">(</span><span class="sh_number">10</span><span class="sh_symbol">);</span>
  <span class="sh_usertype">ConstantSensor</span><span class="sh_normal"> </span>minusFive <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">ConstantSensor</span><span class="sh_symbol">(-</span><span class="sh_number">5</span><span class="sh_symbol">);</span>

  System<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">println</span><span class="sh_symbol">(</span> ten<span class="sh_symbol">.</span><span class="sh_function">measure</span><span class="sh_symbol">()</span> <span class="sh_symbol">);</span>
  System<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">println</span><span class="sh_symbol">(</span> minusFive<span class="sh_symbol">.</span><span class="sh_function">measure</span><span class="sh_symbol">()</span> <span class="sh_symbol">);</span>

  System<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">println</span><span class="sh_symbol">(</span> ten<span class="sh_symbol">.</span><span class="sh_function">isOn</span><span class="sh_symbol">()</span> <span class="sh_symbol">);</span>
  ten<span class="sh_symbol">.</span><span class="sh_function">off</span><span class="sh_symbol">();</span>
  System<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">println</span><span class="sh_symbol">(</span> ten<span class="sh_symbol">.</span><span class="sh_function">isOn</span><span class="sh_symbol">()</span> <span class="sh_symbol">);</span>
<span class="sh_cbracket">}</span>
      </pre>

      <p>Prints:</p>

      <pre>10
-5
true
true
      </pre>

      <h4>Exercise 20.2: Thermometer</h4>

      <p>Create the class <code>Thermometer</code> which implements the interface <code>Sensor</code>.</p>

      <p>At first, the thermometer is off. When the <code>measure</code> method is called, if the thermometer is on it returns a random number between -30 and 30. If the thermometer is off, it throws an <code>IllegalStateException</code>.
  </p>

  <h4>Exercise 20.3: AverageSensor</h4>

  <p>Create the class <code>AverageSensor</code> which implements the interface <code>Sensor</code>.</p>

<p>An average sensor contains many sensors. In addition to the methods defined by the interface <code>Sensor</code>, the class has the method <code>public void addSensor(Sensor additional)</code> which adds a new sensor to the AverageSensor.</p>

<p>The average sensor is on when <em>all</em> its sensors are on. When the average sensor is switched on, all its sensors have to be switched on if they were not on already. When the average sensor is closed, at least one of its sensors has to be switched off. It's also possible that all its sensors are switched off.</p>

<p>The <code>measure</code> method of our AverageSensor returns the average of the readings of all its sensors (because the return value is <code>int</code>, the readings are rounded down as it is for integer division). If the <code>measure</code> method is called when the average sensor is off, or if the average sensor was not added any sensor, the method throws an <code>IllegalStateException</code>.
</p>

<p>Below, you find an example of a sensor program (note that both the Thermometer and the AverageSensor constructors are without parameter):</p>

<pre class="sh_java sh_sourceCode"><span class="sh_keyword">public</span> <span class="sh_keyword">static</span> <span class="sh_type">void</span> <span class="sh_function">main</span><span class="sh_symbol">(</span>String<span class="sh_symbol">[]</span> args<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span>
    <span class="sh_usertype">Sensor</span><span class="sh_normal"> </span>kumpula <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">Thermometer</span><span class="sh_symbol">();</span>
    kumpula<span class="sh_symbol">.</span><span class="sh_function">on</span><span class="sh_symbol">();</span>
    System<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">println</span><span class="sh_symbol">(</span><span class="sh_string">"the temperature in Kumpula is "</span><span class="sh_symbol">+</span>kumpula<span class="sh_symbol">.</span><span class="sh_function">measure</span><span class="sh_symbol">()</span> <span class="sh_symbol">+</span> <span class="sh_string">" degrees"</span><span class="sh_symbol">);</span>

    <span class="sh_usertype">Sensor</span><span class="sh_normal"> </span>kaisaniemi <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">Thermometer</span><span class="sh_symbol">();</span>
    <span class="sh_usertype">Sensor</span><span class="sh_normal"> </span>helsinkiVantaa <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">Thermometer</span><span class="sh_symbol">();</span>

    <span class="sh_usertype">AverageSensor</span><span class="sh_normal"> </span>helsinkiArea <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">AverageSensor</span><span class="sh_symbol">();</span>
    helsinkiArea<span class="sh_symbol">.</span><span class="sh_function">addSensor</span><span class="sh_symbol">(</span>kumpula<span class="sh_symbol">);</span>
    helsinkiArea<span class="sh_symbol">.</span><span class="sh_function">addSensor</span><span class="sh_symbol">(</span>kaisaniemi<span class="sh_symbol">);</span>
    helsinkiArea<span class="sh_symbol">.</span><span class="sh_function">addSensor</span><span class="sh_symbol">(</span>helsinkiVantaa<span class="sh_symbol">);</span>

    helsinkiArea<span class="sh_symbol">.</span><span class="sh_function">on</span><span class="sh_symbol">();</span>
    System<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">println</span><span class="sh_symbol">(</span><span class="sh_string">"the temperature in Helsinki area is "</span><span class="sh_symbol">+</span>helsinkiArea<span class="sh_symbol">.</span><span class="sh_function">measure</span><span class="sh_symbol">()</span> <span class="sh_symbol">+</span> <span class="sh_string">" degrees"</span><span class="sh_symbol">);</span>
<span class="sh_cbracket">}</span>
</pre>

<p>Prints (the printed readings depend on the random temperature readings):</p>

<pre class="sh_java sh_sourceCode">the temperature in <span class="sh_usertype">Kumpula</span><span class="sh_normal"> </span>is <span class="sh_symbol">-</span><span class="sh_number">7</span> degrees
the temperature in Helsinki <span class="sh_usertype">area</span><span class="sh_normal"> </span>is <span class="sh_symbol">-</span><span class="sh_number">10</span> degrees
</pre>

<p><b>Note:</b> you'd better use a ConstantSensor object to test your average sensor!</p>

<h4>Exercise 20.4: All Readings</h4>

<p>Add the method <code>public List&lt;Integer&gt; readings()</code> to your AverageSensor; it returns a list of the reading results of all the measurements executed through your AverageSensor. Below is an example of how the method works: </p>

<pre class="sh_java sh_sourceCode"><span class="sh_keyword">public</span> <span class="sh_keyword">static</span> <span class="sh_type">void</span> <span class="sh_function">main</span><span class="sh_symbol">(</span>String<span class="sh_symbol">[]</span> args<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span>
    <span class="sh_usertype">Sensor</span><span class="sh_normal"> </span>kumpula <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">Thermometer</span><span class="sh_symbol">();</span>
    <span class="sh_usertype">Sensor</span><span class="sh_normal"> </span>kaisaniemi <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">Thermometer</span><span class="sh_symbol">();</span>
    <span class="sh_usertype">Sensor</span><span class="sh_normal"> </span>helsinkiVantaa <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">Thermometer</span><span class="sh_symbol">();</span>

    <span class="sh_usertype">AverageSensor</span><span class="sh_normal"> </span>helsinkiArea <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">AverageSensor</span><span class="sh_symbol">();</span>
    helsinkiArea<span class="sh_symbol">.</span><span class="sh_function">addSensor</span><span class="sh_symbol">(</span>kumpula<span class="sh_symbol">);</span>
    helsinkiArea<span class="sh_symbol">.</span><span class="sh_function">addSensor</span><span class="sh_symbol">(</span>kaisaniemi<span class="sh_symbol">);</span>
    helsinkiArea<span class="sh_symbol">.</span><span class="sh_function">addSensor</span><span class="sh_symbol">(</span>helsinkiVantaa<span class="sh_symbol">);</span>

    helsinkiArea<span class="sh_symbol">.</span><span class="sh_function">on</span><span class="sh_symbol">();</span>
    System<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">println</span><span class="sh_symbol">(</span><span class="sh_string">"the temperature in Helsinki area is "</span><span class="sh_symbol">+</span>helsinkiArea<span class="sh_symbol">.</span><span class="sh_function">measure</span><span class="sh_symbol">()</span> <span class="sh_symbol">+</span> <span class="sh_string">" degrees"</span><span class="sh_symbol">);</span>
    System<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">println</span><span class="sh_symbol">(</span><span class="sh_string">"the temperature in Helsinki area is "</span><span class="sh_symbol">+</span>helsinkiArea<span class="sh_symbol">.</span><span class="sh_function">measure</span><span class="sh_symbol">()</span> <span class="sh_symbol">+</span> <span class="sh_string">" degrees"</span><span class="sh_symbol">);</span>
    System<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">println</span><span class="sh_symbol">(</span><span class="sh_string">"the temperature in Helsinki area is "</span><span class="sh_symbol">+</span>helsinkiArea<span class="sh_symbol">.</span><span class="sh_function">measure</span><span class="sh_symbol">()</span> <span class="sh_symbol">+</span> <span class="sh_string">" degrees"</span><span class="sh_symbol">);</span>

    System<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">println</span><span class="sh_symbol">(</span><span class="sh_string">"readings: "</span><span class="sh_symbol">+</span>helsinkiArea<span class="sh_symbol">.</span><span class="sh_function">readings</span><span class="sh_symbol">());</span>
<span class="sh_cbracket">}</span>
</pre>

<p>Prints (again, the printed readings depend on the random temperature readings):</p>

<pre class="sh_java sh_sourceCode">the temperature in Helsinki <span class="sh_usertype">area</span><span class="sh_normal"> </span>is <span class="sh_symbol">-</span><span class="sh_number">10</span> degrees
the temperature in Helsinki <span class="sh_usertype">area</span><span class="sh_normal"> </span>is <span class="sh_symbol">-</span><span class="sh_number">4</span> degrees
the temperature in Helsinki <span class="sh_usertype">area</span><span class="sh_normal"> </span>is <span class="sh_symbol">-</span><span class="sh_number">5</span> degrees

readings<span class="sh_symbol">:</span> <span class="sh_symbol">[-</span><span class="sh_number">10</span><span class="sh_symbol">,</span> <span class="sh_symbol">-</span><span class="sh_number">4</span><span class="sh_symbol">,</span> <span class="sh_number">5</span><span class="sh_symbol">]</span>
</pre>

</div>




<h3> Exceptions and Interfaces</h3>

    <p>Interfaces do not have a method body, but the method definition can be freely chosen when the developer implements the interface. Interfaces can also define the exceptions throw. For instance, the classes which implement the following <code>FileServer</code> can <em>possibly</em> throw an exception in their methods <code>download</code> and <code>save</code>.</p>

<pre class="sh_java sh_sourceCode"><span class="sh_keyword">public</span> <span class="sh_keyword">interface</span><span class="sh_normal"> </span><span class="sh_classname">FileServer</span> <span class="sh_cbracket">{</span>
    <span class="sh_usertype">String</span><span class="sh_normal"> </span><span class="sh_function">download</span><span class="sh_symbol">(</span><span class="sh_usertype">String</span><span class="sh_normal"> </span>file<span class="sh_symbol">)</span> <span class="sh_keyword">throws</span> Exception<span class="sh_symbol">;</span>
    <span class="sh_type">void</span> <span class="sh_function">save</span><span class="sh_symbol">(</span><span class="sh_usertype">String</span><span class="sh_normal"> </span>file<span class="sh_symbol">,</span> <span class="sh_usertype">String</span><span class="sh_normal"> </span>string<span class="sh_symbol">)</span> <span class="sh_keyword">throws</span> Exception<span class="sh_symbol">;</span>
<span class="sh_cbracket">}</span>
</pre>

    <p>If an interface defines the <code>throws Exception</code> attributes for the methods -- i.e. the methods may throw an exception -- the classes which implement the interface must be defined in the same way. However, they do not have to throw an exception, as it becomes clear in the following example.</p>

<pre class="sh_java sh_sourceCode"><span class="sh_keyword">public</span> <span class="sh_keyword">class</span><span class="sh_normal"> </span><span class="sh_classname">TextServer</span> <span class="sh_keyword">implements</span> FileServer <span class="sh_cbracket">{</span>

    <span class="sh_keyword">private</span> <span class="sh_usertype">Map&lt;String, String&gt;</span><span class="sh_normal"> </span>data<span class="sh_symbol">;</span>

    <span class="sh_keyword">public</span> <span class="sh_function">TextServer</span><span class="sh_symbol">()</span> <span class="sh_cbracket">{</span>
        <span class="sh_keyword">this</span><span class="sh_symbol">.</span>data <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> HashMap<span class="sh_symbol">&lt;</span>String<span class="sh_symbol">,</span> String<span class="sh_symbol">&gt;();</span>
    <span class="sh_cbracket">}</span>

    @Override
    <span class="sh_keyword">public</span> <span class="sh_usertype">String</span><span class="sh_normal"> </span><span class="sh_function">download</span><span class="sh_symbol">(</span><span class="sh_usertype">String</span><span class="sh_normal"> </span>file<span class="sh_symbol">)</span> <span class="sh_keyword">throws</span> Exception <span class="sh_cbracket">{</span>
        <span class="sh_keyword">return</span> <span class="sh_keyword">this</span><span class="sh_symbol">.</span>data<span class="sh_symbol">.</span><span class="sh_function">get</span><span class="sh_symbol">(</span>file<span class="sh_symbol">);</span>
    <span class="sh_cbracket">}</span>

    @Override
    <span class="sh_keyword">public</span> <span class="sh_type">void</span> <span class="sh_function">save</span><span class="sh_symbol">(</span><span class="sh_usertype">String</span><span class="sh_normal"> </span>file<span class="sh_symbol">,</span> <span class="sh_usertype">String</span><span class="sh_normal"> </span>string<span class="sh_symbol">)</span> <span class="sh_keyword">throws</span> Exception <span class="sh_cbracket">{</span>
        <span class="sh_keyword">this</span><span class="sh_symbol">.</span>data<span class="sh_symbol">.</span><span class="sh_function">put</span><span class="sh_symbol">(</span>file<span class="sh_symbol">,</span> stirng<span class="sh_symbol">);</span>
    <span class="sh_cbracket">}</span>
<span class="sh_cbracket">}</span>
</pre>

<h3> The Exception Information</h3>

    <p>The <code>catch</code> block tells how we handle an exception, and it tells us what exception we should be prepared for: <code>catch (<em>Exception e</em>)</code>. The exception information is saved into the <code>e</code> variable.</p>

<pre class="sh_java sh_sourceCode">    <span class="sh_keyword">try</span> <span class="sh_cbracket">{</span>
        <span class="sh_comment">// the code, which may throw an exception</span>
    <span class="sh_cbracket">}</span> <span class="sh_keyword">catch</span> <span class="sh_symbol">(</span><span class="sh_usertype">Exception</span><span class="sh_normal"> </span>e<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span>
        <span class="sh_comment">// the exception information is saved into the variable e</span>
    <span class="sh_cbracket">}</span>
</pre>

    <p>The class <code>Exception</code> can provide useful methods. For instance, the method <code>printStackTrace()</code> prints a <em>path</em> which tells us where the exception came from. Let's check the following error printed by the method <code>printStackTrace()</code>.</p>

<pre>Exception in thread "main" java.lang.NullPointerException
  at package.Class.print(Class.java:43)
  at package.Class.main(Class.java:29)
</pre>

    <p>Reading the stack trace happens button up. The lowest is the first call, i.e. the program execution has started from the <code>main()</code> method of class <code>Class</code>. At line 29 of the main method of <code>Class</code>, we called the method <code>print()</code>. Line 43 of the method <code>print</code> caused a <code>NullPointerException</code>. Exception information are extremely important to find out the origin of a problem.</p>


<h2 id="47"> Reading a File</h2>

    <p>A relevant part of programming is related to stored files, in one way or in another. Let's take the first steps in Java file handling. Java's API provides the class <a href="http://docs.oracle.com/javase/6/docs/api/java/io/File.html" target="_blank">File</a>, whose contents can be read using the already known <a href="http://docs.oracle.com/javase/6/docs/api/java/util/Scanner.html" target="_blank">Scanner</a> class.</p>

    <p>If we read the desciption of the <code>File</code> <a href="http://docs.oracle.com/javase/6/docs/api/java/io/File.html" target="_blank">API</a> we notice the <code>File</code> class has the constructor <code>File(String pathname)</code>, which <em>creates a new File instance by converting the given pathname string into an abstract pathname</em>. This means the <code>File</code> class constructor can be given the pathname of the file we want to open.</p>

    <p><em>In the NetBeans programming environment, files have got their own tab called <em>Files</em>, which contains all our project files. If we add a file to a project <em>root</em> -- that is to say outside all folders -- we can refer to it by writing only the its name. We create a file object by fiving the file pathname to it as parameter:</em></p>

<pre class="sh_java sh_sourceCode">    <span class="sh_usertype">File</span><span class="sh_normal"> </span>file <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">File</span><span class="sh_symbol">(</span><span class="sh_string">"file-name.txt"</span><span class="sh_symbol">);</span>
</pre>

    <p><code>System.in</code> input stream is not the only reading source we can give to the constructor of a Scanner class. For instance, the reading source can be a file, in addition to the user keyboard. Scanner provides the same methods to read a keyboard input and a file. In the following example, we open a file and we print all the text contained in the file using the <code>System.out.println</code> statement. At the end, we close the file using the statement <code>close</code>.</p>

<pre class="sh_java sh_sourceCode">        <span class="sh_comment">// The file we read</span>
        <span class="sh_usertype">File</span><span class="sh_normal"> </span>file <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">File</span><span class="sh_symbol">(</span><span class="sh_string">"filename.txt"</span><span class="sh_symbol">);</span>

        <span class="sh_usertype">Scanner</span><span class="sh_normal"> </span>reader <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">Scanner</span><span class="sh_symbol">(</span>file<span class="sh_symbol">);</span>
        <span class="sh_keyword">while</span> <span class="sh_symbol">(</span>reader<span class="sh_symbol">.</span><span class="sh_function">hasNextLine</span><span class="sh_symbol">())</span> <span class="sh_cbracket">{</span>
            <span class="sh_usertype">String</span><span class="sh_normal"> </span>line <span class="sh_symbol">=</span> reader<span class="sh_symbol">.</span><span class="sh_function">nextLine</span><span class="sh_symbol">();</span>
            System<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">println</span><span class="sh_symbol">(</span>line<span class="sh_symbol">);</span>
        <span class="sh_cbracket">}</span>

        reader<span class="sh_symbol">.</span><span class="sh_function">close</span><span class="sh_symbol">();</span>
</pre>

    <p>The Scanner class constructor <code><a href="http://docs.oracle.com/javase/6/docs/api/java/util/Scanner.html#Scanner(java.io.File)" target="_blank">public Scanner(File source)</a></code> (<em>Constructs a new Scanner that produces values scanned from the specified file.</em>) throws a <code><a href="http://docs.oracle.com/javase/6/docs/api/java/io/FileNotFoundException.html" target="_blank">FileNotFoundException</a></code> when the specified file is not found. The <code>FileNotFoundException</code> is different than <code>RuntimeException</code>, and we have either to handle it or throw it forward. At this point, you only have to know that the programming environment tells you whether you have to handle the exception or not. Let's first create a try-catch block where we handle our file as soon as we open it.</p>

<pre class="sh_java sh_sourceCode">    <span class="sh_keyword">public</span> <span class="sh_type">void</span> <span class="sh_function">readFile</span><span class="sh_symbol">(</span><span class="sh_usertype">File</span><span class="sh_normal"> </span>f<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span>
        <span class="sh_comment">// the file we read</span>
        <span class="sh_usertype">Scanner</span><span class="sh_normal"> </span>reader <span class="sh_symbol">=</span> <span class="sh_keyword">null</span><span class="sh_symbol">;</span>

        <span class="sh_keyword">try</span> <span class="sh_cbracket">{</span>
            reader <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">Scanner</span><span class="sh_symbol">(</span>f<span class="sh_symbol">);</span>
        <span class="sh_cbracket">}</span> <span class="sh_keyword">catch</span> <span class="sh_symbol">(</span><span class="sh_usertype">Exception</span><span class="sh_normal"> </span>e<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span>
            System<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">println</span><span class="sh_symbol">(</span><span class="sh_string">"We couldn't read the file. Error: "</span> <span class="sh_symbol">+</span> e<span class="sh_symbol">.</span><span class="sh_function">getMessage</span><span class="sh_symbol">());</span>
            <span class="sh_keyword">return</span><span class="sh_symbol">;</span> <span class="sh_comment">// we exit the method</span>
        <span class="sh_cbracket">}</span>

        <span class="sh_keyword">while</span> <span class="sh_symbol">(</span>reader<span class="sh_symbol">.</span><span class="sh_function">hasNextLine</span><span class="sh_symbol">())</span> <span class="sh_cbracket">{</span>
            <span class="sh_usertype">String</span><span class="sh_normal"> </span>line <span class="sh_symbol">=</span> reader<span class="sh_symbol">.</span><span class="sh_function">nextLine</span><span class="sh_symbol">();</span>
            System<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">println</span><span class="sh_symbol">(</span>line<span class="sh_symbol">);</span>
        <span class="sh_cbracket">}</span>

        reader<span class="sh_symbol">.</span><span class="sh_function">close</span><span class="sh_symbol">();</span>
    <span class="sh_cbracket">}</span>
</pre>

    <p>Another option is to delegate the exception handling responsibility to the method caller. We delegate the exception handling responsibility by adding the definition <code>throws <em>ExceptionType</em></code> to the method. For instance, we can add <code>throws Exception</code> because the type of all exceptions is <code>Exception</code>. When a method has the attribute <code>throws Exception</code>, whatever chunk of code which calls that method knows that it may throw an exception, and it should be prepared for it.</p>

<pre class="sh_java sh_sourceCode">    <span class="sh_keyword">public</span> <span class="sh_type">void</span> <span class="sh_function">readFile</span><span class="sh_symbol">(</span><span class="sh_usertype">File</span><span class="sh_normal"> </span>f<span class="sh_symbol">)</span> <span class="sh_keyword">throws</span> Exception <span class="sh_cbracket">{</span>
        <span class="sh_comment">// the file we read</span>
        <span class="sh_usertype">Scanner</span><span class="sh_normal"> </span>reader <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">Scanner</span><span class="sh_symbol">(</span>f<span class="sh_symbol">);</span>

        <span class="sh_keyword">while</span> <span class="sh_symbol">(</span>reader<span class="sh_symbol">.</span><span class="sh_function">hasNextLine</span><span class="sh_symbol">())</span> <span class="sh_cbracket">{</span>
            <span class="sh_usertype">String</span><span class="sh_normal"> </span>line <span class="sh_symbol">=</span> reader<span class="sh_symbol">.</span><span class="sh_function">nextLine</span><span class="sh_symbol">();</span>
            System<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">println</span><span class="sh_symbol">(</span>line<span class="sh_symbol">);</span>
        <span class="sh_cbracket">}</span>

        reader<span class="sh_symbol">.</span><span class="sh_function">close</span><span class="sh_symbol">();</span>
    <span class="sh_cbracket">}</span>
</pre>

    <p>In the example, the method <code>readFile</code> receives a file as parameter, and prints all the file lines. At the end, the reader is closed, and the file is closed with it, too. The attribute <code>throws Exception</code> tells us that the method may throw an exception. Same kind of attributes can be added to all the methods that handle files.</p>

    <p>Note that the <code>Scanner</code> object's method <code>nextLine</code> returns a string, but it does not return a new line at the end of it. If you want to read a file and still maintain the new lines, you can add a new line at the end of each line:</p>

<pre class="sh_java sh_sourceCode">    <span class="sh_keyword">public</span> <span class="sh_usertype">String</span><span class="sh_normal"> </span><span class="sh_function">readFileString</span><span class="sh_symbol">(</span><span class="sh_usertype">File</span><span class="sh_normal"> </span>f<span class="sh_symbol">)</span> <span class="sh_keyword">throws</span> Exception <span class="sh_cbracket">{</span>
        <span class="sh_comment">// the file we read</span>
        <span class="sh_usertype">Scanner</span><span class="sh_normal"> </span>reader <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">Scanner</span><span class="sh_symbol">(</span>f<span class="sh_symbol">);</span>

        <span class="sh_usertype">String</span><span class="sh_normal"> </span>string <span class="sh_symbol">=</span> <span class="sh_string">""</span><span class="sh_symbol">;</span>

        <span class="sh_keyword">while</span> <span class="sh_symbol">(</span>reader<span class="sh_symbol">.</span><span class="sh_function">hasNextLine</span><span class="sh_symbol">())</span> <span class="sh_cbracket">{</span>
            <span class="sh_usertype">String</span><span class="sh_normal"> </span>line <span class="sh_symbol">=</span> reader<span class="sh_symbol">.</span><span class="sh_function">nextLine</span><span class="sh_symbol">();</span>
            string <span class="sh_symbol">+=</span> line<span class="sh_symbol">;</span>
            string <span class="sh_symbol">+=</span> <span class="sh_string">"</span><span class="sh_specialchar">\n</span><span class="sh_string">"</span><span class="sh_symbol">;</span>
        <span class="sh_cbracket">}</span>

        reader<span class="sh_symbol">.</span><span class="sh_function">close</span><span class="sh_symbol">();</span>
        <span class="sh_keyword">return</span> string<span class="sh_symbol">;</span>
    <span class="sh_cbracket">}</span>
</pre>

    <p>Because we use the <code>Scanner</code> class to read files, we have all Scanner methods available for use. For instance the method <code>hasNext()</code> returns the boolean value <code>true</code> if the file contains something more to read, and the method <code>next()</code> reads the following word and returns a <code>String</code> object. </p>

    <p>The following program creates a <code>Scanner</code> object which opens the file <code>file.txt</code>. Then, it prints every fifth word of the file.</p>

<pre class="sh_java sh_sourceCode">        <span class="sh_usertype">File</span><span class="sh_normal"> </span>f <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">File</span><span class="sh_symbol">(</span><span class="sh_string">"file.txt"</span><span class="sh_symbol">);</span>
        <span class="sh_usertype">Scanner</span><span class="sh_normal"> </span>reader <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">Scanner</span><span class="sh_symbol">(</span>f<span class="sh_symbol">);</span>

        <span class="sh_type">int</span> whichNumber <span class="sh_symbol">=</span> <span class="sh_number">0</span><span class="sh_symbol">;</span>
        <span class="sh_keyword">while</span> <span class="sh_symbol">(</span>reader<span class="sh_symbol">.</span><span class="sh_function">hasNext</span><span class="sh_symbol">())</span> <span class="sh_cbracket">{</span>
            whichNumber<span class="sh_symbol">++;</span>
            <span class="sh_usertype">String</span><span class="sh_normal"> </span>word <span class="sh_symbol">=</span> reader<span class="sh_symbol">.</span><span class="sh_function">next</span><span class="sh_symbol">();</span>

            <span class="sh_keyword">if</span> <span class="sh_symbol">(</span>whichNumber <span class="sh_symbol">%</span> <span class="sh_number">5</span> <span class="sh_symbol">==</span> <span class="sh_number">0</span><span class="sh_symbol">)</span> <span class="sh_cbracket">{</span>
                System<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">println</span><span class="sh_symbol">(</span>word<span class="sh_symbol">);</span>
            <span class="sh_cbracket">}</span>
        <span class="sh_cbracket">}</span>
</pre>

    <p>Below, you find the text contained in the file, followed by the program output.</p>

<pre>Exception handling is the process of responding to the occurrence, during computation, of exceptions – anomalous or exceptional events <br> requiring special processing – often changing the normal flow of program execution. ...
</pre>

<pre>process
occurrence,
–
requiring
changing
program
</pre>

<h3> Character Set Issues</h3>

    <p>When we read a text file (or when we save something into a file), Java has to find out the character set used by the operating system. Knowledge of the character set is required both to save text on the computer harddisk in binary format, and to translate binary data into text.</p>

    <p>There have been developed standard character sets, and "UTF-8" is the most common nowadays. UTF-8 character set contains both the alphabet letters of everyday use and more particular characters such as the Japanese kanji characters or the information need to read and save the chess pawns. From a simplified programming angle, we could think a character set both as a character-number hashmap and a number-character hashmap. The character-number hashmap shows what binary number is used to save each character into a file. The number-character hashmap shows how we can translate into characters the values we obtain reading a file.</p>

    <p>Almost each operating system producer has also got their own standards. Some support and want to contribute to the use of open source standards, some do not. If you have got problems with the use of Scandinavian characters such as ä and ö (expecially Mac and Windows users), you can tell which character set you want to use when you create a <code>Scanner</code> object. In this course, we always use the the "UTF-8" character set.</p>

    <p>You can create a Scanner object which to read a file which uses the UTF-8 character set in the following way:</p>

<pre class="sh_java sh_sourceCode">    <span class="sh_usertype">File</span><span class="sh_normal"> </span>f <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">File</span><span class="sh_symbol">(</span><span class="sh_string">"examplefile.txt"</span><span class="sh_symbol">);</span>
    <span class="sh_usertype">Scanner</span><span class="sh_normal"> </span>reader <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">Scanner</span><span class="sh_symbol">(</span>f<span class="sh_symbol">,</span> <span class="sh_string">"UTF-8"</span><span class="sh_symbol">);</span>
</pre>

    <p>Anther thing you can do to set up a character set is using an environment variable. Macintosh and Windows users can set up an the value of the environment variable <code>JAVA_TOOL_OPTIONS</code> to the string <code>-Dfile.encoding=UTF8</code>. In such case, Java always uses UTF-8 characters as a default.</p>

<div class="tehtavat">
    <p class="heading" id="e21">Exercise 21: Printer</p>

<p>Create the class <code>Printer</code>, its constructor <code>public Printer(String fileName)</code> which receives a String standing for the file name, and the method <code>public void printLinesWhichContain(String word)</code> which prints the file lines which contain the parameter word (<em>lower and upper case make difference in this excercise; for instance, "test" and "Test" are not the considered the same</em>); the lines are printed in the same order as they are inside the file.</p>

<p>If the argument is an empty String, all of the file is printed.</p>

<p>If the file is not found, the constructor delegates the exception with no need for a try-catch statement; the constructor simply has to be defined in the following way:</p>

<pre class="sh_java sh_sourceCode"><span class="sh_keyword">public</span> Printer <span class="sh_cbracket">{</span>

   <span class="sh_keyword">public</span> <span class="sh_function">Printer</span><span class="sh_symbol">(</span><span class="sh_usertype">String</span><span class="sh_normal"> </span>fileName<span class="sh_symbol">)</span> <span class="sh_keyword">throws</span> Exception <span class="sh_cbracket">{</span>
      <span class="sh_comment">// ...</span>
   <span class="sh_cbracket">}</span>

   <span class="sh_comment">// ...</span>
<span class="sh_cbracket">}</span>
</pre>

<p>The file <em>textFile</em> has been place into the default package of your project to help the tests. When you define the file name of the constructor of Printer, you have to write <code>src/textfile.txt</code>. The file contains an extract of Kalevala, a Finnish epic poem:</p>

<pre>Siinä vanha Väinämöinen
katseleikse käänteleikse
Niin tuli kevätkäkönen
näki koivun kasvavaksi
Miksipä on tuo jätetty
koivahainen kaatamatta
Sanoi vanha Väinämöinen
</pre>

<p>The following example shows what the program should do:</p>

<pre class="sh_java sh_sourceCode">    <span class="sh_usertype">Printer</span><span class="sh_normal"> </span>printer <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">Printer</span><span class="sh_symbol">(</span><span class="sh_string">"src/textfile.txt"</span><span class="sh_symbol">);</span>

    printer<span class="sh_symbol">.</span><span class="sh_function">printLinesWhichContain</span><span class="sh_symbol">(</span><span class="sh_string">"Väinämöinen"</span><span class="sh_symbol">);</span>
    System<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">println</span><span class="sh_symbol">(</span><span class="sh_string">"-----"</span><span class="sh_symbol">);</span>
    printer<span class="sh_symbol">.</span><span class="sh_function">printLinesWhichContain</span><span class="sh_symbol">(</span><span class="sh_string">"Frank Zappa"</span><span class="sh_symbol">);</span>
    System<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">println</span><span class="sh_symbol">(</span><span class="sh_string">"-----"</span><span class="sh_symbol">);</span>
    printer<span class="sh_symbol">.</span><span class="sh_function">printLinesWhichContain</span><span class="sh_symbol">(</span><span class="sh_string">""</span><span class="sh_symbol">);</span>
    System<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">println</span><span class="sh_symbol">(</span><span class="sh_string">"-----"</span><span class="sh_symbol">);</span>
</pre>

<p>Prints:</p>

<pre>Siinä vanha Väinämöinen
Sanoi vanha Väinämöinen
-----
-----
Siinä vanha Väinämöinen
katseleikse käänteleikse
Niin tuli kevätkäkönen
näki koivun kasvavaksi
Miksipä on tuo jätetty
koivahainen kaatamatta
Sanoi vanha Väinämöinen
</pre>

<p>In the project, you also find the whole Kalevala; the file name is <code>src/kalevala.txt</code></p>
<p class="heading" id="e22">Exercise 22: File Analysis</p>

  <p>In this exercise, we create an application to calculate the number of lines and characters.</p>

  <h4>Exercise 22.1: Number of Lines</h4>


  <p>Create the class <code>Analysis</code> in the package <code>file</code>; the class has the constructor <code>public Analysis(File file)</code>. Create the method <code>public int lines()</code>, which returns the number of lines of the file the constructor received as parameter.</p>

<p>The method cannot be "disposable", that is to say it has to return the right value even though it is called different times in a raw. Note that after you create a Scanner object for a file and read its whole contents using <code>nextLine</code> method calls, you can't use the <em>same</em> scanner to read the file again!</p>

<p><strong>Attention:</strong> if the tests report a <em>timeout</em>, it probably means that you haven't been reading the file at all, meaning that the <code>nextLine</code> method calls miss!</p>

  <h4>Exercise 22.2: Number of Characters</h4>

  <p>Create the method <code>public int characters()</code> in the class <code>Analysis</code>; the method returns the number of characters of the file the constructor received as parameter.</p>

<p>The method cannot be "disposable", that is to say it has to return the right value even though it is called different times in a raw.</p>

  <p>You can decide yourself what to do if the constructor parameter file does not exist.</p>

<p>The file <em>testFile</em> has been place into the test package of your project to help the tests. When you define the file name of the constructor of Analysis, you have to write <code>test/testfile.txt</code>. The file contains the following text:</p>

<pre>there are 3 lines, and characters
because line breaks are also
characters
</pre>

<p>The following example shows what the program should do:</p>

<pre class="sh_java sh_sourceCode">    <span class="sh_usertype">File</span><span class="sh_normal"> </span>file <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">File</span><span class="sh_symbol">(</span><span class="sh_string">"test/testfile.txt"</span><span class="sh_symbol">);</span>
    <span class="sh_usertype">Analysis</span><span class="sh_normal"> </span>analysis <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">Analysis</span><span class="sh_symbol">(</span>file<span class="sh_symbol">);</span>
    System<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">println</span><span class="sh_symbol">(</span><span class="sh_string">"Lines: "</span> <span class="sh_symbol">+</span> analysis<span class="sh_symbol">.</span><span class="sh_function">lines</span><span class="sh_symbol">());</span>
    System<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">println</span><span class="sh_symbol">(</span><span class="sh_string">"Characters: "</span> <span class="sh_symbol">+</span> analysis<span class="sh_symbol">.</span><span class="sh_function">characters</span><span class="sh_symbol">());</span>
</pre>

<pre>Lines: 3
Characters: 74
</pre>

<p class="heading" id="e23">Exercise 23: Word Inspection</p>

  <p>Create the class WordInspection, which allows for different kinds of analyses on words. Implement the class in the package <code>wordinspection</code>.</p>

  <p>The Institute for the Languages of Finland (Kotimaisten kielten tutkimuskeskus, Kotus) has published online a list of Finnish words. In this exercise we use a modified version of that list, which can be found in the exercise source folder <code>src</code> with the name <code>wordList.txt</code>; the relative path is <code>"src/wordList.txt"</code>. Because the word list if quite long, in fact, a <code>shortList.txt</code> was created in the project for the tests; the file can be found following the path <code>"src/shortList.txt"</code>.
</p>

  <p><strong>If you have problems with Scandinavian letters </strong> (Mac and Windows users) create your <code>Scanner</code> object assigning it the "UTF-8" character set, in the following way: <code>Scanner reader = new Scanner(file, "UTF-8");</code> Problems come expecially when the tests are executed.</p>

  <h4 class="req">Exercise 23.1: Word Count</h4>

  <p>Create the constructor <code>public WordInspection(File file)</code> to your WordInspection class. The constructor creates a new WordInspection object which inspects the given file.</p>

  <p>Create the method <code>public int wordCount()</code>, which counts the file words and prints their number. In this part, you don't have to do anything with the words, you should only count how many there are. For this exercise, you can expect there is only one word in each row.</p>


  <h4 class="req">Exercise 23.2: z</h4>

  <p>Create the method <code>public List&lt;String&gt; wordsContainingZ()</code>, which returns all the file words which contain a z; for instance, jazz and zombie.</p>

  <h4 class="req">Exercise 23.3: Ending l</h4>

  <p>Create the method <code>public List&lt;String&gt; wordsEndingInL()</code>, which returns all the Finnish words of the file which end in l; such words are, for instance, kannel and sammal.</p>

  <p><em>Attention! If you read the file various different times in your program, you notice that your code contains a lot of copy-paste, so far. It would be useful to think whether it would be possible to read the file in an different place, maybe inside the constructor or as a method, which the constructor calls. In such case, the methods could use a list which was read before and then create a new list which suits their search criteria. In week 12, we will come back again with an ortodox way to eliminate copy-paste.</em></p>

  <h4>Exercise 23.4: Palindromes</h4>

  <p>Create the method <code>public List&lt;String&gt; palindromes()</code>, which returns all the palindrome words of the file. Such words are, for instance, ala and enne.</p>

  <h4 class="req">Exercise 23.5: All Vowels</h4>

  <p>Create the method <code>public List&lt;String&gt; wordsWhichContainAllVowels()</code>, which returns all the words of the file which contain all Finnish vowels (aeiouyäö). Such words are, for instance, myöhäiselokuva and ympäristönsuojelija.</p>
</div>





<h2 id="48"> Hashmaps and Sets</h2>

<h3> Many Values and One Key</h3>

<p>As we remember, we can save only one value per key using HashMap. In the following examples we save people's mobile phone numbers in a HashMap.</p>

<pre class="sh_java sh_sourceCode">  <span class="sh_usertype">Map&lt;String, String&gt;</span><span class="sh_normal"> </span>phoneNumbers <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> HashMap<span class="sh_symbol">&lt;</span>String<span class="sh_symbol">,</span> String<span class="sh_symbol">&gt;();</span>

  phoneNumbers<span class="sh_symbol">.</span><span class="sh_function">put</span><span class="sh_symbol">(</span><span class="sh_string">"Pekka"</span><span class="sh_symbol">,</span> <span class="sh_string">"040-12348765"</span><span class="sh_symbol">);</span>

  System<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">println</span><span class="sh_symbol">(</span> <span class="sh_string">"Pekka's number: "</span><span class="sh_symbol">+</span> phoneNumbers<span class="sh_symbol">.</span><span class="sh_function">get</span><span class="sh_symbol">(</span><span class="sh_string">"Pekka"</span><span class="sh_symbol">)</span> <span class="sh_symbol">);</span>

  phoneNumbers<span class="sh_symbol">.</span><span class="sh_function">put</span><span class="sh_symbol">(</span><span class="sh_string">"Pekka"</span><span class="sh_symbol">,</span> <span class="sh_string">"09-111333"</span><span class="sh_symbol">);</span>

  System<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">println</span><span class="sh_symbol">(</span> <span class="sh_string">"Pekka's number: "</span><span class="sh_symbol">+</span> phoneNumbers<span class="sh_symbol">.</span><span class="sh_function">get</span><span class="sh_symbol">(</span><span class="sh_string">"Pekka"</span><span class="sh_symbol">)</span> <span class="sh_symbol">);</span>
</pre>

<p>as expected, the output tells us:</p>

<pre>Pekka's number: 040-12348765
Pekka's number: 09-111333
</pre>

<p>What about if we wanted to save various different values per one key, what about if a person had many phone numbers? Can we manage with an HashMap? Of course! For instance, instead of saving Strings as HashMap values we could save ArrayLists, mapping more than one object to one key. Let's change the way we save phone numbers as follows:</p>

<pre class="sh_java sh_sourceCode">  <span class="sh_usertype">Map&lt;String, ArrayList&lt;String&gt;&gt;</span><span class="sh_normal"> </span>phoneNumbers <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> HashMap<span class="sh_symbol">&lt;</span>String<span class="sh_symbol">,</span> ArrayList<span class="sh_symbol">&lt;</span>String<span class="sh_symbol">&gt;&gt;();</span>
</pre>

<p>Now, a list is mapped to each HashMap key. Even though the new command creates a HashMap, the list which will be saved inside has to be created separately. In the following example, we add two numbers to the HashMap for Pekka, and we print them:</p>

<pre class="sh_java sh_sourceCode">  <span class="sh_usertype">Map&lt;String, ArrayList&lt;String&gt;&gt;</span><span class="sh_normal"> </span>phoneNumbers <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> HashMap<span class="sh_symbol">&lt;</span>String<span class="sh_symbol">,</span> ArrayList<span class="sh_symbol">&lt;</span>String<span class="sh_symbol">&gt;&gt;();</span>

  <span class="sh_comment">// We map an empty ArrayList to Pekka</span>
  phoneNumbers<span class="sh_symbol">.</span><span class="sh_function">put</span><span class="sh_symbol">(</span> <span class="sh_string">"Pekka"</span><span class="sh_symbol">,</span> <span class="sh_keyword">new</span>  ArrayList<span class="sh_symbol">&lt;</span>String<span class="sh_symbol">&gt;()</span> <span class="sh_symbol">);</span>

  <span class="sh_comment">// we add Pekka's number to the list</span>
  phoneNumbers<span class="sh_symbol">.</span><span class="sh_function">get</span><span class="sh_symbol">(</span><span class="sh_string">"Pekka"</span><span class="sh_symbol">).</span><span class="sh_function">add</span><span class="sh_symbol">(</span><span class="sh_string">"040-12348765"</span><span class="sh_symbol">);</span>

  <span class="sh_comment">// and we add a second phone number</span>
  phoneNumbers<span class="sh_symbol">.</span><span class="sh_function">get</span><span class="sh_symbol">(</span><span class="sh_string">"Pekka"</span><span class="sh_symbol">).</span><span class="sh_function">add</span><span class="sh_symbol">(</span><span class="sh_string">"09-111333"</span><span class="sh_symbol">);</span>

  System<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">println</span><span class="sh_symbol">(</span> <span class="sh_string">"Pekka's numbers: "</span><span class="sh_symbol">+</span> phoneNumbers<span class="sh_symbol">.</span><span class="sh_function">get</span><span class="sh_symbol">(</span><span class="sh_string">"Pekka"</span><span class="sh_symbol">)</span> <span class="sh_symbol">);</span>
</pre>

<p>Prints</p>

<pre>Pekka's numbers: [040-12348765, 09-111333]
</pre>

<p>We define the phone number type as <code>Map&lt;String, ArrayList&lt;String&gt;&gt;</code>, that is a Map whose key is a String and whose value is a list containing strings. The concrete implementation -- that is to say the created object -- was a HashMap. We could have defined a variable also in the following way:
</p>

<pre class="sh_java sh_sourceCode"><span class="sh_usertype">Map&lt;String, List&lt;String&gt;&gt;</span><span class="sh_normal"> </span>phoneNumbers <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> HashMap<span class="sh_symbol">&lt;</span>String<span class="sh_symbol">,</span> List<span class="sh_symbol">&lt;</span>String<span class="sh_symbol">&gt;&gt;();</span>
</pre>

<p>Now, the variable type is a Map, whose key is a String and value is a <code>List</code> containing strings. In fact, a List is an interface which defines the List functionality, and ArrayLists implement this interface, for instance. The concrete object is a HashMap.</p>

<p>The values we save into the HashMap are concrete object which implement the interface <code>List&lt;String&gt;</code>, ArrayLists, for instance. Again, we can add values to the HashMap in the following way:</p>

<pre class="sh_java sh_sourceCode">  <span class="sh_comment">// first, we map an empty ArrayList to Pekka</span>
  phoneNumbers<span class="sh_symbol">.</span><span class="sh_function">put</span><span class="sh_symbol">(</span> <span class="sh_string">"Pekka"</span><span class="sh_symbol">,</span> <span class="sh_keyword">new</span>  ArrayList<span class="sh_symbol">&lt;</span>String<span class="sh_symbol">&gt;()</span> <span class="sh_symbol">);</span>

  <span class="sh_comment">// ...</span>
</pre>

<p>In the future, instead of using concrete classes (such as <code>HashMap</code> and <code>ArrayList</code>, for instance), we will always try to use their respective interfaces <code>Map</code> and <code>List</code>.</p>

<h3> Sets</h3>

    <p>Differently from lists, in a <code><a href="http://docs.oracle.com/javase/6/docs/api/java/util/Set.html" target="_blank">Set</a></code> there can be up to one same entry, that is to say the same object can not be contained twice in a set. The similarity between two objects is inspected using the methods <code>equals</code> and <code>hashCode</code>. </p>

<p>One of the classes which implement the <code>Set</code> interface is  <code><a href="http://docs.oracle.com/javase/6/docs/api/java/util/HashSet.html" target="_blank">HashSet</a></code>. Let's use it to implement the class <code>ExerciseAccounting</code>, which allows us to keep an account of the exercise we do and to print them. Let's suppose the the exercises are always integers.</p>

<pre class="sh_java sh_sourceCode"><span class="sh_keyword">public</span> <span class="sh_keyword">class</span><span class="sh_normal"> </span><span class="sh_classname">ExerciseAccounting</span> <span class="sh_cbracket">{</span>
    <span class="sh_keyword">private</span> <span class="sh_usertype">Set&lt;Integer&gt;</span><span class="sh_normal"> </span>doneExercises<span class="sh_symbol">;</span>

    <span class="sh_keyword">public</span> <span class="sh_function">ExerciseAccounting</span><span class="sh_symbol">()</span> <span class="sh_cbracket">{</span>
        <span class="sh_keyword">this</span><span class="sh_symbol">.</span>doneExercises <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> HashSet<span class="sh_symbol">&lt;</span>Integer<span class="sh_symbol">&gt;();</span>
    <span class="sh_cbracket">}</span>

    <span class="sh_keyword">public</span> <span class="sh_type">void</span> <span class="sh_function">add</span><span class="sh_symbol">(</span><span class="sh_type">int</span> exercise<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span>
        <span class="sh_keyword">this</span><span class="sh_symbol">.</span>doneExercises<span class="sh_symbol">.</span><span class="sh_function">add</span><span class="sh_symbol">(</span>exercise<span class="sh_symbol">);</span>
    <span class="sh_cbracket">}</span>

    <span class="sh_keyword">public</span> <span class="sh_type">void</span> <span class="sh_function">print</span><span class="sh_symbol">()</span> <span class="sh_cbracket">{</span>
        <span class="sh_keyword">for</span> <span class="sh_symbol">(</span><span class="sh_type">int</span> exercise<span class="sh_symbol">:</span> <span class="sh_keyword">this</span><span class="sh_symbol">.</span>doneExercises<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span>
            System<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">println</span><span class="sh_symbol">(</span>exercise<span class="sh_symbol">);</span>
        <span class="sh_cbracket">}</span>
    <span class="sh_cbracket">}</span>
<span class="sh_cbracket">}</span>
</pre>

<pre class="sh_java sh_sourceCode">        <span class="sh_usertype">ExerciseAccounting</span><span class="sh_normal"> </span>account <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">ExerciseAccounting</span><span class="sh_symbol">();</span>
        account<span class="sh_symbol">.</span><span class="sh_function">add</span><span class="sh_symbol">(</span><span class="sh_number">1</span><span class="sh_symbol">);</span>
        account<span class="sh_symbol">.</span><span class="sh_function">add</span><span class="sh_symbol">(</span><span class="sh_number">1</span><span class="sh_symbol">);</span>
        account<span class="sh_symbol">.</span><span class="sh_function">add</span><span class="sh_symbol">(</span><span class="sh_number">2</span><span class="sh_symbol">);</span>
        account<span class="sh_symbol">.</span><span class="sh_function">add</span><span class="sh_symbol">(</span><span class="sh_number">3</span><span class="sh_symbol">);</span>

        account<span class="sh_symbol">.</span><span class="sh_function">print</span><span class="sh_symbol">();</span>
</pre>

<pre>1
2
3
</pre>

    <p>The solution above is useful if we don't need information about the exercises done by each different user. We can change the saving logic of the exercises in a way to have them save in relation to each user, using a HashMap. The users are recognized through a unique string (for instance, their student number), and each user has their own set of finished exercises.</p>

<pre class="sh_java sh_sourceCode"><span class="sh_keyword">public</span> <span class="sh_keyword">class</span><span class="sh_normal"> </span><span class="sh_classname">ExerciseAccounting</span> <span class="sh_cbracket">{</span>
    <span class="sh_keyword">private</span> <span class="sh_usertype">Map&lt;String, Set&lt;Integer&gt;&gt;</span><span class="sh_normal"> </span>doneExercises<span class="sh_symbol">;</span>

    <span class="sh_keyword">public</span> <span class="sh_function">ExerciseAccounting</span><span class="sh_symbol">()</span> <span class="sh_cbracket">{</span>
        <span class="sh_keyword">this</span><span class="sh_symbol">.</span>doneExercises <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> HashMap<span class="sh_symbol">&lt;</span>String<span class="sh_symbol">,</span> Set<span class="sh_symbol">&lt;</span>Integer<span class="sh_symbol">&gt;&gt;();</span>
    <span class="sh_cbracket">}</span>

    <span class="sh_keyword">public</span> <span class="sh_type">void</span> <span class="sh_function">add</span><span class="sh_symbol">(</span><span class="sh_usertype">String</span><span class="sh_normal"> </span>user<span class="sh_symbol">,</span> <span class="sh_type">int</span> exercise<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span>
        <span class="sh_comment">// note that when we create a new user we have first to map an empty exercise set to it</span>
        <span class="sh_keyword">if</span> <span class="sh_symbol">(!</span><span class="sh_keyword">this</span><span class="sh_symbol">.</span>doneExercises<span class="sh_symbol">.</span><span class="sh_function">containsKey</span><span class="sh_symbol">(</span>user<span class="sh_symbol">))</span> <span class="sh_cbracket">{</span>
            <span class="sh_keyword">this</span><span class="sh_symbol">.</span>doneExercises<span class="sh_symbol">.</span><span class="sh_function">put</span><span class="sh_symbol">(</span>user<span class="sh_symbol">,</span> <span class="sh_keyword">new</span> HashSet<span class="sh_symbol">&lt;</span>Integer<span class="sh_symbol">&gt;());</span>
        <span class="sh_cbracket">}</span>

        <span class="sh_comment">// first, we retrieve the set containing the user's exercises and then we add an exercise to it</span>
        <span class="sh_usertype">Set&lt;Integer&gt;</span><span class="sh_normal"> </span>finished <span class="sh_symbol">=</span> <span class="sh_keyword">this</span><span class="sh_symbol">.</span>doneExercises<span class="sh_symbol">.</span><span class="sh_function">get</span><span class="sh_symbol">(</span>user<span class="sh_symbol">);</span>
        finished<span class="sh_symbol">.</span><span class="sh_function">add</span><span class="sh_symbol">(</span>exercise<span class="sh_symbol">);</span>

        <span class="sh_comment">// the previous would have worked out without helping variable in the following way:</span>
        <span class="sh_comment">//  this.doneExercises.get(user).add(exercise);</span>
    <span class="sh_cbracket">}</span>

    <span class="sh_keyword">public</span> <span class="sh_type">void</span> <span class="sh_function">print</span><span class="sh_symbol">()</span> <span class="sh_cbracket">{</span>
        <span class="sh_keyword">for</span> <span class="sh_symbol">(</span><span class="sh_usertype">String</span><span class="sh_normal"> </span>user<span class="sh_symbol">:</span> <span class="sh_keyword">this</span><span class="sh_symbol">.</span>doneExercises<span class="sh_symbol">.</span><span class="sh_function">keySet</span><span class="sh_symbol">())</span> <span class="sh_cbracket">{</span>
            System<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">println</span><span class="sh_symbol">(</span>user <span class="sh_symbol">+</span> <span class="sh_string">": "</span> <span class="sh_symbol">+</span> <span class="sh_keyword">this</span><span class="sh_symbol">.</span>doneExercises<span class="sh_symbol">.</span><span class="sh_function">get</span><span class="sh_symbol">(</span>user<span class="sh_symbol">));</span>
        <span class="sh_cbracket">}</span>
    <span class="sh_cbracket">}</span>
<span class="sh_cbracket">}</span>
</pre>

<pre class="sh_java sh_sourceCode">        <span class="sh_usertype">ExerciseAccounting</span><span class="sh_normal"> </span>accounting <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">ExerciseAccounting</span><span class="sh_symbol">();</span>
        accounting<span class="sh_symbol">.</span><span class="sh_function">add</span><span class="sh_symbol">(</span><span class="sh_string">"Mikael"</span><span class="sh_symbol">,</span> <span class="sh_number">3</span><span class="sh_symbol">);</span>
        accounting<span class="sh_symbol">.</span><span class="sh_function">add</span><span class="sh_symbol">(</span><span class="sh_string">"Mikael"</span><span class="sh_symbol">,</span> <span class="sh_number">4</span><span class="sh_symbol">);</span>
        accounting<span class="sh_symbol">.</span><span class="sh_function">add</span><span class="sh_symbol">(</span><span class="sh_string">"Mikael"</span><span class="sh_symbol">,</span> <span class="sh_number">3</span><span class="sh_symbol">);</span>
        accounting<span class="sh_symbol">.</span><span class="sh_function">add</span><span class="sh_symbol">(</span><span class="sh_string">"Mikael"</span><span class="sh_symbol">,</span> <span class="sh_number">3</span><span class="sh_symbol">);</span>

        accounting<span class="sh_symbol">.</span><span class="sh_function">add</span><span class="sh_symbol">(</span><span class="sh_string">"Pekka"</span><span class="sh_symbol">,</span> <span class="sh_number">4</span><span class="sh_symbol">);</span>
        accounting<span class="sh_symbol">.</span><span class="sh_function">add</span><span class="sh_symbol">(</span><span class="sh_string">"Pekka"</span><span class="sh_symbol">,</span> <span class="sh_number">4</span><span class="sh_symbol">);</span>

        accounting<span class="sh_symbol">.</span><span class="sh_function">add</span><span class="sh_symbol">(</span><span class="sh_string">"Matti"</span><span class="sh_symbol">,</span> <span class="sh_number">1</span><span class="sh_symbol">);</span>
        accounting<span class="sh_symbol">.</span><span class="sh_function">add</span><span class="sh_symbol">(</span><span class="sh_string">"Matti"</span><span class="sh_symbol">,</span> <span class="sh_number">2</span><span class="sh_symbol">);</span>

        accounting<span class="sh_symbol">.</span><span class="sh_function">print</span><span class="sh_symbol">();</span>
</pre>

<pre>Matti: [1, 2]
Pekka: [4]
Mikael: [3, 4]
</pre>


    <p>Note that the user names are not printed in order, in our example. This depends on the saving process of the <code>HashMap</code> entries, which happens through the value returned by the <code>hashCode</code> method, and does not involve the entry order in any way.</p>

<div class="tehtavat">
    <p class="heading" id="e24">Exercise 24: Multiple Entry Dictionary</p>

<p>Let's make an extended version of the dictionary of week 1. Your task is to implement the class <code>PersonalMultipleEntryDictionary</code>, which can save one or more entry for each word translated. The class has to implement the interface in the exercise source, <code>MultipleEntryDictionary</code>, with the following methods:</p>

<p>
  </p><ul><li><code>public void add(String word, String entry)</code></li>, which adds a new entry to a word, maintaining the old ones<br><li><code>public Set&lt;String&gt; translate(String word)</code></li>, which returns a <code>Set</code> object, with all the entries of the word, or a <code>null</code> reference, if the word is not in the dictionary<br><li><code>public void remove(String word)</code></li>, which removes a word and all its entries from the dictionary<br></ul><p>As for the ExampleAccounting above, it's good to store the translations into a <code>Map&lt;String, Set&lt;String&gt;&gt;</code> object variable.</p>

<p>The interface code:</p>

<pre class="sh_java sh_sourceCode"><span class="sh_preproc">package</span> dictionary<span class="sh_symbol">;</span>

<span class="sh_preproc">import</span> java<span class="sh_symbol">.</span>util<span class="sh_symbol">.</span>Set<span class="sh_symbol">;</span>

<span class="sh_keyword">public</span> <span class="sh_keyword">interface</span><span class="sh_normal"> </span><span class="sh_classname">MultipleEntryDictionary</span> <span class="sh_cbracket">{</span>
    <span class="sh_type">void</span> <span class="sh_function">add</span><span class="sh_symbol">(</span><span class="sh_usertype">String</span><span class="sh_normal"> </span>word<span class="sh_symbol">,</span> <span class="sh_usertype">String</span><span class="sh_normal"> </span>translation<span class="sh_symbol">);</span>
    <span class="sh_usertype">Set&lt;String&gt;</span><span class="sh_normal"> </span><span class="sh_function">translate</span><span class="sh_symbol">(</span><span class="sh_usertype">String</span><span class="sh_normal"> </span>word<span class="sh_symbol">);</span>
    <span class="sh_type">void</span> <span class="sh_function">remove</span><span class="sh_symbol">(</span><span class="sh_usertype">String</span><span class="sh_normal"> </span>word<span class="sh_symbol">);</span>
<span class="sh_cbracket">}</span>
</pre>

<p>An example program:</p>

<pre class="sh_java sh_sourceCode">    <span class="sh_usertype">MultipleEntryDictionary</span><span class="sh_normal"> </span>dict <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">PersonalMultipleEntryDictionary</span><span class="sh_symbol">();</span>
    dict<span class="sh_symbol">.</span><span class="sh_function">add</span><span class="sh_symbol">(</span><span class="sh_string">"kuusi"</span><span class="sh_symbol">,</span> <span class="sh_string">"six"</span><span class="sh_symbol">);</span>
    dict<span class="sh_symbol">.</span><span class="sh_function">add</span><span class="sh_symbol">(</span><span class="sh_string">"kuusi"</span><span class="sh_symbol">,</span> <span class="sh_string">"spruce"</span><span class="sh_symbol">);</span>

    dict<span class="sh_symbol">.</span><span class="sh_function">add</span><span class="sh_symbol">(</span><span class="sh_string">"pii"</span><span class="sh_symbol">,</span> <span class="sh_string">"silicon"</span><span class="sh_symbol">);</span>
    dict<span class="sh_symbol">.</span><span class="sh_function">add</span><span class="sh_symbol">(</span><span class="sh_string">"pii"</span><span class="sh_symbol">,</span> <span class="sh_string">"pi"</span><span class="sh_symbol">);</span>

    System<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">println</span><span class="sh_symbol">(</span>dict<span class="sh_symbol">.</span><span class="sh_function">translate</span><span class="sh_symbol">(</span><span class="sh_string">"kuusi"</span><span class="sh_symbol">));</span>
    dict<span class="sh_symbol">.</span><span class="sh_function">remove</span><span class="sh_symbol">(</span><span class="sh_string">"pii"</span><span class="sh_symbol">);</span>
    System<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">println</span><span class="sh_symbol">(</span>dict<span class="sh_symbol">.</span><span class="sh_function">translate</span><span class="sh_symbol">(</span><span class="sh_string">"pii"</span><span class="sh_symbol">));</span>
</pre>

<p>Prints:</p>

<pre>[six, spruce]
null
</pre>




<!-- TODO: Translate -->
<p class="heading" id="e25">Exercise 25: Duplicate Remover</p>

  <p>Your task is to implement inside the package <code>tools</code> a class <code>PersonalDuplicateRemover</code>, which stores the given characterStrings so that equal characterStrings are removed (a.k.a duplicates). Class also holds a record of the amount of duplicates. Class should implement the given interface <code>DuplicateRemover</code>, which has the following methods:</p>

  <p>
    </p><ul><li><code>public void add(String characterString)</code></li> stores a characterString if it's not a duplicate.<br><li><code>public int getNumberOfDetectedDuplicates()</code></li> returns the number of detected duplicates.<br><li><code>public Set&lt;String&gt; getUniqueCharacterStrings()</code></li> returns an object which implements the interface <code>Set&lt;String&gt;</code>. Object should have all unique characterStrings (no duplicates!). If there are no unique characterStrings, method returns an empty set.<br><li><code>public void empty()</code></li> removes stored characterStrings and resets the amount of detected duplicates.<br></ul><p>Code of the interface:</p>

<pre class="sh_java sh_sourceCode"><span class="sh_preproc">package</span> tools<span class="sh_symbol">;</span>

<span class="sh_preproc">import</span> java<span class="sh_symbol">.</span>util<span class="sh_symbol">.</span>Set<span class="sh_symbol">;</span>

<span class="sh_keyword">public</span> <span class="sh_keyword">interface</span><span class="sh_normal"> </span><span class="sh_classname">DuplicateRemover</span> <span class="sh_cbracket">{</span>
    <span class="sh_type">void</span> <span class="sh_function">add</span><span class="sh_symbol">(</span><span class="sh_usertype">String</span><span class="sh_normal"> </span>characterString<span class="sh_symbol">);</span>
    <span class="sh_type">int</span> <span class="sh_function">getNumberOfDetectedDuplicates</span><span class="sh_symbol">();</span>
    <span class="sh_usertype">Set&lt;String&gt;</span><span class="sh_normal"> </span><span class="sh_function">getUniqueCharacterStrings</span><span class="sh_symbol">();</span>
    <span class="sh_type">void</span> <span class="sh_function">empty</span><span class="sh_symbol">();</span>
<span class="sh_cbracket">}</span>
</pre>

  <p>Interface can be used like this for example:</p>

<pre class="sh_java sh_sourceCode">    <span class="sh_keyword">public</span> <span class="sh_keyword">static</span> <span class="sh_type">void</span> <span class="sh_function">main</span><span class="sh_symbol">(</span>String<span class="sh_symbol">[]</span> args<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span>
        <span class="sh_usertype">DuplicateRemover</span><span class="sh_normal"> </span>remover <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">PersonalDuplicateRemover</span><span class="sh_symbol">();</span>
        remover<span class="sh_symbol">.</span><span class="sh_function">add</span><span class="sh_symbol">(</span><span class="sh_string">"first"</span><span class="sh_symbol">);</span>
        remover<span class="sh_symbol">.</span><span class="sh_function">add</span><span class="sh_symbol">(</span><span class="sh_string">"second"</span><span class="sh_symbol">);</span>
        remover<span class="sh_symbol">.</span><span class="sh_function">add</span><span class="sh_symbol">(</span><span class="sh_string">"first"</span><span class="sh_symbol">);</span>

        System<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">println</span><span class="sh_symbol">(</span><span class="sh_string">"Current number of duplicates: "</span> <span class="sh_symbol">+</span>
            remover<span class="sh_symbol">.</span><span class="sh_function">getNumberOfDetectedDuplicates</span><span class="sh_symbol">());</span>

        remover<span class="sh_symbol">.</span><span class="sh_function">add</span><span class="sh_symbol">(</span><span class="sh_string">"last"</span><span class="sh_symbol">);</span>
        remover<span class="sh_symbol">.</span><span class="sh_function">add</span><span class="sh_symbol">(</span><span class="sh_string">"last"</span><span class="sh_symbol">);</span>
        remover<span class="sh_symbol">.</span><span class="sh_function">add</span><span class="sh_symbol">(</span><span class="sh_string">"new"</span><span class="sh_symbol">);</span>

        System<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">println</span><span class="sh_symbol">(</span><span class="sh_string">"Current number of duplicates: "</span> <span class="sh_symbol">+</span>
            remover<span class="sh_symbol">.</span><span class="sh_function">getNumberOfDetectedDuplicates</span><span class="sh_symbol">());</span>

        System<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">println</span><span class="sh_symbol">(</span><span class="sh_string">"Unique characterStrings: "</span> <span class="sh_symbol">+</span>
            remover<span class="sh_symbol">.</span><span class="sh_function">getUniqueCharacterStrings</span><span class="sh_symbol">());</span>

        remover<span class="sh_symbol">.</span><span class="sh_function">empty</span><span class="sh_symbol">();</span>

        System<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">println</span><span class="sh_symbol">(</span><span class="sh_string">"Current number of duplicates: "</span> <span class="sh_symbol">+</span>
            remover<span class="sh_symbol">.</span><span class="sh_function">getNumberOfDetectedDuplicates</span><span class="sh_symbol">());</span>

        System<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">println</span><span class="sh_symbol">(</span><span class="sh_string">"Unique characterStrings: "</span> <span class="sh_symbol">+</span>
            remover<span class="sh_symbol">.</span><span class="sh_function">getUniqueCharacterStrings</span><span class="sh_symbol">());</span>
    <span class="sh_cbracket">}</span>
</pre>

  <p>Code above would print: (order of characterStrings can change, it doesn't matter)</p>

<pre>Current number of duplicates: 1
Current number of duplicates: 2
Unique characterStrings: [first, second, last, new]
Current number of duplicates: 0
Unique characterStrings: []
</pre>

</div>

<h3> One Object in Many Lists, a Map Construction or a Set</h3>

<p>As we remember, object variable are reference-type, which means that the variable does not memorize the object itself, but the reference to the object. Respectively, if we put an object into an ArrayList, for instance, the List does not memorize the object itself but the <code>reference</code> to the object. There is no reason why we should not be able to save an object in various different lists or HashMaps, for instance.</p>

<p>Let's have a look at our library example, which saves books into HashMaps, both based on their writer and ISB number. In addition to this, the library. Moreover, the library has two lists for the books on loan and for the ones that are on the shelves.</p>

<pre class="sh_java sh_sourceCode"><span class="sh_keyword">public</span> <span class="sh_keyword">class</span><span class="sh_normal"> </span><span class="sh_classname">Book</span> <span class="sh_cbracket">{</span>
    <span class="sh_keyword">private</span> <span class="sh_usertype">String</span><span class="sh_normal"> </span>ISBN<span class="sh_symbol">;</span>
    <span class="sh_keyword">private</span> <span class="sh_usertype">String</span><span class="sh_normal"> </span>writer<span class="sh_symbol">;</span>
    <span class="sh_keyword">private</span> <span class="sh_usertype">String</span><span class="sh_normal"> </span>name<span class="sh_symbol">;</span>
    <span class="sh_keyword">private</span> <span class="sh_type">int</span> date<span class="sh_symbol">;</span>
    <span class="sh_comment">// ...</span>
<span class="sh_cbracket">}</span>

<span class="sh_keyword">public</span> <span class="sh_keyword">class</span><span class="sh_normal"> </span><span class="sh_classname">Library</span> <span class="sh_cbracket">{</span>
    <span class="sh_keyword">private</span> <span class="sh_usertype">Map&lt;String, Book&gt;</span><span class="sh_normal"> </span>ISBNBooks<span class="sh_symbol">;</span>
    <span class="sh_keyword">private</span> <span class="sh_usertype">Map&lt;String, List&lt;String&gt;&gt;</span><span class="sh_normal"> </span>writerBooks<span class="sh_symbol">;</span>
    <span class="sh_keyword">private</span> <span class="sh_usertype">List&lt;Book&gt;</span><span class="sh_normal"> </span>loanBooks<span class="sh_symbol">;</span>
    <span class="sh_keyword">private</span> <span class="sh_usertype">List&lt;Book&gt;</span><span class="sh_normal"> </span>shelfBooks<span class="sh_symbol">;</span>

    <span class="sh_keyword">public</span> <span class="sh_type">void</span> <span class="sh_function">addBook</span><span class="sh_symbol">(</span><span class="sh_usertype">Book</span><span class="sh_normal"> </span>newBook<span class="sh_symbol">)</span><span class="sh_cbracket">{</span>
        ISBNBooks<span class="sh_symbol">.</span><span class="sh_function">put</span><span class="sh_symbol">(</span>newBook<span class="sh_symbol">.</span><span class="sh_function">getIsbn</span><span class="sh_symbol">(),</span> newBook<span class="sh_symbol">);</span>
        writerBooks<span class="sh_symbol">.</span><span class="sh_function">get</span><span class="sh_symbol">(</span>newBook<span class="sh_symbol">.</span><span class="sh_function">getWriter</span><span class="sh_symbol">()).</span><span class="sh_function">add</span><span class="sh_symbol">(</span>newBook<span class="sh_symbol">);</span>
        shelfBooks<span class="sh_symbol">.</span><span class="sh_function">add</span><span class="sh_symbol">(</span>newBook<span class="sh_symbol">);</span>
    <span class="sh_cbracket">}</span>

    <span class="sh_keyword">public</span> <span class="sh_usertype">Book</span><span class="sh_normal"> </span><span class="sh_function">getBookBasedOnISBN</span><span class="sh_symbol">(</span><span class="sh_usertype">String</span><span class="sh_normal"> </span>isbn<span class="sh_symbol">)</span><span class="sh_cbracket">{</span>
        <span class="sh_keyword">return</span> ISBNBooks<span class="sh_symbol">.</span><span class="sh_function">get</span><span class="sh_symbol">(</span>isbn<span class="sh_symbol">);</span>
    <span class="sh_cbracket">}</span>

    <span class="sh_comment">// ...</span>
<span class="sh_cbracket">}</span>
</pre>

<p>If an object is listed in different places at the same time (in a list, a set, or a map construction), you have to pay particular attention so to make sure the state of the different collections is consistent. For instance, if we decide to delete a book, it must be deleted from both maps as well as from the two lists which contain the books on loan and on the shelves.</p>

<div class="tehtavat">

    <p class="heading" id="e26">Exercise 26: Phone Search</p>

<p><b>Attention: you can create only one Scanner object so that your tests would work well. Also, do not use static variables, the tests execute your program many different times, and the static variable values left from the previous execution would possibly disturb them!</b></p>


<p>Let's create an application to manage people phone numbers and addresses.</p>

<p>The exercise can be worth 1-5 points. To receive one point, you should implement the following functionality:</p>

<ul><li>1 adding a phone number to the relative person</li>
<li>2 phone number search by person</li>
</ul><p>to receive two points we also require</p>

<ul><li>3 name search by phone number</li>
</ul><p>to receive three points also</p>

<ul><li>4 adding an address to the relative person</li>
<li>5 personal information search (search for a person's address and phone number)</li>
</ul><p>if you want to receive four points, also implement</p>

<ul><li>6 removing a person's information</li>
</ul><p>and to receive all the points:</p>

<ul><li>7 filtered search by keyword (retrieving a list which must be sorted by name in alphabetic order), the keyword can appear in the name or address</li>
</ul><p>An example of how the program works:</p>

<pre>phone search
available operations:
 1 add a number
 2 search for a number
 3 search for a person by phone number
 4 add an address
 5 search for personal information
 6 delete personal information
 7 filtered listing
 x quit

command: <font color="red">1</font>
whose number: <font color="red">pekka</font>
number: <font color="red">040-123456</font>

command: <font color="red">2</font>
whose number: <font color="red">jukka</font>
  not found

command: <font color="red">2</font>
whose number: <font color="red">pekka</font>
 <font color="red">040-123456</font>

command: <font color="red">1</font>
whose number: <font color="red">pekka</font>
number: <font color="red">09-222333</font>

command: <font color="red">2</font>
whose number: <font color="red">pekka</font>
 040-123456
 09-222333

command: <font color="red">3</font>
number: <font color="red">02-444123</font>
 not found

command: <font color="red">3</font>
number: <font color="red">09-222333</font>
 pekka

command: <font color="red">5</font>
whose information: <font color="red">pekka</font>
  address unknown
  phone numbers:
   040-123456
   09-222333

command: <font color="red">4</font>
whose address: <font color="red">pekka</font>
street: <font color="red">ida ekmanintie</font>
city: <font color="red">helsinki</font>

command: <font color="red">5</font>
whose information: <font color="red">pekka</font>
  address: ida ekmanintie helsinki
  phone numbers:
   040-123456
   09-222333

command: <font color="red">4</font>
whose address: <font color="red">jukka</font>
street: <font color="red">korsontie</font>
city: <font color="red">vantaa</font>

command: <font color="red">5</font>
whose information: <font color="red">jukka</font>
  address: korsontie vantaa
  phone number not found

command: <font color="red">7</font>
keyword (if empty, all listed): <font color="red">kk</font>

 jukka
  address: korsontie vantaa
  phone number not found

 pekka
  address: ida ekmanintie helsinki
  phone numbers:
   040-123456
   09-222333

command: <font color="red">7</font>
keyword (if empty, all listed): <font color="red">vantaa</font>

 jukka
  address: korsontie vantaa
  phone number not found

command: <font color="red">7</font>
keyword (if empty, all listed): <font color="red">seppo</font>
 keyword not found

command: <font color="red">6</font>
whose information: <font color="red">jukka</font>

command: <font color="red">5</font>
whose information: <font color="red">jukka</font>
  not found

command: <font color="red">x</font>
</pre>

<p>Some remarks:</p>
<ul><li>Because of the tests, it is essential that the <em>user interface</em> works exactly as in the example above. The application can optionally decide in which way invalid inputs are handled. The tests contain only valid inputs.</li>
<li><em><strong>The program has to start when the main method is executed; you can only create one Scanner object.</strong></em></li>
<li>Do not use static variables, the tests execute your program many different times, and the static variable values left from the previous execution would possibly disturb them!</li>
<li>In order to make things easier, we assume the name is a single string; if we want to print our lists sorted by surname in alphabetic order, the name has to be given in the form <em>surname name</em>.</li>
<li>A person can have more than one phone number and address. However, these are not necessarily stored.</li>
<li>If a person is deleted, no search should retrieve them.</li>
</ul>
</div>
</div>    </div>


      </div><!-- /inner -->

  </div><!-- /node-322 -->
        </div>


              </div><!-- /inner-inner -->
	  </div><!-- /inner-wrapper -->
    <div class="corner-bottom"><div class="corner-bottom-right corner"></div><div class="corner-bottom-left corner"></div></div>
  </div><!-- /inner -->
</div><!-- /block -->  </div>
</div>
  </div>
</div>
</div>
</div>
                                                                  </div><!-- /content-content -->
                                                              </div><!-- /content-inner-inner -->
                            </div><!-- /content-inner -->
                          </div><!-- /content-region-inner -->
                        </div><!-- /content-region -->

                        <div id="content-bottom" class="content-bottom row nested ">
<div id="content-bottom-inner" class="content-bottom-inner inner clearfix">

<div id="block-block-1" class="block block-block odd first last grid16-16">
  <div class="inner">
    <div class="corner-top"><div class="corner-top-right corner"></div><div class="corner-top-left corner"></div></div>
      	<div class="inner-wrapper">
      <div class="inner-inner">
                <div class="content clearfix">
          <div id="header-top-block">
<p class="rtecenter">
</p>
<p class="rtecenter">
</p>
	</div>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-47575342-3', 'auto');
  ga('set', 'anonymizeIp', true);
  ga('send', 'pageview');

</script>        </div>
      </div><!-- /inner-inner -->
	  </div><!-- /inner-wrapper -->
    <div class="corner-bottom"><div class="corner-bottom-right corner"></div><div class="corner-bottom-left corner"></div></div>
  </div><!-- /inner -->
</div><!-- /block --></div><!-- /content-bottom-inner -->
</div><!-- /content-bottom -->
                      </div><!-- /content-group-inner -->
                    </div><!-- /content-group -->

                                      </div><!-- /main-content-inner -->
                </div><!-- /main-content -->

                              </div><!-- /main-group-inner -->
            </div><!-- /main-group -->
          </div><!-- /main-inner -->
        </div><!-- /main -->
      </div><!-- /main-wrapper -->

      <!-- postscript-bottom row: width = grid_width -->

      <!-- footer row: width = grid_width -->

      <!-- footer-message row: width = grid_width -->
      <div id="footer-message-wrapper" class="footer-message-wrapper full-width">
        <div id="footer-message" class="footer-message row grid16-16">
          <div id="footer-message-inner" class="footer-message-inner inner clearfix">
                              <div id="footer-message-text" class="footer-message-text block">
<div id="footer-message-text-inner" class="footer-message-text-inner inner clearfix">
<br>
</div><!-- /footer-message-text-inner -->
</div><!-- /footer-message-text -->

          </div><!-- /footer-message-inner -->
        </div><!-- /footer-message -->
      </div><!-- /footer-message-wrapper -->

    <!-- /page-inner -->
  <!-- /page -->


</body>
